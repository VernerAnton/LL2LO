var hb=Object.defineProperty;var Yv=n=>{throw TypeError(n)};var db=(n,t,e)=>t in n?hb(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var B=(n,t,e)=>db(n,typeof t!="symbol"?t+"":t,e),qp=(n,t,e)=>t.has(n)||Yv("Cannot "+e);var a=(n,t,e)=>(qp(n,t,"read from private field"),e?e.call(n):t.get(n)),A=(n,t,e)=>t.has(n)?Yv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),g=(n,t,e,i)=>(qp(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),S=(n,t,e)=>(qp(n,t,"access private method"),e);var Fe=(n,t,e,i)=>({set _(s){g(n,t,s,e)},get _(){return a(n,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();var Hw={exports:{}},_p={},Uw={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sd=Symbol.for("react.element"),fb=Symbol.for("react.portal"),pb=Symbol.for("react.fragment"),gb=Symbol.for("react.strict_mode"),mb=Symbol.for("react.profiler"),yb=Symbol.for("react.provider"),vb=Symbol.for("react.context"),wb=Symbol.for("react.forward_ref"),Ab=Symbol.for("react.suspense"),Sb=Symbol.for("react.memo"),Eb=Symbol.for("react.lazy"),Xv=Symbol.iterator;function _b(n){return n===null||typeof n!="object"?null:(n=Xv&&n[Xv]||n["@@iterator"],typeof n=="function"?n:null)}var Gw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vw=Object.assign,Ww={};function mc(n,t,e){this.props=n,this.context=t,this.refs=Ww,this.updater=e||Gw}mc.prototype.isReactComponent={};mc.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};mc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Yw(){}Yw.prototype=mc.prototype;function Oy(n,t,e){this.props=n,this.context=t,this.refs=Ww,this.updater=e||Gw}var Fy=Oy.prototype=new Yw;Fy.constructor=Oy;Vw(Fy,mc.prototype);Fy.isPureReactComponent=!0;var qv=Array.isArray,Xw=Object.prototype.hasOwnProperty,jy={current:null},qw={key:!0,ref:!0,__self:!0,__source:!0};function Kw(n,t,e){var i,s={},r=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)Xw.call(t,i)&&!qw.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(l===1)s.children=e;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:sd,type:n,key:r,ref:o,props:s,_owner:jy.current}}function bb(n,t){return{$$typeof:sd,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function zy(n){return typeof n=="object"&&n!==null&&n.$$typeof===sd}function Cb(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var Kv=/\/+/g;function Kp(n,t){return typeof n=="object"&&n!==null&&n.key!=null?Cb(""+n.key):t.toString(36)}function Od(n,t,e,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case sd:case fb:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+Kp(o,0):i,qv(s)?(e="",n!=null&&(e=n.replace(Kv,"$&/")+"/"),Od(s,t,e,"",function(u){return u})):s!=null&&(zy(s)&&(s=bb(s,e+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Kv,"$&/")+"/")+n)),t.push(s)),1;if(o=0,i=i===""?".":i+":",qv(n))for(var l=0;l<n.length;l++){r=n[l];var c=i+Kp(r,l);o+=Od(r,t,e,c,s)}else if(c=_b(n),typeof c=="function")for(n=c.call(n),l=0;!(r=n.next()).done;)r=r.value,c=i+Kp(r,l++),o+=Od(r,t,e,c,s);else if(r==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function gd(n,t,e){if(n==null)return n;var i=[],s=0;return Od(n,i,"","",function(r){return t.call(e,r,s++)}),i}function xb(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var qe={current:null},Fd={transition:null},Tb={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:Fd,ReactCurrentOwner:jy};function Qw(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:gd,forEach:function(n,t,e){gd(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return gd(n,function(){t++}),t},toArray:function(n){return gd(n,function(t){return t})||[]},only:function(n){if(!zy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};rt.Component=mc;rt.Fragment=pb;rt.Profiler=mb;rt.PureComponent=Oy;rt.StrictMode=gb;rt.Suspense=Ab;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tb;rt.act=Qw;rt.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Vw({},n.props),s=n.key,r=n.ref,o=n._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=jy.current),t.key!==void 0&&(s=""+t.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in t)Xw.call(t,c)&&!qw.hasOwnProperty(c)&&(i[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)i.children=e;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:sd,type:n.type,key:s,ref:r,props:i,_owner:o}};rt.createContext=function(n){return n={$$typeof:vb,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:yb,_context:n},n.Consumer=n};rt.createElement=Kw;rt.createFactory=function(n){var t=Kw.bind(null,n);return t.type=n,t};rt.createRef=function(){return{current:null}};rt.forwardRef=function(n){return{$$typeof:wb,render:n}};rt.isValidElement=zy;rt.lazy=function(n){return{$$typeof:Eb,_payload:{_status:-1,_result:n},_init:xb}};rt.memo=function(n,t){return{$$typeof:Sb,type:n,compare:t===void 0?null:t}};rt.startTransition=function(n){var t=Fd.transition;Fd.transition={};try{n()}finally{Fd.transition=t}};rt.unstable_act=Qw;rt.useCallback=function(n,t){return qe.current.useCallback(n,t)};rt.useContext=function(n){return qe.current.useContext(n)};rt.useDebugValue=function(){};rt.useDeferredValue=function(n){return qe.current.useDeferredValue(n)};rt.useEffect=function(n,t){return qe.current.useEffect(n,t)};rt.useId=function(){return qe.current.useId()};rt.useImperativeHandle=function(n,t,e){return qe.current.useImperativeHandle(n,t,e)};rt.useInsertionEffect=function(n,t){return qe.current.useInsertionEffect(n,t)};rt.useLayoutEffect=function(n,t){return qe.current.useLayoutEffect(n,t)};rt.useMemo=function(n,t){return qe.current.useMemo(n,t)};rt.useReducer=function(n,t,e){return qe.current.useReducer(n,t,e)};rt.useRef=function(n){return qe.current.useRef(n)};rt.useState=function(n){return qe.current.useState(n)};rt.useSyncExternalStore=function(n,t,e){return qe.current.useSyncExternalStore(n,t,e)};rt.useTransition=function(){return qe.current.useTransition()};rt.version="18.3.1";Uw.exports=rt;var lt=Uw.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb=lt,Pb=Symbol.for("react.element"),Rb=Symbol.for("react.fragment"),Ib=Object.prototype.hasOwnProperty,Mb=kb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lb={key:!0,ref:!0,__self:!0,__source:!0};function Jw(n,t,e){var i,s={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)Ib.call(t,i)&&!Lb.hasOwnProperty(i)&&(s[i]=t[i]);if(n&&n.defaultProps)for(i in t=n.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:Pb,type:n,key:r,ref:o,props:s,_owner:Mb.current}}_p.Fragment=Rb;_p.jsx=Jw;_p.jsxs=Jw;Hw.exports=_p;var k=Hw.exports,Zw={exports:{}},Nn={},tA={exports:{}},eA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(I,W){var X=I.length;I.push(W);t:for(;0<X;){var ot=X-1>>>1,st=I[ot];if(0<s(st,W))I[ot]=W,I[X]=st,X=ot;else break t}}function e(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var W=I[0],X=I.pop();if(X!==W){I[0]=X;t:for(var ot=0,st=I.length,St=st>>>1;ot<St;){var Ee=2*(ot+1)-1,Zn=I[Ee],Tt=Ee+1,dt=I[Tt];if(0>s(Zn,X))Tt<st&&0>s(dt,Zn)?(I[ot]=dt,I[Tt]=X,ot=Tt):(I[ot]=Zn,I[Ee]=X,ot=Ee);else if(Tt<st&&0>s(dt,X))I[ot]=dt,I[Tt]=X,ot=Tt;else break t}}return W}function s(I,W){var X=I.sortIndex-W.sortIndex;return X!==0?X:I.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(I){for(var W=e(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=I)i(u),W.sortIndex=W.expirationTime,t(c,W);else break;W=e(u)}}function b(I){if(v=!1,E(I),!m)if(e(c)!==null)m=!0,D(C);else{var W=e(u);W!==null&&G(b,W.startTime-I)}}function C(I,W){m=!1,v&&(v=!1,y(P),P=-1),p=!0;var X=f;try{for(E(W),d=e(c);d!==null&&(!(d.expirationTime>W)||I&&!H());){var ot=d.callback;if(typeof ot=="function"){d.callback=null,f=d.priorityLevel;var st=ot(d.expirationTime<=W);W=n.unstable_now(),typeof st=="function"?d.callback=st:d===e(c)&&i(c),E(W)}else i(c);d=e(c)}if(d!==null)var St=!0;else{var Ee=e(u);Ee!==null&&G(b,Ee.startTime-W),St=!1}return St}finally{d=null,f=X,p=!1}}var x=!1,T=null,P=-1,M=5,L=-1;function H(){return!(n.unstable_now()-L<M)}function tt(){if(T!==null){var I=n.unstable_now();L=I;var W=!0;try{W=T(!0,I)}finally{W?pt():(x=!1,T=null)}}else x=!1}var pt;if(typeof w=="function")pt=function(){w(tt)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,Bt=et.port2;et.port1.onmessage=tt,pt=function(){Bt.postMessage(null)}}else pt=function(){_(tt,0)};function D(I){T=I,x||(x=!0,pt())}function G(I,W){P=_(function(){I(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_continueExecution=function(){m||p||(m=!0,D(C))},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return e(c)},n.unstable_next=function(I){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var X=f;f=W;try{return I()}finally{f=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(I,W){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var X=f;f=I;try{return W()}finally{f=X}},n.unstable_scheduleCallback=function(I,W,X){var ot=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ot+X:ot):X=ot,I){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=X+st,I={id:h++,callback:W,priorityLevel:I,startTime:X,expirationTime:st,sortIndex:-1},X>ot?(I.sortIndex=X,t(u,I),e(c)===null&&I===e(u)&&(v?(y(P),P=-1):v=!0,G(b,X-ot))):(I.sortIndex=st,t(c,I),m||p||(m=!0,D(C))),I},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(I){var W=f;return function(){var X=f;f=W;try{return I.apply(this,arguments)}finally{f=X}}}})(eA);tA.exports=eA;var Nb=tA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db=lt,Ln=Nb;function R(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nA=new Set,hu={};function _a(n,t){cc(n,t),cc(n+"Capture",t)}function cc(n,t){for(hu[n]=t,n=0;n<t.length;n++)nA.add(t[n])}var Os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rg=Object.prototype.hasOwnProperty,Ob=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qv={},Jv={};function Fb(n){return Rg.call(Jv,n)?!0:Rg.call(Qv,n)?!1:Ob.test(n)?Jv[n]=!0:(Qv[n]=!0,!1)}function jb(n,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function zb(n,t,e,i){if(t===null||typeof t>"u"||jb(n,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ke(n,t,e,i,s,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Se[n]=new Ke(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];Se[t]=new Ke(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Se[n]=new Ke(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Se[n]=new Ke(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Se[n]=new Ke(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Se[n]=new Ke(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Se[n]=new Ke(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Se[n]=new Ke(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Se[n]=new Ke(n,5,!1,n.toLowerCase(),null,!1,!1)});var $y=/[\-:]([a-z])/g;function By(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace($y,By);Se[t]=new Ke(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace($y,By);Se[t]=new Ke(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace($y,By);Se[t]=new Ke(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Se[n]=new Ke(n,1,!1,n.toLowerCase(),null,!1,!1)});Se.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Se[n]=new Ke(n,1,!1,n.toLowerCase(),null,!0,!0)});function Hy(n,t,e,i){var s=Se.hasOwnProperty(t)?Se[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zb(t,e,s,i)&&(e=null),i||s===null?Fb(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):s.mustUseProperty?n[s.propertyName]=e===null?s.type===3?!1:"":e:(t=s.attributeName,i=s.attributeNamespace,e===null?n.removeAttribute(t):(s=s.type,e=s===3||s===4&&e===!0?"":""+e,i?n.setAttributeNS(i,t,e):n.setAttribute(t,e))))}var Hs=Db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,md=Symbol.for("react.element"),Da=Symbol.for("react.portal"),Oa=Symbol.for("react.fragment"),Uy=Symbol.for("react.strict_mode"),Ig=Symbol.for("react.profiler"),iA=Symbol.for("react.provider"),sA=Symbol.for("react.context"),Gy=Symbol.for("react.forward_ref"),Mg=Symbol.for("react.suspense"),Lg=Symbol.for("react.suspense_list"),Vy=Symbol.for("react.memo"),Ws=Symbol.for("react.lazy"),rA=Symbol.for("react.offscreen"),Zv=Symbol.iterator;function wc(n){return n===null||typeof n!="object"?null:(n=Zv&&n[Zv]||n["@@iterator"],typeof n=="function"?n:null)}var Ft=Object.assign,Qp;function Mc(n){if(Qp===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Qp=t&&t[1]||""}return`
`+Qp+n}var Jp=!1;function Zp(n,t){if(!n||Jp)return"";Jp=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(n,[],t)}else{try{t.call()}catch(u){i=u}n.call(t.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,l=r.length-1;1<=o&&0<=l&&s[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==r[l]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{Jp=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?Mc(n):""}function $b(n){switch(n.tag){case 5:return Mc(n.type);case 16:return Mc("Lazy");case 13:return Mc("Suspense");case 19:return Mc("SuspenseList");case 0:case 2:case 15:return n=Zp(n.type,!1),n;case 11:return n=Zp(n.type.render,!1),n;case 1:return n=Zp(n.type,!0),n;default:return""}}function Ng(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Oa:return"Fragment";case Da:return"Portal";case Ig:return"Profiler";case Uy:return"StrictMode";case Mg:return"Suspense";case Lg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case sA:return(n.displayName||"Context")+".Consumer";case iA:return(n._context.displayName||"Context")+".Provider";case Gy:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Vy:return t=n.displayName||null,t!==null?t:Ng(n.type)||"Memo";case Ws:t=n._payload,n=n._init;try{return Ng(n(t))}catch{}}return null}function Bb(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ng(t);case 8:return t===Uy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Br(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function oA(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hb(n){var t=oA(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,r=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function yd(n){n._valueTracker||(n._valueTracker=Hb(n))}function aA(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=oA(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function xf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Dg(n,t){var e=t.checked;return Ft({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function t0(n,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=Br(t.value!=null?t.value:e),n._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lA(n,t){t=t.checked,t!=null&&Hy(n,"checked",t,!1)}function Og(n,t){lA(n,t);var e=Br(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?Fg(n,t.type,e):t.hasOwnProperty("defaultValue")&&Fg(n,t.type,Br(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function e0(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function Fg(n,t,e){(t!=="number"||xf(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var Lc=Array.isArray;function qa(n,t,e,i){if(n=n.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<n.length;e++)s=t.hasOwnProperty("$"+n[e].value),n[e].selected!==s&&(n[e].selected=s),s&&i&&(n[e].defaultSelected=!0)}else{for(e=""+Br(e),t=null,s=0;s<n.length;s++){if(n[s].value===e){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}t!==null||n[s].disabled||(t=n[s])}t!==null&&(t.selected=!0)}}function jg(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return Ft({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function n0(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(R(92));if(Lc(e)){if(1<e.length)throw Error(R(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:Br(e)}}function cA(n,t){var e=Br(t.value),i=Br(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),i!=null&&(n.defaultValue=""+i)}function i0(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function uA(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zg(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?uA(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var vd,hA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,s){MSApp.execUnsafeLocalFunction(function(){return n(t,e,i,s)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(vd=vd||document.createElement("div"),vd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function du(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var Jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ub=["Webkit","ms","Moz","O"];Object.keys(Jc).forEach(function(n){Ub.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),Jc[t]=Jc[n]})});function dA(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||Jc.hasOwnProperty(n)&&Jc[n]?(""+t).trim():t+"px"}function fA(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,s=dA(e,t[e],i);e==="float"&&(e="cssFloat"),i?n.setProperty(e,s):n[e]=s}}var Gb=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $g(n,t){if(t){if(Gb[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function Bg(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hg=null;function Wy(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ug=null,Ka=null,Qa=null;function s0(n){if(n=ad(n)){if(typeof Ug!="function")throw Error(R(280));var t=n.stateNode;t&&(t=kp(t),Ug(n.stateNode,n.type,t))}}function pA(n){Ka?Qa?Qa.push(n):Qa=[n]:Ka=n}function gA(){if(Ka){var n=Ka,t=Qa;if(Qa=Ka=null,s0(n),t)for(n=0;n<t.length;n++)s0(t[n])}}function mA(n,t){return n(t)}function yA(){}var tg=!1;function vA(n,t,e){if(tg)return n(t,e);tg=!0;try{return mA(n,t,e)}finally{tg=!1,(Ka!==null||Qa!==null)&&(yA(),gA())}}function fu(n,t){var e=n.stateNode;if(e===null)return null;var i=kp(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(R(231,t,typeof e));return e}var Gg=!1;if(Os)try{var Ac={};Object.defineProperty(Ac,"passive",{get:function(){Gg=!0}}),window.addEventListener("test",Ac,Ac),window.removeEventListener("test",Ac,Ac)}catch{Gg=!1}function Vb(n,t,e,i,s,r,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var Zc=!1,Tf=null,kf=!1,Vg=null,Wb={onError:function(n){Zc=!0,Tf=n}};function Yb(n,t,e,i,s,r,o,l,c){Zc=!1,Tf=null,Vb.apply(Wb,arguments)}function Xb(n,t,e,i,s,r,o,l,c){if(Yb.apply(this,arguments),Zc){if(Zc){var u=Tf;Zc=!1,Tf=null}else throw Error(R(198));kf||(kf=!0,Vg=u)}}function ba(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function wA(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function r0(n){if(ba(n)!==n)throw Error(R(188))}function qb(n){var t=n.alternate;if(!t){if(t=ba(n),t===null)throw Error(R(188));return t!==n?null:n}for(var e=n,i=t;;){var s=e.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){e=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===e)return r0(s),n;if(r===i)return r0(s),t;r=r.sibling}throw Error(R(188))}if(e.return!==i.return)e=s,i=r;else{for(var o=!1,l=s.child;l;){if(l===e){o=!0,e=s,i=r;break}if(l===i){o=!0,i=s,e=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===e){o=!0,e=r,i=s;break}if(l===i){o=!0,i=r,e=s;break}l=l.sibling}if(!o)throw Error(R(189))}}if(e.alternate!==i)throw Error(R(190))}if(e.tag!==3)throw Error(R(188));return e.stateNode.current===e?n:t}function AA(n){return n=qb(n),n!==null?SA(n):null}function SA(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=SA(n);if(t!==null)return t;n=n.sibling}return null}var EA=Ln.unstable_scheduleCallback,o0=Ln.unstable_cancelCallback,Kb=Ln.unstable_shouldYield,Qb=Ln.unstable_requestPaint,Vt=Ln.unstable_now,Jb=Ln.unstable_getCurrentPriorityLevel,Yy=Ln.unstable_ImmediatePriority,_A=Ln.unstable_UserBlockingPriority,Pf=Ln.unstable_NormalPriority,Zb=Ln.unstable_LowPriority,bA=Ln.unstable_IdlePriority,bp=null,Xi=null;function t1(n){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(bp,n,void 0,(n.current.flags&128)===128)}catch{}}var wi=Math.clz32?Math.clz32:i1,e1=Math.log,n1=Math.LN2;function i1(n){return n>>>=0,n===0?32:31-(e1(n)/n1|0)|0}var wd=64,Ad=4194304;function Nc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Rf(n,t){var e=n.pendingLanes;if(e===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=e&268435455;if(o!==0){var l=o&~s;l!==0?i=Nc(l):(r&=o,r!==0&&(i=Nc(r)))}else o=e&~s,o!==0?i=Nc(o):r!==0&&(i=Nc(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(i&4&&(i|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=i;0<t;)e=31-wi(t),s=1<<e,i|=n[e],t&=~s;return i}function s1(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r1(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-wi(r),l=1<<o,c=s[o];c===-1?(!(l&e)||l&i)&&(s[o]=s1(l,t)):c<=t&&(n.expiredLanes|=l),r&=~l}}function Wg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function CA(){var n=wd;return wd<<=1,!(wd&4194240)&&(wd=64),n}function eg(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function rd(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-wi(t),n[t]=e}function o1(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<e;){var s=31-wi(e),r=1<<s;t[s]=0,i[s]=-1,n[s]=-1,e&=~r}}function Xy(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-wi(e),s=1<<i;s&t|n[i]&t&&(n[i]|=t),e&=~s}}var yt=0;function xA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var TA,qy,kA,PA,RA,Yg=!1,Sd=[],Ir=null,Mr=null,Lr=null,pu=new Map,gu=new Map,qs=[],a1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a0(n,t){switch(n){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":pu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(t.pointerId)}}function Sc(n,t,e,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=ad(t),t!==null&&qy(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),n)}function l1(n,t,e,i,s){switch(t){case"focusin":return Ir=Sc(Ir,n,t,e,i,s),!0;case"dragenter":return Mr=Sc(Mr,n,t,e,i,s),!0;case"mouseover":return Lr=Sc(Lr,n,t,e,i,s),!0;case"pointerover":var r=s.pointerId;return pu.set(r,Sc(pu.get(r)||null,n,t,e,i,s)),!0;case"gotpointercapture":return r=s.pointerId,gu.set(r,Sc(gu.get(r)||null,n,t,e,i,s)),!0}return!1}function IA(n){var t=io(n.target);if(t!==null){var e=ba(t);if(e!==null){if(t=e.tag,t===13){if(t=wA(e),t!==null){n.blockedOn=t,RA(n.priority,function(){kA(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jd(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=Xg(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);Hg=i,e.target.dispatchEvent(i),Hg=null}else return t=ad(e),t!==null&&qy(t),n.blockedOn=e,!1;t.shift()}return!0}function l0(n,t,e){jd(n)&&e.delete(t)}function c1(){Yg=!1,Ir!==null&&jd(Ir)&&(Ir=null),Mr!==null&&jd(Mr)&&(Mr=null),Lr!==null&&jd(Lr)&&(Lr=null),pu.forEach(l0),gu.forEach(l0)}function Ec(n,t){n.blockedOn===t&&(n.blockedOn=null,Yg||(Yg=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,c1)))}function mu(n){function t(s){return Ec(s,n)}if(0<Sd.length){Ec(Sd[0],n);for(var e=1;e<Sd.length;e++){var i=Sd[e];i.blockedOn===n&&(i.blockedOn=null)}}for(Ir!==null&&Ec(Ir,n),Mr!==null&&Ec(Mr,n),Lr!==null&&Ec(Lr,n),pu.forEach(t),gu.forEach(t),e=0;e<qs.length;e++)i=qs[e],i.blockedOn===n&&(i.blockedOn=null);for(;0<qs.length&&(e=qs[0],e.blockedOn===null);)IA(e),e.blockedOn===null&&qs.shift()}var Ja=Hs.ReactCurrentBatchConfig,If=!0;function u1(n,t,e,i){var s=yt,r=Ja.transition;Ja.transition=null;try{yt=1,Ky(n,t,e,i)}finally{yt=s,Ja.transition=r}}function h1(n,t,e,i){var s=yt,r=Ja.transition;Ja.transition=null;try{yt=4,Ky(n,t,e,i)}finally{yt=s,Ja.transition=r}}function Ky(n,t,e,i){if(If){var s=Xg(n,t,e,i);if(s===null)hg(n,t,i,Mf,e),a0(n,i);else if(l1(s,n,t,e,i))i.stopPropagation();else if(a0(n,i),t&4&&-1<a1.indexOf(n)){for(;s!==null;){var r=ad(s);if(r!==null&&TA(r),r=Xg(n,t,e,i),r===null&&hg(n,t,i,Mf,e),r===s)break;s=r}s!==null&&i.stopPropagation()}else hg(n,t,i,null,e)}}var Mf=null;function Xg(n,t,e,i){if(Mf=null,n=Wy(i),n=io(n),n!==null)if(t=ba(n),t===null)n=null;else if(e=t.tag,e===13){if(n=wA(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return Mf=n,null}function MA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jb()){case Yy:return 1;case _A:return 4;case Pf:case Zb:return 16;case bA:return 536870912;default:return 16}default:return 16}}var kr=null,Qy=null,zd=null;function LA(){if(zd)return zd;var n,t=Qy,e=t.length,i,s="value"in kr?kr.value:kr.textContent,r=s.length;for(n=0;n<e&&t[n]===s[n];n++);var o=e-n;for(i=1;i<=o&&t[e-i]===s[r-i];i++);return zd=s.slice(n,1<i?1-i:void 0)}function $d(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function Ed(){return!0}function c0(){return!1}function Dn(n){function t(e,i,s,r,o){this._reactName=e,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(e=n[l],this[l]=e?e(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ed:c0,this.isPropagationStopped=c0,this}return Ft(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Ed)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Ed)},persist:function(){},isPersistent:Ed}),t}var yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jy=Dn(yc),od=Ft({},yc,{view:0,detail:0}),d1=Dn(od),ng,ig,_c,Cp=Ft({},od,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zy,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_c&&(_c&&n.type==="mousemove"?(ng=n.screenX-_c.screenX,ig=n.screenY-_c.screenY):ig=ng=0,_c=n),ng)},movementY:function(n){return"movementY"in n?n.movementY:ig}}),u0=Dn(Cp),f1=Ft({},Cp,{dataTransfer:0}),p1=Dn(f1),g1=Ft({},od,{relatedTarget:0}),sg=Dn(g1),m1=Ft({},yc,{animationName:0,elapsedTime:0,pseudoElement:0}),y1=Dn(m1),v1=Ft({},yc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),w1=Dn(v1),A1=Ft({},yc,{data:0}),h0=Dn(A1),S1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b1(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=_1[n])?!!t[n]:!1}function Zy(){return b1}var C1=Ft({},od,{key:function(n){if(n.key){var t=S1[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=$d(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?E1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zy,charCode:function(n){return n.type==="keypress"?$d(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$d(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),x1=Dn(C1),T1=Ft({},Cp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d0=Dn(T1),k1=Ft({},od,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zy}),P1=Dn(k1),R1=Ft({},yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),I1=Dn(R1),M1=Ft({},Cp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),L1=Dn(M1),N1=[9,13,27,32],tv=Os&&"CompositionEvent"in window,tu=null;Os&&"documentMode"in document&&(tu=document.documentMode);var D1=Os&&"TextEvent"in window&&!tu,NA=Os&&(!tv||tu&&8<tu&&11>=tu),f0=" ",p0=!1;function DA(n,t){switch(n){case"keyup":return N1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fa=!1;function O1(n,t){switch(n){case"compositionend":return OA(t);case"keypress":return t.which!==32?null:(p0=!0,f0);case"textInput":return n=t.data,n===f0&&p0?null:n;default:return null}}function F1(n,t){if(Fa)return n==="compositionend"||!tv&&DA(n,t)?(n=LA(),zd=Qy=kr=null,Fa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return NA&&t.locale!=="ko"?null:t.data;default:return null}}var j1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g0(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!j1[n.type]:t==="textarea"}function FA(n,t,e,i){pA(i),t=Lf(t,"onChange"),0<t.length&&(e=new Jy("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var eu=null,yu=null;function z1(n){XA(n,0)}function xp(n){var t=$a(n);if(aA(t))return n}function $1(n,t){if(n==="change")return t}var jA=!1;if(Os){var rg;if(Os){var og="oninput"in document;if(!og){var m0=document.createElement("div");m0.setAttribute("oninput","return;"),og=typeof m0.oninput=="function"}rg=og}else rg=!1;jA=rg&&(!document.documentMode||9<document.documentMode)}function y0(){eu&&(eu.detachEvent("onpropertychange",zA),yu=eu=null)}function zA(n){if(n.propertyName==="value"&&xp(yu)){var t=[];FA(t,yu,n,Wy(n)),vA(z1,t)}}function B1(n,t,e){n==="focusin"?(y0(),eu=t,yu=e,eu.attachEvent("onpropertychange",zA)):n==="focusout"&&y0()}function H1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xp(yu)}function U1(n,t){if(n==="click")return xp(t)}function G1(n,t){if(n==="input"||n==="change")return xp(t)}function V1(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var Si=typeof Object.is=="function"?Object.is:V1;function vu(n,t){if(Si(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var s=e[i];if(!Rg.call(t,s)||!Si(n[s],t[s]))return!1}return!0}function v0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function w0(n,t){var e=v0(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=v0(e)}}function $A(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?$A(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function BA(){for(var n=window,t=xf();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=xf(n.document)}return t}function ev(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function W1(n){var t=BA(),e=n.focusedElem,i=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&$A(e.ownerDocument.documentElement,e)){if(i!==null&&ev(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var s=e.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=w0(e,r);var o=w0(e,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(t),n.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Y1=Os&&"documentMode"in document&&11>=document.documentMode,ja=null,qg=null,nu=null,Kg=!1;function A0(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Kg||ja==null||ja!==xf(i)||(i=ja,"selectionStart"in i&&ev(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nu&&vu(nu,i)||(nu=i,i=Lf(qg,"onSelect"),0<i.length&&(t=new Jy("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=ja)))}function _d(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var za={animationend:_d("Animation","AnimationEnd"),animationiteration:_d("Animation","AnimationIteration"),animationstart:_d("Animation","AnimationStart"),transitionend:_d("Transition","TransitionEnd")},ag={},HA={};Os&&(HA=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function Tp(n){if(ag[n])return ag[n];if(!za[n])return n;var t=za[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in HA)return ag[n]=t[e];return n}var UA=Tp("animationend"),GA=Tp("animationiteration"),VA=Tp("animationstart"),WA=Tp("transitionend"),YA=new Map,S0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(n,t){YA.set(n,t),_a(t,[n])}for(var lg=0;lg<S0.length;lg++){var cg=S0[lg],X1=cg.toLowerCase(),q1=cg[0].toUpperCase()+cg.slice(1);Wr(X1,"on"+q1)}Wr(UA,"onAnimationEnd");Wr(GA,"onAnimationIteration");Wr(VA,"onAnimationStart");Wr("dblclick","onDoubleClick");Wr("focusin","onFocus");Wr("focusout","onBlur");Wr(WA,"onTransitionEnd");cc("onMouseEnter",["mouseout","mouseover"]);cc("onMouseLeave",["mouseout","mouseover"]);cc("onPointerEnter",["pointerout","pointerover"]);cc("onPointerLeave",["pointerout","pointerover"]);_a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_a("onBeforeInput",["compositionend","keypress","textInput","paste"]);_a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dc));function E0(n,t,e){var i=n.type||"unknown-event";n.currentTarget=e,Xb(i,t,void 0,n),n.currentTarget=null}function XA(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var l=i[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&s.isPropagationStopped())break t;E0(s,l,u),r=c}else for(o=0;o<i.length;o++){if(l=i[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&s.isPropagationStopped())break t;E0(s,l,u),r=c}}}if(kf)throw n=Vg,kf=!1,Vg=null,n}function bt(n,t){var e=t[em];e===void 0&&(e=t[em]=new Set);var i=n+"__bubble";e.has(i)||(qA(t,n,2,!1),e.add(i))}function ug(n,t,e){var i=0;t&&(i|=4),qA(e,n,i,t)}var bd="_reactListening"+Math.random().toString(36).slice(2);function wu(n){if(!n[bd]){n[bd]=!0,nA.forEach(function(e){e!=="selectionchange"&&(K1.has(e)||ug(e,!1,n),ug(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[bd]||(t[bd]=!0,ug("selectionchange",!1,t))}}function qA(n,t,e,i){switch(MA(t)){case 1:var s=u1;break;case 4:s=h1;break;default:s=Ky}e=s.bind(null,t,e,n),s=void 0,!Gg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(t,e,{capture:!0,passive:s}):n.addEventListener(t,e,!0):s!==void 0?n.addEventListener(t,e,{passive:s}):n.addEventListener(t,e,!1)}function hg(n,t,e,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=io(l),o===null)return;if(c=o.tag,c===5||c===6){i=r=o;continue t}l=l.parentNode}}i=i.return}vA(function(){var u=r,h=Wy(e),d=[];t:{var f=YA.get(n);if(f!==void 0){var p=Jy,m=n;switch(n){case"keypress":if($d(e)===0)break t;case"keydown":case"keyup":p=x1;break;case"focusin":m="focus",p=sg;break;case"focusout":m="blur",p=sg;break;case"beforeblur":case"afterblur":p=sg;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=u0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=p1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=P1;break;case UA:case GA:case VA:p=y1;break;case WA:p=I1;break;case"scroll":p=d1;break;case"wheel":p=L1;break;case"copy":case"cut":case"paste":p=w1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=d0}var v=(t&4)!==0,_=!v&&n==="scroll",y=v?f!==null?f+"Capture":null:f;v=[];for(var w=u,E;w!==null;){E=w;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,y!==null&&(b=fu(w,y),b!=null&&v.push(Au(w,b,E)))),_)break;w=w.return}0<v.length&&(f=new p(f,m,null,e,h),d.push({event:f,listeners:v}))}}if(!(t&7)){t:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&e!==Hg&&(m=e.relatedTarget||e.fromElement)&&(io(m)||m[Fs]))break t;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=e.relatedTarget||e.toElement,p=u,m=m?io(m):null,m!==null&&(_=ba(m),m!==_||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=u0,b="onMouseLeave",y="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(v=d0,b="onPointerLeave",y="onPointerEnter",w="pointer"),_=p==null?f:$a(p),E=m==null?f:$a(m),f=new v(b,w+"leave",p,e,h),f.target=_,f.relatedTarget=E,b=null,io(h)===u&&(v=new v(y,w+"enter",m,e,h),v.target=E,v.relatedTarget=_,b=v),_=b,p&&m)e:{for(v=p,y=m,w=0,E=v;E;E=xa(E))w++;for(E=0,b=y;b;b=xa(b))E++;for(;0<w-E;)v=xa(v),w--;for(;0<E-w;)y=xa(y),E--;for(;w--;){if(v===y||y!==null&&v===y.alternate)break e;v=xa(v),y=xa(y)}v=null}else v=null;p!==null&&_0(d,f,p,v,!1),m!==null&&_!==null&&_0(d,_,m,v,!0)}}t:{if(f=u?$a(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=$1;else if(g0(f))if(jA)C=G1;else{C=H1;var x=B1}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=U1);if(C&&(C=C(n,u))){FA(d,C,e,h);break t}x&&x(n,f,u),n==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&Fg(f,"number",f.value)}switch(x=u?$a(u):window,n){case"focusin":(g0(x)||x.contentEditable==="true")&&(ja=x,qg=u,nu=null);break;case"focusout":nu=qg=ja=null;break;case"mousedown":Kg=!0;break;case"contextmenu":case"mouseup":case"dragend":Kg=!1,A0(d,e,h);break;case"selectionchange":if(Y1)break;case"keydown":case"keyup":A0(d,e,h)}var T;if(tv)t:{switch(n){case"compositionstart":var P="onCompositionStart";break t;case"compositionend":P="onCompositionEnd";break t;case"compositionupdate":P="onCompositionUpdate";break t}P=void 0}else Fa?DA(n,e)&&(P="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(P="onCompositionStart");P&&(NA&&e.locale!=="ko"&&(Fa||P!=="onCompositionStart"?P==="onCompositionEnd"&&Fa&&(T=LA()):(kr=h,Qy="value"in kr?kr.value:kr.textContent,Fa=!0)),x=Lf(u,P),0<x.length&&(P=new h0(P,n,null,e,h),d.push({event:P,listeners:x}),T?P.data=T:(T=OA(e),T!==null&&(P.data=T)))),(T=D1?O1(n,e):F1(n,e))&&(u=Lf(u,"onBeforeInput"),0<u.length&&(h=new h0("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:u}),h.data=T))}XA(d,t)})}function Au(n,t,e){return{instance:n,listener:t,currentTarget:e}}function Lf(n,t){for(var e=t+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=fu(n,e),r!=null&&i.unshift(Au(n,r,s)),r=fu(n,t),r!=null&&i.push(Au(n,r,s))),n=n.return}return i}function xa(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _0(n,t,e,i,s){for(var r=t._reactName,o=[];e!==null&&e!==i;){var l=e,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,s?(c=fu(e,r),c!=null&&o.unshift(Au(e,c,l))):s||(c=fu(e,r),c!=null&&o.push(Au(e,c,l)))),e=e.return}o.length!==0&&n.push({event:t,listeners:o})}var Q1=/\r\n?/g,J1=/\u0000|\uFFFD/g;function b0(n){return(typeof n=="string"?n:""+n).replace(Q1,`
`).replace(J1,"")}function Cd(n,t,e){if(t=b0(t),b0(n)!==t&&e)throw Error(R(425))}function Nf(){}var Qg=null,Jg=null;function Zg(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tm=typeof setTimeout=="function"?setTimeout:void 0,Z1=typeof clearTimeout=="function"?clearTimeout:void 0,C0=typeof Promise=="function"?Promise:void 0,tC=typeof queueMicrotask=="function"?queueMicrotask:typeof C0<"u"?function(n){return C0.resolve(null).then(n).catch(eC)}:tm;function eC(n){setTimeout(function(){throw n})}function dg(n,t){var e=t,i=0;do{var s=e.nextSibling;if(n.removeChild(e),s&&s.nodeType===8)if(e=s.data,e==="/$"){if(i===0){n.removeChild(s),mu(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=s}while(e);mu(t)}function Nr(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function x0(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var vc=Math.random().toString(36).slice(2),Yi="__reactFiber$"+vc,Su="__reactProps$"+vc,Fs="__reactContainer$"+vc,em="__reactEvents$"+vc,nC="__reactListeners$"+vc,iC="__reactHandles$"+vc;function io(n){var t=n[Yi];if(t)return t;for(var e=n.parentNode;e;){if(t=e[Fs]||e[Yi]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=x0(n);n!==null;){if(e=n[Yi])return e;n=x0(n)}return t}n=e,e=n.parentNode}return null}function ad(n){return n=n[Yi]||n[Fs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function $a(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(R(33))}function kp(n){return n[Su]||null}var nm=[],Ba=-1;function Yr(n){return{current:n}}function xt(n){0>Ba||(n.current=nm[Ba],nm[Ba]=null,Ba--)}function _t(n,t){Ba++,nm[Ba]=n.current,n.current=t}var Hr={},Oe=Yr(Hr),cn=Yr(!1),fa=Hr;function uc(n,t){var e=n.type.contextTypes;if(!e)return Hr;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in e)s[r]=t[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=s),s}function un(n){return n=n.childContextTypes,n!=null}function Df(){xt(cn),xt(Oe)}function T0(n,t,e){if(Oe.current!==Hr)throw Error(R(168));_t(Oe,t),_t(cn,e)}function KA(n,t,e){var i=n.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(R(108,Bb(n)||"Unknown",s));return Ft({},e,i)}function Of(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Hr,fa=Oe.current,_t(Oe,n),_t(cn,cn.current),!0}function k0(n,t,e){var i=n.stateNode;if(!i)throw Error(R(169));e?(n=KA(n,t,fa),i.__reactInternalMemoizedMergedChildContext=n,xt(cn),xt(Oe),_t(Oe,n)):xt(cn),_t(cn,e)}var ss=null,Pp=!1,fg=!1;function QA(n){ss===null?ss=[n]:ss.push(n)}function sC(n){Pp=!0,QA(n)}function Xr(){if(!fg&&ss!==null){fg=!0;var n=0,t=yt;try{var e=ss;for(yt=1;n<e.length;n++){var i=e[n];do i=i(!0);while(i!==null)}ss=null,Pp=!1}catch(s){throw ss!==null&&(ss=ss.slice(n+1)),EA(Yy,Xr),s}finally{yt=t,fg=!1}}return null}var Ha=[],Ua=0,Ff=null,jf=0,Gn=[],Vn=0,pa=null,Is=1,Ms="";function Kr(n,t){Ha[Ua++]=jf,Ha[Ua++]=Ff,Ff=n,jf=t}function JA(n,t,e){Gn[Vn++]=Is,Gn[Vn++]=Ms,Gn[Vn++]=pa,pa=n;var i=Is;n=Ms;var s=32-wi(i)-1;i&=~(1<<s),e+=1;var r=32-wi(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Is=1<<32-wi(t)+s|e<<s|i,Ms=r+n}else Is=1<<r|e<<s|i,Ms=n}function nv(n){n.return!==null&&(Kr(n,1),JA(n,1,0))}function iv(n){for(;n===Ff;)Ff=Ha[--Ua],Ha[Ua]=null,jf=Ha[--Ua],Ha[Ua]=null;for(;n===pa;)pa=Gn[--Vn],Gn[Vn]=null,Ms=Gn[--Vn],Gn[Vn]=null,Is=Gn[--Vn],Gn[Vn]=null}var In=null,Rn=null,It=!1,yi=null;function ZA(n,t){var e=Xn(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function P0(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,In=n,Rn=Nr(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,In=n,Rn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=pa!==null?{id:Is,overflow:Ms}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Xn(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,In=n,Rn=null,!0):!1;default:return!1}}function im(n){return(n.mode&1)!==0&&(n.flags&128)===0}function sm(n){if(It){var t=Rn;if(t){var e=t;if(!P0(n,t)){if(im(n))throw Error(R(418));t=Nr(e.nextSibling);var i=In;t&&P0(n,t)?ZA(i,e):(n.flags=n.flags&-4097|2,It=!1,In=n)}}else{if(im(n))throw Error(R(418));n.flags=n.flags&-4097|2,It=!1,In=n}}}function R0(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;In=n}function xd(n){if(n!==In)return!1;if(!It)return R0(n),It=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!Zg(n.type,n.memoizedProps)),t&&(t=Rn)){if(im(n))throw tS(),Error(R(418));for(;t;)ZA(n,t),t=Nr(t.nextSibling)}if(R0(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(R(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){Rn=Nr(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}Rn=null}}else Rn=In?Nr(n.stateNode.nextSibling):null;return!0}function tS(){for(var n=Rn;n;)n=Nr(n.nextSibling)}function hc(){Rn=In=null,It=!1}function sv(n){yi===null?yi=[n]:yi.push(n)}var rC=Hs.ReactCurrentBatchConfig;function bc(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(R(309));var i=e.stateNode}if(!i)throw Error(R(147,n));var s=i,r=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var l=s.refs;o===null?delete l[r]:l[r]=o},t._stringRef=r,t)}if(typeof n!="string")throw Error(R(284));if(!e._owner)throw Error(R(290,n))}return n}function Td(n,t){throw n=Object.prototype.toString.call(t),Error(R(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function I0(n){var t=n._init;return t(n._payload)}function eS(n){function t(y,w){if(n){var E=y.deletions;E===null?(y.deletions=[w],y.flags|=16):E.push(w)}}function e(y,w){if(!n)return null;for(;w!==null;)t(y,w),w=w.sibling;return null}function i(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=jr(y,w),y.index=0,y.sibling=null,y}function r(y,w,E){return y.index=E,n?(E=y.alternate,E!==null?(E=E.index,E<w?(y.flags|=2,w):E):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function l(y,w,E,b){return w===null||w.tag!==6?(w=Ag(E,y.mode,b),w.return=y,w):(w=s(w,E),w.return=y,w)}function c(y,w,E,b){var C=E.type;return C===Oa?h(y,w,E.props.children,b,E.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ws&&I0(C)===w.type)?(b=s(w,E.props),b.ref=bc(y,w,E),b.return=y,b):(b=Yd(E.type,E.key,E.props,null,y.mode,b),b.ref=bc(y,w,E),b.return=y,b)}function u(y,w,E,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Sg(E,y.mode,b),w.return=y,w):(w=s(w,E.children||[]),w.return=y,w)}function h(y,w,E,b,C){return w===null||w.tag!==7?(w=da(E,y.mode,b,C),w.return=y,w):(w=s(w,E),w.return=y,w)}function d(y,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ag(""+w,y.mode,E),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case md:return E=Yd(w.type,w.key,w.props,null,y.mode,E),E.ref=bc(y,null,w),E.return=y,E;case Da:return w=Sg(w,y.mode,E),w.return=y,w;case Ws:var b=w._init;return d(y,b(w._payload),E)}if(Lc(w)||wc(w))return w=da(w,y.mode,E,null),w.return=y,w;Td(y,w)}return null}function f(y,w,E,b){var C=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return C!==null?null:l(y,w,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case md:return E.key===C?c(y,w,E,b):null;case Da:return E.key===C?u(y,w,E,b):null;case Ws:return C=E._init,f(y,w,C(E._payload),b)}if(Lc(E)||wc(E))return C!==null?null:h(y,w,E,b,null);Td(y,E)}return null}function p(y,w,E,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(E)||null,l(w,y,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case md:return y=y.get(b.key===null?E:b.key)||null,c(w,y,b,C);case Da:return y=y.get(b.key===null?E:b.key)||null,u(w,y,b,C);case Ws:var x=b._init;return p(y,w,E,x(b._payload),C)}if(Lc(b)||wc(b))return y=y.get(E)||null,h(w,y,b,C,null);Td(w,b)}return null}function m(y,w,E,b){for(var C=null,x=null,T=w,P=w=0,M=null;T!==null&&P<E.length;P++){T.index>P?(M=T,T=null):M=T.sibling;var L=f(y,T,E[P],b);if(L===null){T===null&&(T=M);break}n&&T&&L.alternate===null&&t(y,T),w=r(L,w,P),x===null?C=L:x.sibling=L,x=L,T=M}if(P===E.length)return e(y,T),It&&Kr(y,P),C;if(T===null){for(;P<E.length;P++)T=d(y,E[P],b),T!==null&&(w=r(T,w,P),x===null?C=T:x.sibling=T,x=T);return It&&Kr(y,P),C}for(T=i(y,T);P<E.length;P++)M=p(T,y,P,E[P],b),M!==null&&(n&&M.alternate!==null&&T.delete(M.key===null?P:M.key),w=r(M,w,P),x===null?C=M:x.sibling=M,x=M);return n&&T.forEach(function(H){return t(y,H)}),It&&Kr(y,P),C}function v(y,w,E,b){var C=wc(E);if(typeof C!="function")throw Error(R(150));if(E=C.call(E),E==null)throw Error(R(151));for(var x=C=null,T=w,P=w=0,M=null,L=E.next();T!==null&&!L.done;P++,L=E.next()){T.index>P?(M=T,T=null):M=T.sibling;var H=f(y,T,L.value,b);if(H===null){T===null&&(T=M);break}n&&T&&H.alternate===null&&t(y,T),w=r(H,w,P),x===null?C=H:x.sibling=H,x=H,T=M}if(L.done)return e(y,T),It&&Kr(y,P),C;if(T===null){for(;!L.done;P++,L=E.next())L=d(y,L.value,b),L!==null&&(w=r(L,w,P),x===null?C=L:x.sibling=L,x=L);return It&&Kr(y,P),C}for(T=i(y,T);!L.done;P++,L=E.next())L=p(T,y,P,L.value,b),L!==null&&(n&&L.alternate!==null&&T.delete(L.key===null?P:L.key),w=r(L,w,P),x===null?C=L:x.sibling=L,x=L);return n&&T.forEach(function(tt){return t(y,tt)}),It&&Kr(y,P),C}function _(y,w,E,b){if(typeof E=="object"&&E!==null&&E.type===Oa&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case md:t:{for(var C=E.key,x=w;x!==null;){if(x.key===C){if(C=E.type,C===Oa){if(x.tag===7){e(y,x.sibling),w=s(x,E.props.children),w.return=y,y=w;break t}}else if(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ws&&I0(C)===x.type){e(y,x.sibling),w=s(x,E.props),w.ref=bc(y,x,E),w.return=y,y=w;break t}e(y,x);break}else t(y,x);x=x.sibling}E.type===Oa?(w=da(E.props.children,y.mode,b,E.key),w.return=y,y=w):(b=Yd(E.type,E.key,E.props,null,y.mode,b),b.ref=bc(y,w,E),b.return=y,y=b)}return o(y);case Da:t:{for(x=E.key;w!==null;){if(w.key===x)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){e(y,w.sibling),w=s(w,E.children||[]),w.return=y,y=w;break t}else{e(y,w);break}else t(y,w);w=w.sibling}w=Sg(E,y.mode,b),w.return=y,y=w}return o(y);case Ws:return x=E._init,_(y,w,x(E._payload),b)}if(Lc(E))return m(y,w,E,b);if(wc(E))return v(y,w,E,b);Td(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(e(y,w.sibling),w=s(w,E),w.return=y,y=w):(e(y,w),w=Ag(E,y.mode,b),w.return=y,y=w),o(y)):e(y,w)}return _}var dc=eS(!0),nS=eS(!1),zf=Yr(null),$f=null,Ga=null,rv=null;function ov(){rv=Ga=$f=null}function av(n){var t=zf.current;xt(zf),n._currentValue=t}function rm(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function Za(n,t){$f=n,rv=Ga=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(ln=!0),n.firstContext=null)}function Qn(n){var t=n._currentValue;if(rv!==n)if(n={context:n,memoizedValue:t,next:null},Ga===null){if($f===null)throw Error(R(308));Ga=n,$f.dependencies={lanes:0,firstContext:n}}else Ga=Ga.next=n;return t}var so=null;function lv(n){so===null?so=[n]:so.push(n)}function iS(n,t,e,i){var s=t.interleaved;return s===null?(e.next=e,lv(t)):(e.next=s.next,s.next=e),t.interleaved=e,js(n,i)}function js(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var Ys=!1;function cv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sS(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ls(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function Dr(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ct&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,js(n,e)}return s=i.interleaved,s===null?(t.next=t,lv(i)):(t.next=s.next,s.next=t),i.interleaved=t,js(n,e)}function Bd(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,Xy(n,e)}}function M0(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var s=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?s=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?s=r=t:r=r.next=t}else s=r=t;e={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function Bf(n,t,e,i){var s=n.updateQueue;Ys=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;o=0,h=u=c=null,l=r;do{var f=l.lane,p=l.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var m=n,v=l;switch(f=t,p=e,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(p,d,f);break t}d=m;break t;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break t;d=Ft({},d,f);break t;case 2:Ys=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);ma|=o,n.lanes=o,n.memoizedState=d}}function L0(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var i=n[t],s=i.callback;if(s!==null){if(i.callback=null,i=e,typeof s!="function")throw Error(R(191,s));s.call(i)}}}var ld={},qi=Yr(ld),Eu=Yr(ld),_u=Yr(ld);function ro(n){if(n===ld)throw Error(R(174));return n}function uv(n,t){switch(_t(_u,t),_t(Eu,n),_t(qi,ld),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zg(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=zg(t,n)}xt(qi),_t(qi,t)}function fc(){xt(qi),xt(Eu),xt(_u)}function rS(n){ro(_u.current);var t=ro(qi.current),e=zg(t,n.type);t!==e&&(_t(Eu,n),_t(qi,e))}function hv(n){Eu.current===n&&(xt(qi),xt(Eu))}var Nt=Yr(0);function Hf(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pg=[];function dv(){for(var n=0;n<pg.length;n++)pg[n]._workInProgressVersionPrimary=null;pg.length=0}var Hd=Hs.ReactCurrentDispatcher,gg=Hs.ReactCurrentBatchConfig,ga=0,Ot=null,ee=null,ue=null,Uf=!1,iu=!1,bu=0,oC=0;function _e(){throw Error(R(321))}function fv(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!Si(n[e],t[e]))return!1;return!0}function pv(n,t,e,i,s,r){if(ga=r,Ot=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hd.current=n===null||n.memoizedState===null?uC:hC,n=e(i,s),iu){r=0;do{if(iu=!1,bu=0,25<=r)throw Error(R(301));r+=1,ue=ee=null,t.updateQueue=null,Hd.current=dC,n=e(i,s)}while(iu)}if(Hd.current=Gf,t=ee!==null&&ee.next!==null,ga=0,ue=ee=Ot=null,Uf=!1,t)throw Error(R(300));return n}function gv(){var n=bu!==0;return bu=0,n}function Pi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?Ot.memoizedState=ue=n:ue=ue.next=n,ue}function Jn(){if(ee===null){var n=Ot.alternate;n=n!==null?n.memoizedState:null}else n=ee.next;var t=ue===null?Ot.memoizedState:ue.next;if(t!==null)ue=t,ee=n;else{if(n===null)throw Error(R(310));ee=n,n={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},ue===null?Ot.memoizedState=ue=n:ue=ue.next=n}return ue}function Cu(n,t){return typeof t=="function"?t(n):t}function mg(n){var t=Jn(),e=t.queue;if(e===null)throw Error(R(311));e.lastRenderedReducer=n;var i=ee,s=i.baseQueue,r=e.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,e.pending=null}if(s!==null){r=s.next,i=i.baseState;var l=o=null,c=null,u=r;do{var h=u.lane;if((ga&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=i):c=c.next=d,Ot.lanes|=h,ma|=h}u=u.next}while(u!==null&&u!==r);c===null?o=i:c.next=l,Si(i,t.memoizedState)||(ln=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,e.lastRenderedState=i}if(n=e.interleaved,n!==null){s=n;do r=s.lane,Ot.lanes|=r,ma|=r,s=s.next;while(s!==n)}else s===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function yg(n){var t=Jn(),e=t.queue;if(e===null)throw Error(R(311));e.lastRenderedReducer=n;var i=e.dispatch,s=e.pending,r=t.memoizedState;if(s!==null){e.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);Si(r,t.memoizedState)||(ln=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,i]}function oS(){}function aS(n,t){var e=Ot,i=Jn(),s=t(),r=!Si(i.memoizedState,s);if(r&&(i.memoizedState=s,ln=!0),i=i.queue,mv(uS.bind(null,e,i,n),[n]),i.getSnapshot!==t||r||ue!==null&&ue.memoizedState.tag&1){if(e.flags|=2048,xu(9,cS.bind(null,e,i,s,t),void 0,null),he===null)throw Error(R(349));ga&30||lS(e,t,s)}return s}function lS(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=Ot.updateQueue,t===null?(t={lastEffect:null,stores:null},Ot.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function cS(n,t,e,i){t.value=e,t.getSnapshot=i,hS(t)&&dS(n)}function uS(n,t,e){return e(function(){hS(t)&&dS(n)})}function hS(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!Si(n,e)}catch{return!0}}function dS(n){var t=js(n,1);t!==null&&Ai(t,n,1,-1)}function N0(n){var t=Pi();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cu,lastRenderedState:n},t.queue=n,n=n.dispatch=cC.bind(null,Ot,n),[t.memoizedState,n]}function xu(n,t,e,i){return n={tag:n,create:t,destroy:e,deps:i,next:null},t=Ot.updateQueue,t===null?(t={lastEffect:null,stores:null},Ot.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n)),n}function fS(){return Jn().memoizedState}function Ud(n,t,e,i){var s=Pi();Ot.flags|=n,s.memoizedState=xu(1|t,e,void 0,i===void 0?null:i)}function Rp(n,t,e,i){var s=Jn();i=i===void 0?null:i;var r=void 0;if(ee!==null){var o=ee.memoizedState;if(r=o.destroy,i!==null&&fv(i,o.deps)){s.memoizedState=xu(t,e,r,i);return}}Ot.flags|=n,s.memoizedState=xu(1|t,e,r,i)}function D0(n,t){return Ud(8390656,8,n,t)}function mv(n,t){return Rp(2048,8,n,t)}function pS(n,t){return Rp(4,2,n,t)}function gS(n,t){return Rp(4,4,n,t)}function mS(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function yS(n,t,e){return e=e!=null?e.concat([n]):null,Rp(4,4,mS.bind(null,t,n),e)}function yv(){}function vS(n,t){var e=Jn();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&fv(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function wS(n,t){var e=Jn();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&fv(t,i[1])?i[0]:(n=n(),e.memoizedState=[n,t],n)}function AS(n,t,e){return ga&21?(Si(e,t)||(e=CA(),Ot.lanes|=e,ma|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,ln=!0),n.memoizedState=e)}function aC(n,t){var e=yt;yt=e!==0&&4>e?e:4,n(!0);var i=gg.transition;gg.transition={};try{n(!1),t()}finally{yt=e,gg.transition=i}}function SS(){return Jn().memoizedState}function lC(n,t,e){var i=Fr(n);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},ES(n))_S(t,e);else if(e=iS(n,t,e,i),e!==null){var s=Ve();Ai(e,n,i,s),bS(e,t,i)}}function cC(n,t,e){var i=Fr(n),s={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(ES(n))_S(t,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,l=r(o,e);if(s.hasEagerState=!0,s.eagerState=l,Si(l,o)){var c=t.interleaved;c===null?(s.next=s,lv(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}e=iS(n,t,s,i),e!==null&&(s=Ve(),Ai(e,n,i,s),bS(e,t,i))}}function ES(n){var t=n.alternate;return n===Ot||t!==null&&t===Ot}function _S(n,t){iu=Uf=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function bS(n,t,e){if(e&4194240){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,Xy(n,e)}}var Gf={readContext:Qn,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},uC={readContext:Qn,useCallback:function(n,t){return Pi().memoizedState=[n,t===void 0?null:t],n},useContext:Qn,useEffect:D0,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,Ud(4194308,4,mS.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Ud(4194308,4,n,t)},useInsertionEffect:function(n,t){return Ud(4,2,n,t)},useMemo:function(n,t){var e=Pi();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var i=Pi();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},i.queue=n,n=n.dispatch=lC.bind(null,Ot,n),[i.memoizedState,n]},useRef:function(n){var t=Pi();return n={current:n},t.memoizedState=n},useState:N0,useDebugValue:yv,useDeferredValue:function(n){return Pi().memoizedState=n},useTransition:function(){var n=N0(!1),t=n[0];return n=aC.bind(null,n[1]),Pi().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var i=Ot,s=Pi();if(It){if(e===void 0)throw Error(R(407));e=e()}else{if(e=t(),he===null)throw Error(R(349));ga&30||lS(i,t,e)}s.memoizedState=e;var r={value:e,getSnapshot:t};return s.queue=r,D0(uS.bind(null,i,r,n),[n]),i.flags|=2048,xu(9,cS.bind(null,i,r,e,t),void 0,null),e},useId:function(){var n=Pi(),t=he.identifierPrefix;if(It){var e=Ms,i=Is;e=(i&~(1<<32-wi(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=bu++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=oC++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},hC={readContext:Qn,useCallback:vS,useContext:Qn,useEffect:mv,useImperativeHandle:yS,useInsertionEffect:pS,useLayoutEffect:gS,useMemo:wS,useReducer:mg,useRef:fS,useState:function(){return mg(Cu)},useDebugValue:yv,useDeferredValue:function(n){var t=Jn();return AS(t,ee.memoizedState,n)},useTransition:function(){var n=mg(Cu)[0],t=Jn().memoizedState;return[n,t]},useMutableSource:oS,useSyncExternalStore:aS,useId:SS,unstable_isNewReconciler:!1},dC={readContext:Qn,useCallback:vS,useContext:Qn,useEffect:mv,useImperativeHandle:yS,useInsertionEffect:pS,useLayoutEffect:gS,useMemo:wS,useReducer:yg,useRef:fS,useState:function(){return yg(Cu)},useDebugValue:yv,useDeferredValue:function(n){var t=Jn();return ee===null?t.memoizedState=n:AS(t,ee.memoizedState,n)},useTransition:function(){var n=yg(Cu)[0],t=Jn().memoizedState;return[n,t]},useMutableSource:oS,useSyncExternalStore:aS,useId:SS,unstable_isNewReconciler:!1};function ni(n,t){if(n&&n.defaultProps){t=Ft({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function om(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:Ft({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var Ip={isMounted:function(n){return(n=n._reactInternals)?ba(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var i=Ve(),s=Fr(n),r=Ls(i,s);r.payload=t,e!=null&&(r.callback=e),t=Dr(n,r,s),t!==null&&(Ai(t,n,s,i),Bd(t,n,s))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=Ve(),s=Fr(n),r=Ls(i,s);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=Dr(n,r,s),t!==null&&(Ai(t,n,s,i),Bd(t,n,s))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=Ve(),i=Fr(n),s=Ls(e,i);s.tag=2,t!=null&&(s.callback=t),t=Dr(n,s,i),t!==null&&(Ai(t,n,i,e),Bd(t,n,i))}};function O0(n,t,e,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!vu(e,i)||!vu(s,r):!0}function CS(n,t,e){var i=!1,s=Hr,r=t.contextType;return typeof r=="object"&&r!==null?r=Qn(r):(s=un(t)?fa:Oe.current,i=t.contextTypes,r=(i=i!=null)?uc(n,s):Hr),t=new t(e,r),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ip,n.stateNode=t,t._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),t}function F0(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&Ip.enqueueReplaceState(t,t.state,null)}function am(n,t,e,i){var s=n.stateNode;s.props=e,s.state=n.memoizedState,s.refs={},cv(n);var r=t.contextType;typeof r=="object"&&r!==null?s.context=Qn(r):(r=un(t)?fa:Oe.current,s.context=uc(n,r)),s.state=n.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(om(n,t,r,e),s.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ip.enqueueReplaceState(s,s.state,null),Bf(n,e,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function pc(n,t){try{var e="",i=t;do e+=$b(i),i=i.return;while(i);var s=e}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:t,stack:s,digest:null}}function vg(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function lm(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var fC=typeof WeakMap=="function"?WeakMap:Map;function xS(n,t,e){e=Ls(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){Wf||(Wf=!0,vm=i),lm(n,t)},e}function TS(n,t,e){e=Ls(-1,e),e.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;e.payload=function(){return i(s)},e.callback=function(){lm(n,t)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){lm(n,t),typeof i!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function j0(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new fC;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(e)||(s.add(e),n=TC.bind(null,n,t,e),t.then(n,n))}function z0(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function $0(n,t,e,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Ls(-1,1),t.tag=2,Dr(e,t,1))),e.lanes|=1),n)}var pC=Hs.ReactCurrentOwner,ln=!1;function Ge(n,t,e,i){t.child=n===null?nS(t,null,e,i):dc(t,n.child,e,i)}function B0(n,t,e,i,s){e=e.render;var r=t.ref;return Za(t,s),i=pv(n,t,e,i,r,s),e=gv(),n!==null&&!ln?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,zs(n,t,s)):(It&&e&&nv(t),t.flags|=1,Ge(n,t,i,s),t.child)}function H0(n,t,e,i,s){if(n===null){var r=e.type;return typeof r=="function"&&!Cv(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,kS(n,t,r,i,s)):(n=Yd(e.type,null,i,t,t.mode,s),n.ref=t.ref,n.return=t,t.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:vu,e(o,i)&&n.ref===t.ref)return zs(n,t,s)}return t.flags|=1,n=jr(r,i),n.ref=t.ref,n.return=t,t.child=n}function kS(n,t,e,i,s){if(n!==null){var r=n.memoizedProps;if(vu(r,i)&&n.ref===t.ref)if(ln=!1,t.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(ln=!0);else return t.lanes=n.lanes,zs(n,t,s)}return cm(n,t,e,i,s)}function PS(n,t,e){var i=t.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Wa,Tn),Tn|=e;else{if(!(e&1073741824))return n=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,_t(Wa,Tn),Tn|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:e,_t(Wa,Tn),Tn|=i}else r!==null?(i=r.baseLanes|e,t.memoizedState=null):i=e,_t(Wa,Tn),Tn|=i;return Ge(n,t,s,e),t.child}function RS(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function cm(n,t,e,i,s){var r=un(e)?fa:Oe.current;return r=uc(t,r),Za(t,s),e=pv(n,t,e,i,r,s),i=gv(),n!==null&&!ln?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,zs(n,t,s)):(It&&i&&nv(t),t.flags|=1,Ge(n,t,e,s),t.child)}function U0(n,t,e,i,s){if(un(e)){var r=!0;Of(t)}else r=!1;if(Za(t,s),t.stateNode===null)Gd(n,t),CS(t,e,i),am(t,e,i,s),i=!0;else if(n===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=Qn(u):(u=un(e)?fa:Oe.current,u=uc(t,u));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||c!==u)&&F0(t,o,i,u),Ys=!1;var f=t.memoizedState;o.state=f,Bf(t,i,o,s),c=t.memoizedState,l!==i||f!==c||cn.current||Ys?(typeof h=="function"&&(om(t,e,h,i),c=t.memoizedState),(l=Ys||O0(t,e,l,i,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),o.props=i,o.state=c,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,sS(n,t),l=t.memoizedProps,u=t.type===t.elementType?l:ni(t.type,l),o.props=u,d=t.pendingProps,f=o.context,c=e.contextType,typeof c=="object"&&c!==null?c=Qn(c):(c=un(e)?fa:Oe.current,c=uc(t,c));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&F0(t,o,i,c),Ys=!1,f=t.memoizedState,o.state=f,Bf(t,i,o,s);var m=t.memoizedState;l!==d||f!==m||cn.current||Ys?(typeof p=="function"&&(om(t,e,p,i),m=t.memoizedState),(u=Ys||O0(t,e,u,i,f,m,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),o.props=i,o.state=m,o.context=c,i=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),i=!1)}return um(n,t,e,i,r,s)}function um(n,t,e,i,s,r){RS(n,t);var o=(t.flags&128)!==0;if(!i&&!o)return s&&k0(t,e,!1),zs(n,t,r);i=t.stateNode,pC.current=t;var l=o&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,n!==null&&o?(t.child=dc(t,n.child,null,r),t.child=dc(t,null,l,r)):Ge(n,t,l,r),t.memoizedState=i.state,s&&k0(t,e,!0),t.child}function IS(n){var t=n.stateNode;t.pendingContext?T0(n,t.pendingContext,t.pendingContext!==t.context):t.context&&T0(n,t.context,!1),uv(n,t.containerInfo)}function G0(n,t,e,i,s){return hc(),sv(s),t.flags|=256,Ge(n,t,e,i),t.child}var hm={dehydrated:null,treeContext:null,retryLane:0};function dm(n){return{baseLanes:n,cachePool:null,transitions:null}}function MS(n,t,e){var i=t.pendingProps,s=Nt.current,r=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(r=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),_t(Nt,s&1),n===null)return sm(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,n=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Np(o,i,0,null),n=da(n,i,e,null),r.return=t,n.return=t,r.sibling=n,t.child=r,t.child.memoizedState=dm(e),t.memoizedState=hm,n):vv(t,o));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return gC(n,t,o,i,l,s,e);if(r){r=i.fallback,o=t.mode,s=n.child,l=s.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=c,t.deletions=null):(i=jr(s,c),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?r=jr(l,r):(r=da(r,o,e,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=n.child.memoizedState,o=o===null?dm(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~e,t.memoizedState=hm,i}return r=n.child,n=r.sibling,i=jr(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=i,t.memoizedState=null,i}function vv(n,t){return t=Np({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function kd(n,t,e,i){return i!==null&&sv(i),dc(t,n.child,null,e),n=vv(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function gC(n,t,e,i,s,r,o){if(e)return t.flags&256?(t.flags&=-257,i=vg(Error(R(422))),kd(n,t,o,i)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(r=i.fallback,s=t.mode,i=Np({mode:"visible",children:i.children},s,0,null),r=da(r,s,o,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&dc(t,n.child,null,o),t.child.memoizedState=dm(o),t.memoizedState=hm,r);if(!(t.mode&1))return kd(n,t,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,r=Error(R(419)),i=vg(r,i,void 0),kd(n,t,o,i)}if(l=(o&n.childLanes)!==0,ln||l){if(i=he,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,js(n,s),Ai(i,n,s,-1))}return bv(),i=vg(Error(R(421))),kd(n,t,o,i)}return s.data==="$?"?(t.flags|=128,t.child=n.child,t=kC.bind(null,n),s._reactRetry=t,null):(n=r.treeContext,Rn=Nr(s.nextSibling),In=t,It=!0,yi=null,n!==null&&(Gn[Vn++]=Is,Gn[Vn++]=Ms,Gn[Vn++]=pa,Is=n.id,Ms=n.overflow,pa=t),t=vv(t,i.children),t.flags|=4096,t)}function V0(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),rm(n.return,t,e)}function wg(n,t,e,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=e,r.tailMode=s)}function LS(n,t,e){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(Ge(n,t,i.children,e),i=Nt.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&V0(n,e,t);else if(n.tag===19)V0(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(_t(Nt,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(e=t.child,s=null;e!==null;)n=e.alternate,n!==null&&Hf(n)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),wg(t,!1,s,e,r);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(n=s.alternate,n!==null&&Hf(n)===null){t.child=s;break}n=s.sibling,s.sibling=e,e=s,s=n}wg(t,!0,e,null,r);break;case"together":wg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gd(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function zs(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),ma|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(R(153));if(t.child!==null){for(n=t.child,e=jr(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=jr(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function mC(n,t,e){switch(t.tag){case 3:IS(t),hc();break;case 5:rS(t);break;case 1:un(t.type)&&Of(t);break;case 4:uv(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;_t(zf,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(_t(Nt,Nt.current&1),t.flags|=128,null):e&t.child.childLanes?MS(n,t,e):(_t(Nt,Nt.current&1),n=zs(n,t,e),n!==null?n.sibling:null);_t(Nt,Nt.current&1);break;case 19:if(i=(e&t.childLanes)!==0,n.flags&128){if(i)return LS(n,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_t(Nt,Nt.current),i)break;return null;case 22:case 23:return t.lanes=0,PS(n,t,e)}return zs(n,t,e)}var NS,fm,DS,OS;NS=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};fm=function(){};DS=function(n,t,e,i){var s=n.memoizedProps;if(s!==i){n=t.stateNode,ro(qi.current);var r=null;switch(e){case"input":s=Dg(n,s),i=Dg(n,i),r=[];break;case"select":s=Ft({},s,{value:void 0}),i=Ft({},i,{value:void 0}),r=[];break;case"textarea":s=jg(n,s),i=jg(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Nf)}$g(e,i);var o;e=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hu.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var c=i[u];if(l=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(e||(e={}),e[o]=c[o])}else e||(r||(r=[]),r.push(u,e)),e=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&bt("scroll",n),r||l===c||(r=[])):(r=r||[]).push(u,c))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};OS=function(n,t,e,i){e!==i&&(t.flags|=4)};function Cc(n,t){if(!It)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function be(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function yC(n,t,e){var i=t.pendingProps;switch(iv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(t),null;case 1:return un(t.type)&&Df(),be(t),null;case 3:return i=t.stateNode,fc(),xt(cn),xt(Oe),dv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(xd(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yi!==null&&(Sm(yi),yi=null))),fm(n,t),be(t),null;case 5:hv(t);var s=ro(_u.current);if(e=t.type,n!==null&&t.stateNode!=null)DS(n,t,e,i,s),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(R(166));return be(t),null}if(n=ro(qi.current),xd(t)){i=t.stateNode,e=t.type;var r=t.memoizedProps;switch(i[Yi]=t,i[Su]=r,n=(t.mode&1)!==0,e){case"dialog":bt("cancel",i),bt("close",i);break;case"iframe":case"object":case"embed":bt("load",i);break;case"video":case"audio":for(s=0;s<Dc.length;s++)bt(Dc[s],i);break;case"source":bt("error",i);break;case"img":case"image":case"link":bt("error",i),bt("load",i);break;case"details":bt("toggle",i);break;case"input":t0(i,r),bt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},bt("invalid",i);break;case"textarea":n0(i,r),bt("invalid",i)}$g(e,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?i.textContent!==l&&(r.suppressHydrationWarning!==!0&&Cd(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&Cd(i.textContent,l,n),s=["children",""+l]):hu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&bt("scroll",i)}switch(e){case"input":yd(i),e0(i,r,!0);break;case"textarea":yd(i),i0(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Nf)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=uA(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(e,{is:i.is}):(n=o.createElement(e),e==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,e),n[Yi]=t,n[Su]=i,NS(n,t,!1,!1),t.stateNode=n;t:{switch(o=Bg(e,i),e){case"dialog":bt("cancel",n),bt("close",n),s=i;break;case"iframe":case"object":case"embed":bt("load",n),s=i;break;case"video":case"audio":for(s=0;s<Dc.length;s++)bt(Dc[s],n);s=i;break;case"source":bt("error",n),s=i;break;case"img":case"image":case"link":bt("error",n),bt("load",n),s=i;break;case"details":bt("toggle",n),s=i;break;case"input":t0(n,i),s=Dg(n,i),bt("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Ft({},i,{value:void 0}),bt("invalid",n);break;case"textarea":n0(n,i),s=jg(n,i),bt("invalid",n);break;default:s=i}$g(e,s),l=s;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?fA(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&hA(n,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&du(n,c):typeof c=="number"&&du(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(hu.hasOwnProperty(r)?c!=null&&r==="onScroll"&&bt("scroll",n):c!=null&&Hy(n,r,c,o))}switch(e){case"input":yd(n),e0(n,i,!1);break;case"textarea":yd(n),i0(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Br(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?qa(n,!!i.multiple,r,!1):i.defaultValue!=null&&qa(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Nf)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return be(t),null;case 6:if(n&&t.stateNode!=null)OS(n,t,n.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(R(166));if(e=ro(_u.current),ro(qi.current),xd(t)){if(i=t.stateNode,e=t.memoizedProps,i[Yi]=t,(r=i.nodeValue!==e)&&(n=In,n!==null))switch(n.tag){case 3:Cd(i.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Cd(i.nodeValue,e,(n.mode&1)!==0)}r&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[Yi]=t,t.stateNode=i}return be(t),null;case 13:if(xt(Nt),i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(It&&Rn!==null&&t.mode&1&&!(t.flags&128))tS(),hc(),t.flags|=98560,r=!1;else if(r=xd(t),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(R(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(R(317));r[Yi]=t}else hc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;be(t),r=!1}else yi!==null&&(Sm(yi),yi=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(n===null||Nt.current&1?ne===0&&(ne=3):bv())),t.updateQueue!==null&&(t.flags|=4),be(t),null);case 4:return fc(),fm(n,t),n===null&&wu(t.stateNode.containerInfo),be(t),null;case 10:return av(t.type._context),be(t),null;case 17:return un(t.type)&&Df(),be(t),null;case 19:if(xt(Nt),r=t.memoizedState,r===null)return be(t),null;if(i=(t.flags&128)!==0,o=r.rendering,o===null)if(i)Cc(r,!1);else{if(ne!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(o=Hf(n),o!==null){for(t.flags|=128,Cc(r,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)r=e,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return _t(Nt,Nt.current&1|2),t.child}n=n.sibling}r.tail!==null&&Vt()>gc&&(t.flags|=128,i=!0,Cc(r,!1),t.lanes=4194304)}else{if(!i)if(n=Hf(o),n!==null){if(t.flags|=128,i=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Cc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!It)return be(t),null}else 2*Vt()-r.renderingStartTime>gc&&e!==1073741824&&(t.flags|=128,i=!0,Cc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Vt(),t.sibling=null,e=Nt.current,_t(Nt,i?e&1|2:e&1),t):(be(t),null);case 22:case 23:return _v(),i=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Tn&1073741824&&(be(t),t.subtreeFlags&6&&(t.flags|=8192)):be(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function vC(n,t){switch(iv(t),t.tag){case 1:return un(t.type)&&Df(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return fc(),xt(cn),xt(Oe),dv(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return hv(t),null;case 13:if(xt(Nt),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(R(340));hc()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return xt(Nt),null;case 4:return fc(),null;case 10:return av(t.type._context),null;case 22:case 23:return _v(),null;case 24:return null;default:return null}}var Pd=!1,Le=!1,wC=typeof WeakSet=="function"?WeakSet:Set,z=null;function Va(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){$t(n,t,i)}else e.current=null}function pm(n,t,e){try{e()}catch(i){$t(n,t,i)}}var W0=!1;function AC(n,t){if(Qg=If,n=BA(),ev(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=n,f=null;e:for(;;){for(var p;d!==e||s!==0&&d.nodeType!==3||(l=o+s),d!==r||i!==0&&d.nodeType!==3||(c=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break e;if(f===e&&++u===s&&(l=o),f===r&&++h===i&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}e=l===-1||c===-1?null:{start:l,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(Jg={focusedElem:n,selectionRange:e},If=!1,z=t;z!==null;)if(t=z,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,z=n;else for(;z!==null;){t=z;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,_=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:ni(t.type,v),_);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(b){$t(t,t.return,b)}if(n=t.sibling,n!==null){n.return=t.return,z=n;break}z=t.return}return m=W0,W0=!1,m}function su(n,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&pm(t,e,r)}s=s.next}while(s!==i)}}function Mp(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function gm(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function FS(n){var t=n.alternate;t!==null&&(n.alternate=null,FS(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[Yi],delete t[Su],delete t[em],delete t[nC],delete t[iC])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function jS(n){return n.tag===5||n.tag===3||n.tag===4}function Y0(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||jS(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mm(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Nf));else if(i!==4&&(n=n.child,n!==null))for(mm(n,t,e),n=n.sibling;n!==null;)mm(n,t,e),n=n.sibling}function ym(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(ym(n,t,e),n=n.sibling;n!==null;)ym(n,t,e),n=n.sibling}var ve=null,mi=!1;function Gs(n,t,e){for(e=e.child;e!==null;)zS(n,t,e),e=e.sibling}function zS(n,t,e){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(bp,e)}catch{}switch(e.tag){case 5:Le||Va(e,t);case 6:var i=ve,s=mi;ve=null,Gs(n,t,e),ve=i,mi=s,ve!==null&&(mi?(n=ve,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):ve.removeChild(e.stateNode));break;case 18:ve!==null&&(mi?(n=ve,e=e.stateNode,n.nodeType===8?dg(n.parentNode,e):n.nodeType===1&&dg(n,e),mu(n)):dg(ve,e.stateNode));break;case 4:i=ve,s=mi,ve=e.stateNode.containerInfo,mi=!0,Gs(n,t,e),ve=i,mi=s;break;case 0:case 11:case 14:case 15:if(!Le&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&pm(e,t,o),s=s.next}while(s!==i)}Gs(n,t,e);break;case 1:if(!Le&&(Va(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(l){$t(e,t,l)}Gs(n,t,e);break;case 21:Gs(n,t,e);break;case 22:e.mode&1?(Le=(i=Le)||e.memoizedState!==null,Gs(n,t,e),Le=i):Gs(n,t,e);break;default:Gs(n,t,e)}}function X0(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new wC),t.forEach(function(i){var s=PC.bind(null,n,i);e.has(i)||(e.add(i),i.then(s,s))})}}function ti(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var s=e[i];try{var r=n,o=t,l=o;t:for(;l!==null;){switch(l.tag){case 5:ve=l.stateNode,mi=!1;break t;case 3:ve=l.stateNode.containerInfo,mi=!0;break t;case 4:ve=l.stateNode.containerInfo,mi=!0;break t}l=l.return}if(ve===null)throw Error(R(160));zS(r,o,s),ve=null,mi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){$t(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$S(t,n),t=t.sibling}function $S(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ti(t,n),Ci(n),i&4){try{su(3,n,n.return),Mp(3,n)}catch(v){$t(n,n.return,v)}try{su(5,n,n.return)}catch(v){$t(n,n.return,v)}}break;case 1:ti(t,n),Ci(n),i&512&&e!==null&&Va(e,e.return);break;case 5:if(ti(t,n),Ci(n),i&512&&e!==null&&Va(e,e.return),n.flags&32){var s=n.stateNode;try{du(s,"")}catch(v){$t(n,n.return,v)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=e!==null?e.memoizedProps:r,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&lA(s,r),Bg(l,o);var u=Bg(l,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?fA(s,d):h==="dangerouslySetInnerHTML"?hA(s,d):h==="children"?du(s,d):Hy(s,h,d,u)}switch(l){case"input":Og(s,r);break;case"textarea":cA(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?qa(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?qa(s,!!r.multiple,r.defaultValue,!0):qa(s,!!r.multiple,r.multiple?[]:"",!1))}s[Su]=r}catch(v){$t(n,n.return,v)}}break;case 6:if(ti(t,n),Ci(n),i&4){if(n.stateNode===null)throw Error(R(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(v){$t(n,n.return,v)}}break;case 3:if(ti(t,n),Ci(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{mu(t.containerInfo)}catch(v){$t(n,n.return,v)}break;case 4:ti(t,n),Ci(n);break;case 13:ti(t,n),Ci(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Sv=Vt())),i&4&&X0(n);break;case 22:if(h=e!==null&&e.memoizedState!==null,n.mode&1?(Le=(u=Le)||h,ti(t,n),Le=u):ti(t,n),Ci(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(z=n,h=n.child;h!==null;){for(d=z=h;z!==null;){switch(f=z,p=f.child,f.tag){case 0:case 11:case 14:case 15:su(4,f,f.return);break;case 1:Va(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,e=f.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){$t(i,e,v)}}break;case 5:Va(f,f.return);break;case 22:if(f.memoizedState!==null){K0(d);continue}}p!==null?(p.return=f,z=p):K0(d)}h=h.sibling}t:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=dA("display",o))}catch(v){$t(n,n.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){$t(n,n.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break t;for(;d.sibling===null;){if(d.return===null||d.return===n)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ti(t,n),Ci(n),i&4&&X0(n);break;case 21:break;default:ti(t,n),Ci(n)}}function Ci(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(jS(e)){var i=e;break t}e=e.return}throw Error(R(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(du(s,""),i.flags&=-33);var r=Y0(n);ym(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=Y0(n);mm(n,l,o);break;default:throw Error(R(161))}}catch(c){$t(n,n.return,c)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function SC(n,t,e){z=n,BS(n)}function BS(n,t,e){for(var i=(n.mode&1)!==0;z!==null;){var s=z,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Pd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Le;l=Pd;var u=Le;if(Pd=o,(Le=c)&&!u)for(z=s;z!==null;)o=z,c=o.child,o.tag===22&&o.memoizedState!==null?Q0(s):c!==null?(c.return=o,z=c):Q0(s);for(;r!==null;)z=r,BS(r),r=r.sibling;z=s,Pd=l,Le=u}q0(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,z=r):q0(n)}}function q0(n){for(;z!==null;){var t=z;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||Mp(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Le)if(e===null)i.componentDidMount();else{var s=t.elementType===t.type?e.memoizedProps:ni(t.type,e.memoizedProps);i.componentDidUpdate(s,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&L0(t,r,i);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}L0(t,o,e)}break;case 5:var l=t.stateNode;if(e===null&&t.flags&4){e=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&mu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Le||t.flags&512&&gm(t)}catch(f){$t(t,t.return,f)}}if(t===n){z=null;break}if(e=t.sibling,e!==null){e.return=t.return,z=e;break}z=t.return}}function K0(n){for(;z!==null;){var t=z;if(t===n){z=null;break}var e=t.sibling;if(e!==null){e.return=t.return,z=e;break}z=t.return}}function Q0(n){for(;z!==null;){var t=z;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Mp(4,t)}catch(c){$t(t,e,c)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(c){$t(t,s,c)}}var r=t.return;try{gm(t)}catch(c){$t(t,r,c)}break;case 5:var o=t.return;try{gm(t)}catch(c){$t(t,o,c)}}}catch(c){$t(t,t.return,c)}if(t===n){z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,z=l;break}z=t.return}}var EC=Math.ceil,Vf=Hs.ReactCurrentDispatcher,wv=Hs.ReactCurrentOwner,qn=Hs.ReactCurrentBatchConfig,ct=0,he=null,Xt=null,Ae=0,Tn=0,Wa=Yr(0),ne=0,Tu=null,ma=0,Lp=0,Av=0,ru=null,an=null,Sv=0,gc=1/0,es=null,Wf=!1,vm=null,Or=null,Rd=!1,Pr=null,Yf=0,ou=0,wm=null,Vd=-1,Wd=0;function Ve(){return ct&6?Vt():Vd!==-1?Vd:Vd=Vt()}function Fr(n){return n.mode&1?ct&2&&Ae!==0?Ae&-Ae:rC.transition!==null?(Wd===0&&(Wd=CA()),Wd):(n=yt,n!==0||(n=window.event,n=n===void 0?16:MA(n.type)),n):1}function Ai(n,t,e,i){if(50<ou)throw ou=0,wm=null,Error(R(185));rd(n,e,i),(!(ct&2)||n!==he)&&(n===he&&(!(ct&2)&&(Lp|=e),ne===4&&Ks(n,Ae)),hn(n,i),e===1&&ct===0&&!(t.mode&1)&&(gc=Vt()+500,Pp&&Xr()))}function hn(n,t){var e=n.callbackNode;r1(n,t);var i=Rf(n,n===he?Ae:0);if(i===0)e!==null&&o0(e),n.callbackNode=null,n.callbackPriority=0;else if(t=i&-i,n.callbackPriority!==t){if(e!=null&&o0(e),t===1)n.tag===0?sC(J0.bind(null,n)):QA(J0.bind(null,n)),tC(function(){!(ct&6)&&Xr()}),e=null;else{switch(xA(i)){case 1:e=Yy;break;case 4:e=_A;break;case 16:e=Pf;break;case 536870912:e=bA;break;default:e=Pf}e=qS(e,HS.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function HS(n,t){if(Vd=-1,Wd=0,ct&6)throw Error(R(327));var e=n.callbackNode;if(tl()&&n.callbackNode!==e)return null;var i=Rf(n,n===he?Ae:0);if(i===0)return null;if(i&30||i&n.expiredLanes||t)t=Xf(n,i);else{t=i;var s=ct;ct|=2;var r=GS();(he!==n||Ae!==t)&&(es=null,gc=Vt()+500,ha(n,t));do try{CC();break}catch(l){US(n,l)}while(!0);ov(),Vf.current=r,ct=s,Xt!==null?t=0:(he=null,Ae=0,t=ne)}if(t!==0){if(t===2&&(s=Wg(n),s!==0&&(i=s,t=Am(n,s))),t===1)throw e=Tu,ha(n,0),Ks(n,i),hn(n,Vt()),e;if(t===6)Ks(n,i);else{if(s=n.current.alternate,!(i&30)&&!_C(s)&&(t=Xf(n,i),t===2&&(r=Wg(n),r!==0&&(i=r,t=Am(n,r))),t===1))throw e=Tu,ha(n,0),Ks(n,i),hn(n,Vt()),e;switch(n.finishedWork=s,n.finishedLanes=i,t){case 0:case 1:throw Error(R(345));case 2:Qr(n,an,es);break;case 3:if(Ks(n,i),(i&130023424)===i&&(t=Sv+500-Vt(),10<t)){if(Rf(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Ve(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=tm(Qr.bind(null,n,an,es),t);break}Qr(n,an,es);break;case 4:if(Ks(n,i),(i&4194240)===i)break;for(t=n.eventTimes,s=-1;0<i;){var o=31-wi(i);r=1<<o,o=t[o],o>s&&(s=o),i&=~r}if(i=s,i=Vt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*EC(i/1960))-i,10<i){n.timeoutHandle=tm(Qr.bind(null,n,an,es),i);break}Qr(n,an,es);break;case 5:Qr(n,an,es);break;default:throw Error(R(329))}}}return hn(n,Vt()),n.callbackNode===e?HS.bind(null,n):null}function Am(n,t){var e=ru;return n.current.memoizedState.isDehydrated&&(ha(n,t).flags|=256),n=Xf(n,t),n!==2&&(t=an,an=e,t!==null&&Sm(t)),n}function Sm(n){an===null?an=n:an.push.apply(an,n)}function _C(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var s=e[i],r=s.getSnapshot;s=s.value;try{if(!Si(r(),s))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ks(n,t){for(t&=~Av,t&=~Lp,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-wi(t),i=1<<e;n[e]=-1,t&=~i}}function J0(n){if(ct&6)throw Error(R(327));tl();var t=Rf(n,0);if(!(t&1))return hn(n,Vt()),null;var e=Xf(n,t);if(n.tag!==0&&e===2){var i=Wg(n);i!==0&&(t=i,e=Am(n,i))}if(e===1)throw e=Tu,ha(n,0),Ks(n,t),hn(n,Vt()),e;if(e===6)throw Error(R(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,Qr(n,an,es),hn(n,Vt()),null}function Ev(n,t){var e=ct;ct|=1;try{return n(t)}finally{ct=e,ct===0&&(gc=Vt()+500,Pp&&Xr())}}function ya(n){Pr!==null&&Pr.tag===0&&!(ct&6)&&tl();var t=ct;ct|=1;var e=qn.transition,i=yt;try{if(qn.transition=null,yt=1,n)return n()}finally{yt=i,qn.transition=e,ct=t,!(ct&6)&&Xr()}}function _v(){Tn=Wa.current,xt(Wa)}function ha(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,Z1(e)),Xt!==null)for(e=Xt.return;e!==null;){var i=e;switch(iv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Df();break;case 3:fc(),xt(cn),xt(Oe),dv();break;case 5:hv(i);break;case 4:fc();break;case 13:xt(Nt);break;case 19:xt(Nt);break;case 10:av(i.type._context);break;case 22:case 23:_v()}e=e.return}if(he=n,Xt=n=jr(n.current,null),Ae=Tn=t,ne=0,Tu=null,Av=Lp=ma=0,an=ru=null,so!==null){for(t=0;t<so.length;t++)if(e=so[t],i=e.interleaved,i!==null){e.interleaved=null;var s=i.next,r=e.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}e.pending=i}so=null}return n}function US(n,t){do{var e=Xt;try{if(ov(),Hd.current=Gf,Uf){for(var i=Ot.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Uf=!1}if(ga=0,ue=ee=Ot=null,iu=!1,bu=0,wv.current=null,e===null||e.return===null){ne=1,Tu=t,Xt=null;break}t:{var r=n,o=e.return,l=e,c=t;if(t=Ae,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=z0(o);if(p!==null){p.flags&=-257,$0(p,o,l,r,t),p.mode&1&&j0(r,u,t),t=p,c=u;var m=t.updateQueue;if(m===null){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break t}else{if(!(t&1)){j0(r,u,t),bv();break t}c=Error(R(426))}}else if(It&&l.mode&1){var _=z0(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),$0(_,o,l,r,t),sv(pc(c,l));break t}}r=c=pc(c,l),ne!==4&&(ne=2),ru===null?ru=[r]:ru.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var y=xS(r,c,t);M0(r,y);break t;case 1:l=c;var w=r.type,E=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Or===null||!Or.has(E)))){r.flags|=65536,t&=-t,r.lanes|=t;var b=TS(r,l,t);M0(r,b);break t}}r=r.return}while(r!==null)}WS(e)}catch(C){t=C,Xt===e&&e!==null&&(Xt=e=e.return);continue}break}while(!0)}function GS(){var n=Vf.current;return Vf.current=Gf,n===null?Gf:n}function bv(){(ne===0||ne===3||ne===2)&&(ne=4),he===null||!(ma&268435455)&&!(Lp&268435455)||Ks(he,Ae)}function Xf(n,t){var e=ct;ct|=2;var i=GS();(he!==n||Ae!==t)&&(es=null,ha(n,t));do try{bC();break}catch(s){US(n,s)}while(!0);if(ov(),ct=e,Vf.current=i,Xt!==null)throw Error(R(261));return he=null,Ae=0,ne}function bC(){for(;Xt!==null;)VS(Xt)}function CC(){for(;Xt!==null&&!Kb();)VS(Xt)}function VS(n){var t=XS(n.alternate,n,Tn);n.memoizedProps=n.pendingProps,t===null?WS(n):Xt=t,wv.current=null}function WS(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=vC(e,t),e!==null){e.flags&=32767,Xt=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ne=6,Xt=null;return}}else if(e=yC(e,t,Tn),e!==null){Xt=e;return}if(t=t.sibling,t!==null){Xt=t;return}Xt=t=n}while(t!==null);ne===0&&(ne=5)}function Qr(n,t,e){var i=yt,s=qn.transition;try{qn.transition=null,yt=1,xC(n,t,e,i)}finally{qn.transition=s,yt=i}return null}function xC(n,t,e,i){do tl();while(Pr!==null);if(ct&6)throw Error(R(327));e=n.finishedWork;var s=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(R(177));n.callbackNode=null,n.callbackPriority=0;var r=e.lanes|e.childLanes;if(o1(n,r),n===he&&(Xt=he=null,Ae=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Rd||(Rd=!0,qS(Pf,function(){return tl(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=qn.transition,qn.transition=null;var o=yt;yt=1;var l=ct;ct|=4,wv.current=null,AC(n,e),$S(e,n),W1(Jg),If=!!Qg,Jg=Qg=null,n.current=e,SC(e),Qb(),ct=l,yt=o,qn.transition=r}else n.current=e;if(Rd&&(Rd=!1,Pr=n,Yf=s),r=n.pendingLanes,r===0&&(Or=null),t1(e.stateNode),hn(n,Vt()),t!==null)for(i=n.onRecoverableError,e=0;e<t.length;e++)s=t[e],i(s.value,{componentStack:s.stack,digest:s.digest});if(Wf)throw Wf=!1,n=vm,vm=null,n;return Yf&1&&n.tag!==0&&tl(),r=n.pendingLanes,r&1?n===wm?ou++:(ou=0,wm=n):ou=0,Xr(),null}function tl(){if(Pr!==null){var n=xA(Yf),t=qn.transition,e=yt;try{if(qn.transition=null,yt=16>n?16:n,Pr===null)var i=!1;else{if(n=Pr,Pr=null,Yf=0,ct&6)throw Error(R(331));var s=ct;for(ct|=4,z=n.current;z!==null;){var r=z,o=r.child;if(z.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(z=u;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:su(8,h,r)}var d=h.child;if(d!==null)d.return=h,z=d;else for(;z!==null;){h=z;var f=h.sibling,p=h.return;if(FS(h),h===u){z=null;break}if(f!==null){f.return=p,z=f;break}z=p}}}var m=r.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}z=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,z=o;else t:for(;z!==null;){if(r=z,r.flags&2048)switch(r.tag){case 0:case 11:case 15:su(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,z=y;break t}z=r.return}}var w=n.current;for(z=w;z!==null;){o=z;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,z=E;else t:for(o=w;z!==null;){if(l=z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Mp(9,l)}}catch(C){$t(l,l.return,C)}if(l===o){z=null;break t}var b=l.sibling;if(b!==null){b.return=l.return,z=b;break t}z=l.return}}if(ct=s,Xr(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(bp,n)}catch{}i=!0}return i}finally{yt=e,qn.transition=t}}return!1}function Z0(n,t,e){t=pc(e,t),t=xS(n,t,1),n=Dr(n,t,1),t=Ve(),n!==null&&(rd(n,1,t),hn(n,t))}function $t(n,t,e){if(n.tag===3)Z0(n,n,e);else for(;t!==null;){if(t.tag===3){Z0(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Or===null||!Or.has(i))){n=pc(e,n),n=TS(t,n,1),t=Dr(t,n,1),n=Ve(),t!==null&&(rd(t,1,n),hn(t,n));break}}t=t.return}}function TC(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),t=Ve(),n.pingedLanes|=n.suspendedLanes&e,he===n&&(Ae&e)===e&&(ne===4||ne===3&&(Ae&130023424)===Ae&&500>Vt()-Sv?ha(n,0):Av|=e),hn(n,t)}function YS(n,t){t===0&&(n.mode&1?(t=Ad,Ad<<=1,!(Ad&130023424)&&(Ad=4194304)):t=1);var e=Ve();n=js(n,t),n!==null&&(rd(n,t,e),hn(n,e))}function kC(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),YS(n,e)}function PC(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(e=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(R(314))}i!==null&&i.delete(t),YS(n,e)}var XS;XS=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||cn.current)ln=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return ln=!1,mC(n,t,e);ln=!!(n.flags&131072)}else ln=!1,It&&t.flags&1048576&&JA(t,jf,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Gd(n,t),n=t.pendingProps;var s=uc(t,Oe.current);Za(t,e),s=pv(null,t,i,n,s,e);var r=gv();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,un(i)?(r=!0,Of(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,cv(t),s.updater=Ip,t.stateNode=s,s._reactInternals=t,am(t,i,n,e),t=um(null,t,i,!0,r,e)):(t.tag=0,It&&r&&nv(t),Ge(null,t,s,e),t=t.child),t;case 16:i=t.elementType;t:{switch(Gd(n,t),n=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=IC(i),n=ni(i,n),s){case 0:t=cm(null,t,i,n,e);break t;case 1:t=U0(null,t,i,n,e);break t;case 11:t=B0(null,t,i,n,e);break t;case 14:t=H0(null,t,i,ni(i.type,n),e);break t}throw Error(R(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ni(i,s),cm(n,t,i,s,e);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ni(i,s),U0(n,t,i,s,e);case 3:t:{if(IS(t),n===null)throw Error(R(387));i=t.pendingProps,r=t.memoizedState,s=r.element,sS(n,t),Bf(t,i,null,e);var o=t.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=pc(Error(R(423)),t),t=G0(n,t,i,e,s);break t}else if(i!==s){s=pc(Error(R(424)),t),t=G0(n,t,i,e,s);break t}else for(Rn=Nr(t.stateNode.containerInfo.firstChild),In=t,It=!0,yi=null,e=nS(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(hc(),i===s){t=zs(n,t,e);break t}Ge(n,t,i,e)}t=t.child}return t;case 5:return rS(t),n===null&&sm(t),i=t.type,s=t.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,Zg(i,s)?o=null:r!==null&&Zg(i,r)&&(t.flags|=32),RS(n,t),Ge(n,t,o,e),t.child;case 6:return n===null&&sm(t),null;case 13:return MS(n,t,e);case 4:return uv(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=dc(t,null,i,e):Ge(n,t,i,e),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ni(i,s),B0(n,t,i,s,e);case 7:return Ge(n,t,t.pendingProps,e),t.child;case 8:return Ge(n,t,t.pendingProps.children,e),t.child;case 12:return Ge(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,s=t.pendingProps,r=t.memoizedProps,o=s.value,_t(zf,i._currentValue),i._currentValue=o,r!==null)if(Si(r.value,o)){if(r.children===s.children&&!cn.current){t=zs(n,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(r.tag===1){c=Ls(-1,e&-e),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),rm(r.return,e,t),l.lanes|=e;break}c=c.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(R(341));o.lanes|=e,l=o.alternate,l!==null&&(l.lanes|=e),rm(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Ge(n,t,s.children,e),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Za(t,e),s=Qn(s),i=i(s),t.flags|=1,Ge(n,t,i,e),t.child;case 14:return i=t.type,s=ni(i,t.pendingProps),s=ni(i.type,s),H0(n,t,i,s,e);case 15:return kS(n,t,t.type,t.pendingProps,e);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ni(i,s),Gd(n,t),t.tag=1,un(i)?(n=!0,Of(t)):n=!1,Za(t,e),CS(t,i,s),am(t,i,s,e),um(null,t,i,!0,n,e);case 19:return LS(n,t,e);case 22:return PS(n,t,e)}throw Error(R(156,t.tag))};function qS(n,t){return EA(n,t)}function RC(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(n,t,e,i){return new RC(n,t,e,i)}function Cv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function IC(n){if(typeof n=="function")return Cv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Gy)return 11;if(n===Vy)return 14}return 2}function jr(n,t){var e=n.alternate;return e===null?(e=Xn(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function Yd(n,t,e,i,s,r){var o=2;if(i=n,typeof n=="function")Cv(n)&&(o=1);else if(typeof n=="string")o=5;else t:switch(n){case Oa:return da(e.children,s,r,t);case Uy:o=8,s|=8;break;case Ig:return n=Xn(12,e,t,s|2),n.elementType=Ig,n.lanes=r,n;case Mg:return n=Xn(13,e,t,s),n.elementType=Mg,n.lanes=r,n;case Lg:return n=Xn(19,e,t,s),n.elementType=Lg,n.lanes=r,n;case rA:return Np(e,s,r,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case iA:o=10;break t;case sA:o=9;break t;case Gy:o=11;break t;case Vy:o=14;break t;case Ws:o=16,i=null;break t}throw Error(R(130,n==null?n:typeof n,""))}return t=Xn(o,e,t,s),t.elementType=n,t.type=i,t.lanes=r,t}function da(n,t,e,i){return n=Xn(7,n,i,t),n.lanes=e,n}function Np(n,t,e,i){return n=Xn(22,n,i,t),n.elementType=rA,n.lanes=e,n.stateNode={isHidden:!1},n}function Ag(n,t,e){return n=Xn(6,n,null,t),n.lanes=e,n}function Sg(n,t,e){return t=Xn(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function MC(n,t,e,i,s){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eg(0),this.expirationTimes=eg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eg(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xv(n,t,e,i,s,r,o,l,c){return n=new MC(n,t,e,l,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Xn(3,null,null,t),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},cv(r),n}function LC(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Da,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}function KS(n){if(!n)return Hr;n=n._reactInternals;t:{if(ba(n)!==n||n.tag!==1)throw Error(R(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(un(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(R(171))}if(n.tag===1){var e=n.type;if(un(e))return KA(n,e,t)}return t}function QS(n,t,e,i,s,r,o,l,c){return n=xv(e,i,!0,n,s,r,o,l,c),n.context=KS(null),e=n.current,i=Ve(),s=Fr(e),r=Ls(i,s),r.callback=t??null,Dr(e,r,s),n.current.lanes=s,rd(n,s,i),hn(n,i),n}function Dp(n,t,e,i){var s=t.current,r=Ve(),o=Fr(s);return e=KS(e),t.context===null?t.context=e:t.pendingContext=e,t=Ls(r,o),t.payload={element:n},i=i===void 0?null:i,i!==null&&(t.callback=i),n=Dr(s,t,o),n!==null&&(Ai(n,s,o,r),Bd(n,s,o)),o}function qf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function tw(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function Tv(n,t){tw(n,t),(n=n.alternate)&&tw(n,t)}function NC(){return null}var JS=typeof reportError=="function"?reportError:function(n){console.error(n)};function kv(n){this._internalRoot=n}Op.prototype.render=kv.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(R(409));Dp(n,t,null,null)};Op.prototype.unmount=kv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;ya(function(){Dp(null,n,null,null)}),t[Fs]=null}};function Op(n){this._internalRoot=n}Op.prototype.unstable_scheduleHydration=function(n){if(n){var t=PA();n={blockedOn:null,target:n,priority:t};for(var e=0;e<qs.length&&t!==0&&t<qs[e].priority;e++);qs.splice(e,0,n),e===0&&IA(n)}};function Pv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ew(){}function DC(n,t,e,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=qf(o);r.call(u)}}var o=QS(t,i,n,0,null,!1,!1,"",ew);return n._reactRootContainer=o,n[Fs]=o.current,wu(n.nodeType===8?n.parentNode:n),ya(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var u=qf(c);l.call(u)}}var c=xv(n,0,!1,null,null,!1,!1,"",ew);return n._reactRootContainer=c,n[Fs]=c.current,wu(n.nodeType===8?n.parentNode:n),ya(function(){Dp(t,c,e,i)}),c}function jp(n,t,e,i,s){var r=e._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var l=s;s=function(){var c=qf(o);l.call(c)}}Dp(t,o,n,s)}else o=DC(e,t,n,s,i);return qf(o)}TA=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=Nc(t.pendingLanes);e!==0&&(Xy(t,e|1),hn(t,Vt()),!(ct&6)&&(gc=Vt()+500,Xr()))}break;case 13:ya(function(){var i=js(n,1);if(i!==null){var s=Ve();Ai(i,n,1,s)}}),Tv(n,1)}};qy=function(n){if(n.tag===13){var t=js(n,134217728);if(t!==null){var e=Ve();Ai(t,n,134217728,e)}Tv(n,134217728)}};kA=function(n){if(n.tag===13){var t=Fr(n),e=js(n,t);if(e!==null){var i=Ve();Ai(e,n,t,i)}Tv(n,t)}};PA=function(){return yt};RA=function(n,t){var e=yt;try{return yt=n,t()}finally{yt=e}};Ug=function(n,t,e){switch(t){case"input":if(Og(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var s=kp(i);if(!s)throw Error(R(90));aA(i),Og(i,s)}}}break;case"textarea":cA(n,e);break;case"select":t=e.value,t!=null&&qa(n,!!e.multiple,t,!1)}};mA=Ev;yA=ya;var OC={usingClientEntryPoint:!1,Events:[ad,$a,kp,pA,gA,Ev]},xc={findFiberByHostInstance:io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FC={bundleType:xc.bundleType,version:xc.version,rendererPackageName:xc.rendererPackageName,rendererConfig:xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=AA(n),n===null?null:n.stateNode},findFiberByHostInstance:xc.findFiberByHostInstance||NC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{bp=Id.inject(FC),Xi=Id}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OC;Nn.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pv(t))throw Error(R(200));return LC(n,t,null,e)};Nn.createRoot=function(n,t){if(!Pv(n))throw Error(R(299));var e=!1,i="",s=JS;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=xv(n,1,!1,null,null,e,!1,i,s),n[Fs]=t.current,wu(n.nodeType===8?n.parentNode:n),new kv(t)};Nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(R(188)):(n=Object.keys(n).join(","),Error(R(268,n)));return n=AA(t),n=n===null?null:n.stateNode,n};Nn.flushSync=function(n){return ya(n)};Nn.hydrate=function(n,t,e){if(!Fp(t))throw Error(R(200));return jp(null,n,t,!0,e)};Nn.hydrateRoot=function(n,t,e){if(!Pv(n))throw Error(R(405));var i=e!=null&&e.hydratedSources||null,s=!1,r="",o=JS;if(e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=QS(t,null,n,1,e??null,s,!1,r,o),n[Fs]=t.current,wu(n),i)for(n=0;n<i.length;n++)e=i[n],s=e._getVersion,s=s(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,s]:t.mutableSourceEagerHydrationData.push(e,s);return new Op(t)};Nn.render=function(n,t,e){if(!Fp(t))throw Error(R(200));return jp(null,n,t,!1,e)};Nn.unmountComponentAtNode=function(n){if(!Fp(n))throw Error(R(40));return n._reactRootContainer?(ya(function(){jp(null,null,n,!1,function(){n._reactRootContainer=null,n[Fs]=null})}),!0):!1};Nn.unstable_batchedUpdates=Ev;Nn.unstable_renderSubtreeIntoContainer=function(n,t,e,i){if(!Fp(e))throw Error(R(200));if(n==null||n._reactInternals===void 0)throw Error(R(38));return jp(n,t,e,!1,i)};Nn.version="18.3.1-next-f1338f8080-20240426";function ZS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZS)}catch(n){console.error(n)}}ZS(),Zw.exports=Nn;var jC=Zw.exports,tE,nw=jC;tE=nw.createRoot,nw.hydrateRoot;function zC({themePreference:n,actualTheme:t,onToggle:e}){const i=()=>n==="system"?{emoji:"",title:`Auto (${t})`}:n==="light"?{emoji:"",title:"Switch to dark"}:{emoji:"",title:"Switch to system"},{emoji:s,title:r}=i();return k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontWeight:"bold",letterSpacing:"0.1em",fontSize:"0.875rem"},children:[k.jsx("span",{children:"[ MODE ]"}),k.jsx("button",{onClick:e,title:r,"aria-label":r,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",padding:0,transition:"transform 0.2s"},onMouseEnter:o=>o.currentTarget.style.transform="scale(1.1)",onMouseLeave:o=>o.currentTarget.style.transform="scale(1)",children:s})]})}function $C({existingKey:n,onSave:t,onRemove:e,theme:i}){const[s,r]=lt.useState(!n),[o,l]=lt.useState(""),c=()=>{o.trim()&&(t(o.trim()),l(""),r(!1))},u=()=>{r(!0),e()},h=i==="dark"?"#e0e0e0":"#2a2a2a",d=i==="dark"?"#2a2a2a":"#fefdfb",f=i==="dark"?"#e0e0e0":"#2a2a2a";return n&&!s?k.jsx("div",{style:{padding:"1.5rem",border:`2px solid ${h}`,background:d,boxShadow:`4px 4px 0px ${h}`,marginBottom:"1.5rem"},children:k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[k.jsxs("div",{children:[k.jsx("div",{style:{fontSize:"0.875rem",opacity:.7,marginBottom:"0.5rem",color:f},children:"[ GEMINI API KEY SAVED ]"}),k.jsxs("div",{style:{fontFamily:"Courier New, monospace",fontSize:"0.875rem",color:f},children:[n.slice(0,8),"...",n.slice(-4)]})]}),k.jsx("button",{onClick:u,style:{padding:"0.5rem 1rem",background:"none",border:`2px solid ${h}`,color:f,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:"pointer",letterSpacing:"0.05em",fontSize:"0.75rem"},children:"[ CHANGE KEY ]"})]})}):k.jsxs("div",{style:{padding:"1.5rem",border:`2px solid ${h}`,background:d,boxShadow:`4px 4px 0px ${h}`,marginBottom:"1.5rem"},children:[k.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"bold",marginBottom:"1rem",letterSpacing:"0.1em",color:f},children:"[ ENTER GEMINI API KEY ]"}),k.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[k.jsx("input",{type:"text",value:o,onChange:p=>l(p.target.value),placeholder:"AIza...",style:{flex:1,padding:"0.75rem",border:`2px solid ${h}`,background:i==="dark"?"#1a1a1a":"#fff",color:f,fontFamily:"Courier New, monospace",fontSize:"0.875rem"},onKeyPress:p=>p.key==="Enter"&&c()}),k.jsx("button",{onClick:c,disabled:!o.trim(),style:{padding:"0.75rem 1.5rem",background:"none",border:`2px solid ${h}`,color:f,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:o.trim()?"pointer":"not-allowed",letterSpacing:"0.05em",fontSize:"0.875rem",opacity:o.trim()?1:.5},children:"[ SAVE ]"})]}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.6,marginTop:"0.5rem",color:f},children:"Get your API key from: https://aistudio.google.com/apikey"})]})}function BC({existingTemplateId:n,onSave:t,onRemove:e,theme:i}){const[s,r]=lt.useState(!n),[o,l]=lt.useState(""),c=m=>{const v=m.trim(),_=v.match(/\/presentation\/d\/([a-zA-Z0-9-_]+)/);return _?_[1]:v.length>0?v:null},u=()=>{const m=c(o);m&&(t(m),l(""),r(!1))},h=()=>{r(!0),e()},d=i==="dark"?"#e0e0e0":"#2a2a2a",f=i==="dark"?"#2a2a2a":"#fefdfb",p=i==="dark"?"#e0e0e0":"#2a2a2a";return n&&!s?k.jsx("div",{style:{padding:"1.5rem",border:`2px solid ${d}`,background:f,boxShadow:`4px 4px 0px ${d}`,marginBottom:"1.5rem"},children:k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[k.jsxs("div",{children:[k.jsx("div",{style:{fontSize:"0.875rem",opacity:.7,marginBottom:"0.5rem",color:p},children:"[ TEMPLATE SAVED ]"}),k.jsxs("div",{style:{fontFamily:"Courier New, monospace",fontSize:"0.875rem",color:p},children:[n.slice(0,12),"..."]})]}),k.jsx("button",{onClick:h,style:{padding:"0.5rem 1rem",background:"none",border:`2px solid ${d}`,color:p,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:"pointer",letterSpacing:"0.05em",fontSize:"0.75rem"},children:"[ CHANGE TEMPLATE ]"})]})}):k.jsxs("div",{style:{padding:"1.5rem",border:`2px solid ${d}`,background:f,boxShadow:`4px 4px 0px ${d}`,marginBottom:"1.5rem"},children:[k.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"bold",marginBottom:"1rem",letterSpacing:"0.1em",color:p},children:"[ ENTER TEMPLATE PRESENTATION URL ]"}),k.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[k.jsx("input",{type:"text",value:o,onChange:m=>l(m.target.value),placeholder:"https://docs.google.com/presentation/d/...",style:{flex:1,padding:"0.75rem",border:`2px solid ${d}`,background:i==="dark"?"#1a1a1a":"#fff",color:p,fontFamily:"Courier New, monospace",fontSize:"0.875rem"},onKeyPress:m=>m.key==="Enter"&&u()}),k.jsx("button",{onClick:u,disabled:!o.trim(),style:{padding:"0.75rem 1.5rem",background:"none",border:`2px solid ${d}`,color:p,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:o.trim()?"pointer":"not-allowed",letterSpacing:"0.05em",fontSize:"0.875rem",opacity:o.trim()?1:.5},children:"[ SAVE ]"})]}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.6,marginTop:"0.5rem",color:p},children:"First, make a copy of the master template (File  Make a Copy). Then paste YOUR copy's URL here. Slide 1 stays as-is, Slide 2 is used as the candidate template."})]})}function HC({mode:n,onModeChange:t,theme:e}){return k.jsxs("div",{className:`parse-mode-selector ${e}-mode`,children:[k.jsx("label",{className:"mode-label",children:"[ PARSE MODE ]"}),k.jsxs("div",{className:"mode-buttons",children:[k.jsx("button",{className:`mode-button ${n==="longlist"?"active":""}`,onClick:()=>t("longlist"),children:"[ LONGLIST ]"}),k.jsx("button",{className:`mode-button ${n==="individual"?"active":""}`,onClick:()=>t("individual"),children:"[ INDIVIDUAL CVs ]"})]}),k.jsx("div",{className:"mode-description",children:n==="longlist"?'[ Splits multi-CV PDFs using "Page 1 of" detection ]':"[ Each PDF file = 1 candidate (no splitting) ]"})]})}function UC({tier:n,onTierChange:t,theme:e}){return k.jsxs("div",{className:`parse-mode-selector ${e}-mode`,children:[k.jsx("label",{className:"mode-label",children:"[  API TIER ]"}),k.jsxs("div",{className:"mode-buttons",children:[k.jsx("button",{className:`mode-button ${n==="free"?"active":""}`,onClick:()=>t("free"),children:"[ FREE ]"}),k.jsx("button",{className:`mode-button ${n==="paid"?"active":""}`,onClick:()=>t("paid"),children:"[ PAID ]"})]}),k.jsx("div",{className:"mode-description",children:n==="free"?"[ 10 requests/min - 6s delays between requests ]":"[ 600 requests/min - 100ms delays (60x faster!) ]"})]})}function GC({onFileSelect:n,theme:t,disabled:e=!1,parseMode:i}){const[s,r]=lt.useState(!1),[o,l]=lt.useState([]),c=i==="individual",u=_=>{_.preventDefault(),e||r(!0)},h=()=>{r(!1)},d=_=>{if(_.preventDefault(),r(!1),e)return;const w=Array.from(_.dataTransfer.files).filter(E=>E.type==="application/pdf");if(w.length>0){const E=c?w:[w[0]];l(E),n(E)}else alert("Please upload PDF files")},f=_=>{const y=_.target.files;if(y&&y.length>0){const E=Array.from(y).filter(b=>b.type==="application/pdf");if(E.length>0){const b=c?E:[E[0]];l(b),n(b)}else alert("Please upload PDF files")}},p=t==="dark"?"#e0e0e0":"#2a2a2a",m=t==="dark"?"#2a2a2a":"#fefdfb",v=t==="dark"?"#e0e0e0":"#2a2a2a";return k.jsxs("div",{style:{padding:"1.5rem",border:`2px solid ${p}`,background:m,boxShadow:`4px 4px 0px ${p}`,marginBottom:"1.5rem",opacity:e?.6:1},children:[k.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"bold",marginBottom:"1rem",letterSpacing:"0.1em",color:v},children:"[ UPLOAD CV PDF ]"}),k.jsxs("div",{onDragOver:u,onDragLeave:h,onDrop:d,style:{border:`2px dashed ${p}`,padding:"3rem 2rem",textAlign:"center",cursor:e?"not-allowed":"pointer",background:s?t==="dark"?"#333":"#f0f0f0":"transparent",transition:"background 0.2s",position:"relative"},children:[k.jsx("input",{type:"file",accept:".pdf",multiple:c,onChange:f,disabled:e,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:e?"not-allowed":"pointer"}}),k.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem",pointerEvents:"none"},children:""}),o.length>0?k.jsxs(k.Fragment,{children:[k.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem",color:v,pointerEvents:"none"},children:o.length===1?` ${o[0].name}`:` ${o.length} files selected`}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.7,color:v,pointerEvents:"none"},children:o.length===1?`${(o[0].size/1024/1024).toFixed(2)} MB`:`${o.map(_=>_.name).join(", ")}`})]}):k.jsxs(k.Fragment,{children:[k.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem",color:v,pointerEvents:"none"},children:c?"Drag & drop PDF files here":"Drag & drop PDF file here"}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.7,color:v,pointerEvents:"none"},children:"or click to browse"})]})]}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.6,marginTop:"0.5rem",color:v},children:c?"Upload one or more PDF files (Individual mode)":"Upload one PDF file (Longlist mode)"})]})}function VC({status:n,current:t,total:e,theme:i}){if(n==="idle")return null;const s=i==="dark"?"#e0e0e0":"#2a2a2a",r=i==="dark"?"#2a2a2a":"#fefdfb",o=i==="dark"?"#e0e0e0":"#2a2a2a",l=()=>{switch(n){case"parsing":return"[ PARSING PDF... ]";case"extracting":return`[ EXTRACTING CV ${t} / ${e}... ]`;case"generating":return"[ GENERATING SLIDES... ]";case"done":return"[  COMPLETE ]";case"error":return"[  ERROR ]";default:return"[ PROCESSING... ]"}},c=()=>{if(n==="extracting"&&e>0){const u=t/e*100;return k.jsx("div",{style:{width:"100%",height:"4px",background:i==="dark"?"#1a1a1a":"#ddd",marginTop:"1rem",position:"relative"},children:k.jsx("div",{style:{width:`${u}%`,height:"100%",background:s,transition:"width 0.3s"}})})}return null};return k.jsxs("div",{style:{padding:"1.5rem",border:`2px solid ${s}`,background:r,boxShadow:`4px 4px 0px ${s}`,marginBottom:"1.5rem",textAlign:"center"},children:[k.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"bold",letterSpacing:"0.1em",color:o},children:l()}),c()]})}function WC({isAuthenticated:n,userEmail:t,onSignIn:e,onSignOut:i,theme:s}){const r=s==="dark"?"#e0e0e0":"#2a2a2a",o=s==="dark"?"#2a2a2a":"#fefdfb",l=s==="dark"?"#e0e0e0":"#2a2a2a";return n&&t?k.jsx("div",{style:{padding:"1.5rem",border:`2px solid ${r}`,background:o,boxShadow:`4px 4px 0px ${r}`,marginBottom:"1.5rem"},children:k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[k.jsxs("div",{children:[k.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"bold",marginBottom:"0.5rem",letterSpacing:"0.1em",color:l},children:"[  GOOGLE AUTHENTICATED ]"}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.7,color:l},children:t})]}),k.jsx("button",{onClick:i,style:{padding:"0.5rem 1rem",background:"none",border:`2px solid ${r}`,color:l,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:"pointer",letterSpacing:"0.05em",fontSize:"0.75rem"},children:"[ SIGN OUT ]"})]})}):k.jsxs("div",{style:{padding:"1.5rem",border:`2px solid ${r}`,background:o,boxShadow:`4px 4px 0px ${r}`,marginBottom:"1.5rem",textAlign:"center"},children:[k.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"bold",marginBottom:"1rem",letterSpacing:"0.1em",color:l},children:"[ GOOGLE SIGN-IN REQUIRED ]"}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.7,marginBottom:"1rem",color:l},children:"Sign in to create Google Slides presentations"}),k.jsx("button",{onClick:e,style:{padding:"1rem 2rem",background:"none",border:`2px solid ${r}`,color:l,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:"pointer",letterSpacing:"0.1em",fontSize:"1rem"},children:"[  SIGN IN WITH GOOGLE ]"}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.6,marginTop:"0.5rem",color:l},children:"Grants access to Google Slides & Drive"})]})}function YC({candidates:n,theme:t}){const[e,i]=lt.useState(!1),s=t==="dark"?"#e0e0e0":"#2a2a2a",r=t==="dark"?"#2a2a2a":"#fefdfb",o=t==="dark"?"#e0e0e0":"#2a2a2a",l=d=>{const f=[];return f.push(d.name),f.push(""),d.workHistory.length>0&&(d.workHistory.forEach(p=>{const m=p.dates?` (${p.dates})`:"";f.push(` ${p.jobTitle}  ${p.company}${m}`)}),f.push("")),d.education.length>0&&d.education.forEach(p=>{f.push(p.institution);const m=p.dates?` (${p.dates})`:"";f.push(` ${p.degree}${m}`),f.push("")}),f.join(`
`)},u=n.map((d,f)=>{const p=l(d);return f<n.length-1?p+`


`:p}).join(""),h=async()=>{try{await navigator.clipboard.writeText(u),i(!0),setTimeout(()=>i(!1),2e3)}catch(d){console.error("Failed to copy to clipboard:",d),alert("Failed to copy to clipboard")}};return k.jsxs("div",{style:{padding:"1.5rem",border:`2px solid ${s}`,background:r,boxShadow:`4px 4px 0px ${s}`,marginBottom:"1.5rem"},children:[k.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"bold",marginBottom:"1rem",letterSpacing:"0.1em",color:o},children:["[  MANUAL COPY - ",n.length," CANDIDATES ]"]}),k.jsx("textarea",{readOnly:!0,value:u,style:{width:"100%",minHeight:"400px",padding:"1rem",fontFamily:"Courier New, monospace",fontSize:"0.875rem",border:`1px solid ${s}`,background:t==="dark"?"#1a1a1a":"#fff",color:o,resize:"vertical",lineHeight:"1.5"}}),k.jsx("button",{onClick:h,style:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"none",border:`2px solid ${s}`,color:o,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:"pointer",letterSpacing:"0.1em",fontSize:"0.875rem"},children:e?"[  COPIED! ]":"[  COPY TO CLIPBOARD ]"}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.6,marginTop:"0.5rem",color:o},children:"Copy this text to manually paste into your presentation or document"})]})}const je={GEMINI_API_KEY:"gemini_api_key",TEMPLATE_ID:"template_id",THEME:"theme",SELECTED_MODEL:"selected_model",PARSE_MODE:"ll2pp_parse_mode",API_TIER:"ll2pp_api_tier"};class Je{static saveGeminiKey(t){localStorage.setItem(je.GEMINI_API_KEY,t)}static getGeminiKey(){return localStorage.getItem(je.GEMINI_API_KEY)}static removeGeminiKey(){localStorage.removeItem(je.GEMINI_API_KEY)}static saveTemplateId(t){localStorage.setItem(je.TEMPLATE_ID,t)}static getTemplateId(){return localStorage.getItem(je.TEMPLATE_ID)}static removeTemplateId(){localStorage.removeItem(je.TEMPLATE_ID)}static saveTheme(t){localStorage.setItem(je.THEME,t)}static getTheme(){const t=localStorage.getItem(je.THEME);return t==="system"||t==="light"||t==="dark"?t:"system"}static getActualTheme(){const t=this.getTheme();return t==="system"?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark":t}static saveSelectedModel(t){localStorage.setItem(je.SELECTED_MODEL,t)}static getSelectedModel(){return localStorage.getItem(je.SELECTED_MODEL)||"gemini-2.5-flash"}static saveParseMode(t){localStorage.setItem(je.PARSE_MODE,t)}static getParseMode(){const t=localStorage.getItem(je.PARSE_MODE);return t==="individual"||t==="longlist"?t:"longlist"}static saveApiTier(t){localStorage.setItem(je.API_TIER,t)}static getApiTier(){const t=localStorage.getItem(je.API_TIER);return t==="free"||t==="paid"?t:"free"}static clearAll(){Object.values(je).forEach(t=>{localStorage.removeItem(t)})}}var au={};au.d=(n,t)=>{for(var e in t)au.o(t,e)&&!au.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};au.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var q=globalThis.pdfjsLib={};au.d(q,{AbortException:()=>Ur,AnnotationEditorLayer:()=>Ry,AnnotationEditorParamsType:()=>at,AnnotationEditorType:()=>Q,AnnotationEditorUIManager:()=>wa,AnnotationLayer:()=>HT,AnnotationMode:()=>Qs,ColorPicker:()=>ep,DOMSVGFactory:()=>jv,DrawLayer:()=>Ly,FeatureTest:()=>We,GlobalWorkerOptions:()=>Rs,ImageKind:()=>Xd,InvalidPDFException:()=>_m,MissingPDFException:()=>ku,OPS:()=>ii,OutputScale:()=>Cm,PDFDataRangeTransport:()=>n_,PDFDateString:()=>Nv,PDFWorker:()=>nl,PasswordResponses:()=>QC,PermissionFlag:()=>KC,PixelsPerInch:()=>Gr,RenderingCancelledException:()=>Mv,TextLayer:()=>Pu,TouchManager:()=>Zf,UnexpectedResponseException:()=>Kf,Util:()=>V,VerbosityLevel:()=>zp,XfaLayer:()=>s_,build:()=>ET,createValidAbsoluteUrl:()=>ex,fetchData:()=>Up,getDocument:()=>fT,getFilenameFromUrl:()=>ux,getPdfFilenameFromUrl:()=>hx,getXfaPageViewport:()=>dx,isDataScheme:()=>Gp,isPdfFile:()=>Lv,noContextMenu:()=>Ei,normalizeUnicode:()=>ax,setLayerDimensions:()=>va,shadow:()=>it,stopEvent:()=>Pn,version:()=>ST});const Ne=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),eE=[1,0,0,1,0,0],Em=[.001,0,0,.001,0,0],XC=1e7,Eg=1.35,xn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Qs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},qC="pdfjs_internal_editor_",Q={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},at={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},KC={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ce={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Xd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Qt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Tc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},zp={ERRORS:0,WARNINGS:1,INFOS:5},ii={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},QC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let $p=zp.WARNINGS;function JC(n){Number.isInteger(n)&&($p=n)}function ZC(){return $p}function Bp(n){$p>=zp.INFOS&&console.log(`Info: ${n}`)}function J(n){$p>=zp.WARNINGS&&console.log(`Warning: ${n}`)}function At(n){throw new Error(n)}function qt(n,t){n||At(t)}function tx(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ex(n,t=null,e=null){if(!n)return null;try{if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=ox(n)}catch{}}const i=t?new URL(n,t):new URL(n);if(tx(i))return i}catch{}return null}function it(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const qr=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class iw extends qr{constructor(t,e){super(t,"PasswordException"),this.code=e}}class _g extends qr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class _m extends qr{constructor(t){super(t,"InvalidPDFException")}}class ku extends qr{constructor(t){super(t,"MissingPDFException")}}class Kf extends qr{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class nx extends qr{constructor(t){super(t,"FormatError")}}class Ur extends qr{constructor(t){super(t,"AbortException")}}function nE(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&At("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Hp(n){typeof n!="string"&&At("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function ix(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Rv(n){const t=Object.create(null);for(const[e,i]of n)t[e]=i;return t}function sx(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function rx(){try{return new Function(""),!0}catch{return!1}}class We{static get isLittleEndian(){return it(this,"isLittleEndian",sx())}static get isEvalSupported(){return it(this,"isEvalSupported",rx())}static get isOffscreenCanvasSupported(){return it(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return it(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?it(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):it(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return it(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const bg=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ns,qd,bm;class V{static makeHexColor(t,e,i){return`#${bg[t]}${bg[e]}${bg[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[i,s]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[s,r]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],s[0],r[0],o[0]),Math.min(i[1],s[1],r[1],o[1]),Math.max(i[0],s[0],r[0],o[0]),Math.max(i[1],s[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],l=(i+o)/2,c=Math.sqrt((i+o)**2-4*(i*o-r*s))/2,u=l+c||1,h=l-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[i,r,s,o]}static bezierBoundingBox(t,e,i,s,r,o,l,c,u){return u?(u[0]=Math.min(u[0],t,l),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,l),u[3]=Math.max(u[3],e,c)):u=[Math.min(t,l),Math.min(e,c),Math.max(t,l),Math.max(e,c)],S(this,Ns,bm).call(this,t,i,r,l,e,s,o,c,3*(-t+3*(i-r)+l),6*(t-2*i+r),3*(i-t),u),S(this,Ns,bm).call(this,t,i,r,l,e,s,o,c,3*(-e+3*(s-o)+c),6*(e-2*s+o),3*(s-e),u),u}}Ns=new WeakSet,qd=function(t,e,i,s,r,o,l,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,m=d*(d*(d*t+3*u*e)+3*f*i)+p*s,v=d*(d*(d*r+3*u*o)+3*f*l)+p*c;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],v),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],v)},bm=function(t,e,i,s,r,o,l,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&S(this,Ns,qd).call(this,t,e,i,s,r,o,l,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const m=Math.sqrt(p),v=2*u;S(this,Ns,qd).call(this,t,e,i,s,r,o,l,c,(-h+m)/v,f),S(this,Ns,qd).call(this,t,e,i,s,r,o,l,c,(-h-m)/v,f)},A(V,Ns);function ox(n){return decodeURIComponent(escape(n))}let Cg=null,sw=null;function ax(n){return Cg||(Cg=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,sw=new Map([["","t"]])),n.replaceAll(Cg,(t,e,i)=>e?e.normalize("NFKC"):sw.get(i))}function lx(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),nE(n)}const Iv="pdfjs_internal_id_";function cx(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(nE(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});const Ji="http://www.w3.org/2000/svg",eo=class eo{};B(eo,"CSS",96),B(eo,"PDF",72),B(eo,"PDF_TO_CSS_UNITS",eo.CSS/eo.PDF);let Gr=eo;async function Up(n,t="text"){if(Oc(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class cd{constructor({viewBox:t,userUnit:e,scale:i,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=o,i*=e;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,p=-p);let m,v,_,y;h===0?(m=Math.abs(u-t[1])*i+r,v=Math.abs(c-t[0])*i+o,_=(t[3]-t[1])*i,y=(t[2]-t[0])*i):(m=Math.abs(c-t[0])*i+r,v=Math.abs(u-t[1])*i+o,_=(t[2]-t[0])*i,y=(t[3]-t[1])*i),this.transform=[h*i,d*i,f*i,p*i,m-h*i*c-f*i*u,v-d*i*c-p*i*u],this.width=_,this.height=y}get rawDims(){const{userUnit:t,viewBox:e}=this,i=e.map(s=>s*t);return it(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new cd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){return V.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=V.applyTransform([t[0],t[1]],this.transform),i=V.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return V.applyInverseTransform([t,e],this.transform)}}class Mv extends qr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Gp(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function Lv(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function ux(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function hx(n,t="document.pdf"){if(typeof n!="string")return t;if(Gp(n))return J('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(n);let r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||t}class rw{constructor(){B(this,"started",Object.create(null));B(this,"times",[])}time(t){t in this.started&&J(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||J(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-s}ms
`);return t.join("")}}function Oc(n,t){try{const{protocol:e}=t?new URL(n,t):new URL(n);return e==="http:"||e==="https:"}catch{return!1}}function Ei(n){n.preventDefault()}function Pn(n){n.preventDefault(),n.stopPropagation()}var Lu;class Nv{static toDateObject(t){if(!t||typeof t!="string")return null;a(this,Lu)||g(this,Lu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Lu).exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,l+=d):u==="+"&&(o-=h,l-=d),new Date(Date.UTC(i,s,r,o,l,c))}}Lu=new WeakMap,A(Nv,Lu);function dx(n,{scale:t=1,rotation:e=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new cd({viewBox:r,userUnit:1,scale:t,rotation:e})}function Dv(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(J(`Not a valid color format: "${n}"`),[0,0,0])}function fx(n){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,Dv(i))}t.remove()}function Pt(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform();return[t,e,i,s,r,o]}function xi(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[t,e,i,s,r,o]}function va(n,t,e=!1,i=!0){if(t instanceof cd){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:o}=n,l=We.isCSSRoundSupported,c=`var(--scale-factor) * ${s}px`,u=`var(--scale-factor) * ${r}px`,h=l?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=l?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}i&&n.setAttribute("data-main-rotation",t.rotation)}class Cm{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Js,oo,si,ao,Nu,Du,sp,iE,Ye,sE,rE,Kd,oE,Tm;const ns=class ns{constructor(t){A(this,Ye);A(this,Js,null);A(this,oo,null);A(this,si);A(this,ao,null);A(this,Nu,null);g(this,si,t),a(ns,Du)||g(ns,Du,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=g(this,Js,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,si)._uiManager._signal;t.addEventListener("contextmenu",Ei,{signal:e}),t.addEventListener("pointerdown",S(ns,sp,iE),{signal:e});const i=g(this,ao,document.createElement("div"));i.className="buttons",t.append(i);const s=a(this,si).toolbarPosition;if(s){const{style:r}=t,o=a(this,si)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return S(this,Ye,oE).call(this),t}get div(){return a(this,Js)}hide(){var t;a(this,Js).classList.add("hidden"),(t=a(this,oo))==null||t.hideDropdown()}show(){var t;a(this,Js).classList.remove("hidden"),(t=a(this,Nu))==null||t.shown()}async addAltText(t){const e=await t.render();S(this,Ye,Kd).call(this,e),a(this,ao).prepend(e,a(this,Ye,Tm)),g(this,Nu,t)}addColorPicker(t){g(this,oo,t);const e=t.renderButton();S(this,Ye,Kd).call(this,e),a(this,ao).prepend(e,a(this,Ye,Tm))}remove(){var t;a(this,Js).remove(),(t=a(this,oo))==null||t.destroy(),g(this,oo,null)}};Js=new WeakMap,oo=new WeakMap,si=new WeakMap,ao=new WeakMap,Nu=new WeakMap,Du=new WeakMap,sp=new WeakSet,iE=function(t){t.stopPropagation()},Ye=new WeakSet,sE=function(t){a(this,si)._focusEventsAllowed=!1,Pn(t)},rE=function(t){a(this,si)._focusEventsAllowed=!0,Pn(t)},Kd=function(t){const e=a(this,si)._uiManager._signal;t.addEventListener("focusin",S(this,Ye,sE).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",S(this,Ye,rE).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ei,{signal:e})},oE=function(){const{editorType:t,_uiManager:e}=a(this,si),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",a(ns,Du)[t]),S(this,Ye,Kd).call(this,i),i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),a(this,ao).append(i)},Tm=function(){const t=document.createElement("div");return t.className="divider",t},A(ns,sp),A(ns,Du,null);let xm=ns;var Ou,lo,co,Vr,aE,lE,cE;class px{constructor(t){A(this,Vr);A(this,Ou,null);A(this,lo,null);A(this,co);g(this,co,t)}show(t,e,i){const[s,r]=S(this,Vr,lE).call(this,e,i),{style:o}=a(this,lo)||g(this,lo,S(this,Vr,aE).call(this));t.append(a(this,lo)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,lo).remove()}}Ou=new WeakMap,lo=new WeakMap,co=new WeakMap,Vr=new WeakSet,aE=function(){const t=g(this,lo,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ei,{signal:a(this,co)._signal});const e=g(this,Ou,document.createElement("div"));return e.className="buttons",t.append(e),S(this,Vr,cE).call(this),t},lE=function(t,e){let i=0,s=0;for(const r of t){const o=r.y+r.height;if(o<i)continue;const l=r.x+(e?r.width:0);if(o>i){s=l,i=o;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,i]},cE=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=a(this,co)._signal;t.addEventListener("contextmenu",Ei,{signal:i}),t.addEventListener("click",()=>{a(this,co).highlightSelection("floating_button")},{signal:i}),a(this,Ou).append(t)};function Qf(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}var rp;class gx{constructor(){A(this,rp,0)}get id(){return`${qC}${Fe(this,rp)._++}`}}rp=new WeakMap;var sl,Fu,ke,rl,Qd;const Bv=class Bv{constructor(){A(this,rl);A(this,sl,lx());A(this,Fu,0);A(this,ke,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return it(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:i,size:s,type:r}=t;return S(this,rl,Qd).call(this,`${e}_${i}_${s}_${r}`,t)}async getFromUrl(t){return S(this,rl,Qd).call(this,t,t)}async getFromBlob(t,e){const i=await e;return S(this,rl,Qd).call(this,t,i)}async getFromId(t){a(this,ke)||g(this,ke,new Map);const e=a(this,ke).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,ke)||g(this,ke,new Map);let i=a(this,ke).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${a(this,sl)}_${Fe(this,Fu)._++}`,refCounter:1,isSvg:!1},a(this,ke).set(t,i),a(this,ke).set(i.id,i),i}getSvgUrl(t){const e=a(this,ke).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;a(this,ke)||g(this,ke,new Map);const e=a(this,ke).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,sl)}_`)}};sl=new WeakMap,Fu=new WeakMap,ke=new WeakMap,rl=new WeakSet,Qd=async function(t,e){a(this,ke)||g(this,ke,new Map);let i=a(this,ke).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${a(this,sl)}_${Fe(this,Fu)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(i.url=e,s=await Up(e,"blob")):e instanceof File?s=i.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=Bv._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{i.bitmap=l,i.isSvg=!0,u()},o.onload=async()=>{const d=i.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=h});o.readAsDataURL(s),await c}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){J(s),i=null}return a(this,ke).set(t,i),i&&a(this,ke).set(i.id,i),i};let km=Bv;var Ut,Zs,ju,Mt;class mx{constructor(t=128){A(this,Ut,[]);A(this,Zs,!1);A(this,ju);A(this,Mt,-1);g(this,ju,t)}add({cmd:t,undo:e,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&t(),a(this,Zs))return;const c={cmd:t,undo:e,post:i,type:r};if(a(this,Mt)===-1){a(this,Ut).length>0&&(a(this,Ut).length=0),g(this,Mt,0),a(this,Ut).push(c);return}if(o&&a(this,Ut)[a(this,Mt)].type===r){l&&(c.undo=a(this,Ut)[a(this,Mt)].undo),a(this,Ut)[a(this,Mt)]=c;return}const u=a(this,Mt)+1;u===a(this,ju)?a(this,Ut).splice(0,1):(g(this,Mt,u),u<a(this,Ut).length&&a(this,Ut).splice(u)),a(this,Ut).push(c)}undo(){if(a(this,Mt)===-1)return;g(this,Zs,!0);const{undo:t,post:e}=a(this,Ut)[a(this,Mt)];t(),e==null||e(),g(this,Zs,!1),g(this,Mt,a(this,Mt)-1)}redo(){if(a(this,Mt)<a(this,Ut).length-1){g(this,Mt,a(this,Mt)+1),g(this,Zs,!0);const{cmd:t,post:e}=a(this,Ut)[a(this,Mt)];t(),e==null||e(),g(this,Zs,!1)}}hasSomethingToUndo(){return a(this,Mt)!==-1}hasSomethingToRedo(){return a(this,Mt)<a(this,Ut).length-1}cleanType(t){if(a(this,Mt)!==-1){for(let e=a(this,Mt);e>=0;e--)if(a(this,Ut)[e].type!==t){a(this,Ut).splice(e+1,a(this,Mt)-e),g(this,Mt,e);return}a(this,Ut).length=0,g(this,Mt,-1)}}destroy(){g(this,Ut,null)}}Ut=new WeakMap,Zs=new WeakMap,ju=new WeakMap,Mt=new WeakMap;var op,uE;class ud{constructor(t){A(this,op);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=We.platform;for(const[i,s,r={}]of t)for(const o of i){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(S(this,op,uE).call(this,e));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:l=null}}=i;l&&!l(t,e)||(s.bind(t,...o,e)(),r||Pn(e))}}op=new WeakSet,uE=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const ap=class ap{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return fx(t),it(this,"_colors",t)}convert(t){const e=Dv(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((r,o)=>r===e[o]))return ap._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?V.makeHexColor(...e):t}};B(ap,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Pm=ap;var ol,pn,Zt,fe,al,rs,ll,Fn,tr,uo,cl,ho,Ri,ri,fo,zu,$u,ul,Bu,Ii,er,hl,nr,Mi,lp,ir,Hu,sr,po,Uu,Gu,se,gt,os,go,Vu,Wu,rr,Li,as,Yu,jn,N,Jd,Rm,hE,dE,Zd,fE,pE,gE,Im,mE,Mm,Lm,yE,ze,Zi,vE,wE,Nm,AE,Fc,Dm;const Ya=class Ya{constructor(t,e,i,s,r,o,l,c,u,h,d,f,p){A(this,N);A(this,ol,new AbortController);A(this,pn,null);A(this,Zt,new Map);A(this,fe,new Map);A(this,al,null);A(this,rs,null);A(this,ll,null);A(this,Fn,new mx);A(this,tr,null);A(this,uo,null);A(this,cl,0);A(this,ho,new Set);A(this,Ri,null);A(this,ri,null);A(this,fo,new Set);B(this,"_editorUndoBar",null);A(this,zu,!1);A(this,$u,!1);A(this,ul,!1);A(this,Bu,null);A(this,Ii,null);A(this,er,null);A(this,hl,null);A(this,nr,!1);A(this,Mi,null);A(this,lp,new gx);A(this,ir,!1);A(this,Hu,!1);A(this,sr,null);A(this,po,null);A(this,Uu,null);A(this,Gu,null);A(this,se,Q.NONE);A(this,gt,new Set);A(this,os,null);A(this,go,null);A(this,Vu,null);A(this,Wu,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,rr,[0,0]);A(this,Li,null);A(this,as,null);A(this,Yu,null);A(this,jn,null);const m=this._signal=a(this,ol).signal;g(this,as,t),g(this,Yu,e),g(this,al,i),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:m}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),s._on("setpreference",this.onSetPreference.bind(this),{signal:m}),s._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:m}),S(this,N,fE).call(this),S(this,N,yE).call(this),S(this,N,Im).call(this),g(this,rs,r.annotationStorage),g(this,Bu,r.filterFactory),g(this,go,o),g(this,hl,l||null),g(this,zu,c),g(this,$u,u),g(this,ul,h),g(this,Gu,d||null),this.viewParameters={realScale:Gr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const t=Ya.prototype,e=o=>a(o,as).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return it(this,"_keyboardManager",new ud([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,as).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,as).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,i,s,r;(t=a(this,jn))==null||t.resolve(),g(this,jn,null),(e=a(this,ol))==null||e.abort(),g(this,ol,null),this._signal=null;for(const o of a(this,fe).values())o.destroy();a(this,fe).clear(),a(this,Zt).clear(),a(this,fo).clear(),g(this,pn,null),a(this,gt).clear(),a(this,Fn).destroy(),(i=a(this,al))==null||i.destroy(),(s=a(this,Mi))==null||s.hide(),g(this,Mi,null),a(this,Ii)&&(clearTimeout(a(this,Ii)),g(this,Ii,null)),a(this,Li)&&(clearTimeout(a(this,Li)),g(this,Li,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,Gu)}get useNewAltTextFlow(){return a(this,$u)}get useNewAltTextWhenAddingImage(){return a(this,ul)}get hcmFilter(){return it(this,"hcmFilter",a(this,go)?a(this,Bu).addHCMFilter(a(this,go).foreground,a(this,go).background):"none")}get direction(){return it(this,"direction",getComputedStyle(a(this,as)).direction)}get highlightColors(){return it(this,"highlightColors",a(this,hl)?new Map(a(this,hl).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return it(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),g(this,uo,t)}setMainHighlightColorPicker(t){g(this,Uu,t)}editAltText(t,e=!1){var i;(i=a(this,al))==null||i.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":g(this,ul,e);break}}onPageChanging({pageNumber:t}){g(this,cl,t-1)}focusMainContainer(){a(this,as).focus()}findParent(t,e){for(const i of a(this,fe).values()){const{x:s,y:r,width:o,height:l}=i.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=r&&e<=r+l)return i}return null}disableUserSelect(t=!1){a(this,Yu).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,fo).add(t)}removeShouldRescale(t){a(this,fo).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Gr.PDF_TO_CSS_UNITS;for(const i of a(this,fo))i.onScaleChanging();(e=a(this,uo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}=e,l=e.toString(),u=S(this,N,Jd).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;e.empty();const d=S(this,N,Rm).call(this,u),f=a(this,se)===Q.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Q.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&a(this,rs)&&!a(this,rs).has(t.id)&&a(this,rs).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,nr)&&(g(this,nr,!1),S(this,N,Zd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,gt))if(e.div.contains(t)){g(this,po,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,po))return;const[t,e]=a(this,po);g(this,po,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){S(this,N,Im).call(this),S(this,N,Mm).call(this)}removeEditListeners(){S(this,N,mE).call(this),S(this,N,Lm).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of a(this,ri))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of a(this,ri))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=a(this,pn))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of a(this,gt)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of a(this,ri))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){J(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of i){const u=await s.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)S(this,N,Nm).call(this,c);S(this,N,Dm).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){J(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,se)!==Q.NONE&&!this.isEditorHandlingKeyboard&&Ya._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,nr)&&(g(this,nr,!1),S(this,N,Zd).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(S(this,N,pE).call(this),S(this,N,Mm).call(this),S(this,N,ze).call(this,{isEditing:a(this,se)!==Q.NONE,isEmpty:S(this,N,Fc).call(this),hasSomethingToUndo:a(this,Fn).hasSomethingToUndo(),hasSomethingToRedo:a(this,Fn).hasSomethingToRedo(),hasSelectedEditor:!1})):(S(this,N,gE).call(this),S(this,N,Lm).call(this),S(this,N,ze).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,ri)){g(this,ri,t);for(const e of a(this,ri))S(this,N,Zi).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,lp).id}get currentLayer(){return a(this,fe).get(a(this,cl))}getLayer(t){return a(this,fe).get(t)}get currentPageIndex(){return a(this,cl)}addLayer(t){a(this,fe).set(t.pageIndex,t),a(this,ir)?t.enable():t.disable()}removeLayer(t){a(this,fe).delete(t.pageIndex)}async updateMode(t,e=null,i=!1){var s;if(a(this,se)!==t&&!(a(this,jn)&&(await a(this,jn).promise,!a(this,jn)))){if(g(this,jn,Promise.withResolvers()),g(this,se,t),t===Q.NONE){this.setEditingState(!1),S(this,N,wE).call(this),(s=this._editorUndoBar)==null||s.hide(),a(this,jn).resolve();return}this.setEditingState(!0),await S(this,N,vE).call(this),this.unselectAll();for(const r of a(this,fe).values())r.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),a(this,jn).resolve();return}for(const r of a(this,Zt).values())r.annotationElementId===e?(this.setSelected(r),r.enterInEditMode()):r.unselect();a(this,jn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==a(this,se)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(a(this,ri)){switch(t){case at.CREATE:this.currentLayer.addNewEditor();return;case at.HIGHLIGHT_DEFAULT_COLOR:(i=a(this,Uu))==null||i.updateColor(e);break;case at.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Vu)||g(this,Vu,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of a(this,gt))s.updateParams(t,e);for(const s of a(this,ri))s.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var r;for(const o of a(this,Zt).values())o.editorType===t&&o.show(e);(((r=a(this,Vu))==null?void 0:r.get(at.HIGHLIGHT_SHOW_ALL))??!0)!==e&&S(this,N,Zi).call(this,[[at.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Hu)!==t){g(this,Hu,t);for(const e of a(this,fe).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of a(this,Zt).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return a(this,Zt).get(t)}addEditor(t){a(this,Zt).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(a(this,Ii)&&clearTimeout(a(this,Ii)),g(this,Ii,setTimeout(()=>{this.focusMainContainer(),g(this,Ii,null)},0))),a(this,Zt).delete(t.id),this.unselect(t),(!t.annotationElementId||!a(this,ho).has(t.annotationElementId))&&((e=a(this,rs))==null||e.remove(t.id))}addDeletedAnnotationElement(t){a(this,ho).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,ho).has(t)}removeDeletedAnnotationElement(t){a(this,ho).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,pn)!==t&&(g(this,pn,t),t&&S(this,N,Zi).call(this,t.propertiesToUpdate))}updateUI(t){a(this,N,AE)===t&&S(this,N,Zi).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){S(this,N,Zi).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,gt).has(t)){a(this,gt).delete(t),t.unselect(),S(this,N,ze).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,gt).add(t),t.select(),S(this,N,Zi).call(this,t.propertiesToUpdate),S(this,N,ze).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=a(this,uo))==null||e.commitOrRemove();for(const i of a(this,gt))i!==t&&i.unselect();a(this,gt).clear(),a(this,gt).add(t),t.select(),S(this,N,Zi).call(this,t.propertiesToUpdate),S(this,N,ze).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,gt).has(t)}get firstSelectedEditor(){return a(this,gt).values().next().value}unselect(t){t.unselect(),a(this,gt).delete(t),S(this,N,ze).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,gt).size!==0}get isEnterHandled(){return a(this,gt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Fn).undo(),S(this,N,ze).call(this,{hasSomethingToUndo:a(this,Fn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:S(this,N,Fc).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Fn).redo(),S(this,N,ze).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Fn).hasSomethingToRedo(),isEmpty:S(this,N,Fc).call(this)})}addCommands(t){a(this,Fn).add(t),S(this,N,ze).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:S(this,N,Fc).call(this)})}cleanUndoStack(t){a(this,Fn).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,gt)],i=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},s=()=>{for(const o of e)S(this,N,Nm).call(this,o)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=a(this,pn))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,pn)||this.hasSelection}selectAll(){for(const t of a(this,gt))t.commit();S(this,N,Dm).call(this,a(this,Zt).values())}unselectAll(){var t;if(!(a(this,pn)&&(a(this,pn).commitOrRemove(),a(this,se)!==Q.NONE))&&!((t=a(this,uo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,gt))e.unselect();a(this,gt).clear(),S(this,N,ze).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,rr)[0]+=t,a(this,rr)[1]+=e;const[s,r]=a(this,rr),o=[...a(this,gt)],l=1e3;a(this,Li)&&clearTimeout(a(this,Li)),g(this,Li,setTimeout(()=>{g(this,Li,null),a(this,rr)[0]=a(this,rr)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,Zt).has(c.id)&&c.translateInPage(s,r)},undo:()=>{for(const c of o)a(this,Zt).has(c.id)&&c.translateInPage(-s,-r)},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),g(this,Ri,new Map);for(const t of a(this,gt))a(this,Ri).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Ri))return!1;this.disableUserSelect(!1);const t=a(this,Ri);g(this,Ri,null);let e=!1;for(const[{x:s,y:r,pageIndex:o},l]of t)l.newX=s,l.newY=r,l.newPageIndex=o,e||(e=s!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const i=(s,r,o,l)=>{if(a(this,Zt).has(s.id)){const c=a(this,fe).get(l);c?s._setParentAndPosition(c,r,o):(s.pageIndex=l,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:l}]of t)i(s,r,o,l)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:l}]of t)i(s,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Ri))for(const i of a(this,Ri).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,gt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,pn)===t}getActive(){return a(this,pn)}getMode(){return a(this,se)}get imageManager(){return it(this,"imageManager",new km)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,h,d,f)=>({x:(h-s)/o,y:1-(u+d-i)/r,width:f/o,height:d/r});break;case"180":l=(u,h,d,f)=>({x:1-(u+d-i)/r,y:1-(h+f-s)/o,width:d/r,height:f/o});break;case"270":l=(u,h,d,f)=>({x:1-(h+f-s)/o,y:(u-i)/r,width:f/o,height:d/r});break;default:l=(u,h,d,f)=>({x:(u-i)/r,y:(h-s)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:m,height:v}of d.getClientRects())m===0||v===0||c.push(l(f,p,m,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,ll)||g(this,ll,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,ll))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=a(this,ll))==null?void 0:s.get(t.data.id);if(!e)return;const i=a(this,rs).getRawValue(e);i&&(a(this,se)===Q.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};ol=new WeakMap,pn=new WeakMap,Zt=new WeakMap,fe=new WeakMap,al=new WeakMap,rs=new WeakMap,ll=new WeakMap,Fn=new WeakMap,tr=new WeakMap,uo=new WeakMap,cl=new WeakMap,ho=new WeakMap,Ri=new WeakMap,ri=new WeakMap,fo=new WeakMap,zu=new WeakMap,$u=new WeakMap,ul=new WeakMap,Bu=new WeakMap,Ii=new WeakMap,er=new WeakMap,hl=new WeakMap,nr=new WeakMap,Mi=new WeakMap,lp=new WeakMap,ir=new WeakMap,Hu=new WeakMap,sr=new WeakMap,po=new WeakMap,Uu=new WeakMap,Gu=new WeakMap,se=new WeakMap,gt=new WeakMap,os=new WeakMap,go=new WeakMap,Vu=new WeakMap,Wu=new WeakMap,rr=new WeakMap,Li=new WeakMap,as=new WeakMap,Yu=new WeakMap,jn=new WeakMap,N=new WeakSet,Jd=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Rm=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of a(this,fe).values())if(i.hasTextLayer(t))return i;return null},hE=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=S(this,N,Jd).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(a(this,Mi)||g(this,Mi,new px(this)),a(this,Mi).show(i,s,this.direction==="ltr"))},dE=function(){var r,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,os)&&((r=a(this,Mi))==null||r.hide(),g(this,os,null),S(this,N,ze).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,os))return;const s=S(this,N,Jd).call(this,t).closest(".textLayer");if(!s){a(this,os)&&((o=a(this,Mi))==null||o.hide(),g(this,os,null),S(this,N,ze).call(this,{hasSelectedText:!1}));return}if((l=a(this,Mi))==null||l.hide(),g(this,os,e),S(this,N,ze).call(this,{hasSelectedText:!0}),!(a(this,se)!==Q.HIGHLIGHT&&a(this,se)!==Q.NONE)&&(a(this,se)===Q.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),g(this,nr,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,se)===Q.HIGHLIGHT?S(this,N,Rm).call(this,s):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&S(this,N,Zd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},Zd=function(t=""){a(this,se)===Q.HIGHLIGHT?this.highlightSelection(t):a(this,zu)&&S(this,N,hE).call(this)},fE=function(){document.addEventListener("selectionchange",S(this,N,dE).bind(this),{signal:this._signal})},pE=function(){if(a(this,er))return;g(this,er,new AbortController);const t=this.combinedSignal(a(this,er));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},gE=function(){var t;(t=a(this,er))==null||t.abort(),g(this,er,null)},Im=function(){if(a(this,sr))return;g(this,sr,new AbortController);const t=this.combinedSignal(a(this,sr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},mE=function(){var t;(t=a(this,sr))==null||t.abort(),g(this,sr,null)},Mm=function(){if(a(this,tr))return;g(this,tr,new AbortController);const t=this.combinedSignal(a(this,tr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Lm=function(){var t;(t=a(this,tr))==null||t.abort(),g(this,tr,null)},yE=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},ze=function(t){Object.entries(t).some(([i,s])=>a(this,Wu)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Wu),t)}),a(this,se)===Q.HIGHLIGHT&&t.hasSelectedEditor===!1&&S(this,N,Zi).call(this,[[at.HIGHLIGHT_FREE,!0]]))},Zi=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},vE=async function(){if(!a(this,ir)){g(this,ir,!0);const t=[];for(const e of a(this,fe).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,Zt).values())e.enable()}},wE=function(){if(this.unselectAll(),a(this,ir)){g(this,ir,!1);for(const t of a(this,fe).values())t.disable();for(const t of a(this,Zt).values())t.disable()}},Nm=function(t){const e=a(this,fe).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},AE=function(){let t=null;for(t of a(this,gt));return t},Fc=function(){if(a(this,Zt).size===0)return!0;if(a(this,Zt).size===1)for(const t of a(this,Zt).values())return t.isEmpty();return!1},Dm=function(t){for(const e of a(this,gt))e.unselect();a(this,gt).clear();for(const e of t)e.isEmpty()||(a(this,gt).add(e),e.select());S(this,N,ze).call(this,{hasSelectedEditor:this.hasSelection})},B(Ya,"TRANSLATE_SMALL",1),B(Ya,"TRANSLATE_BIG",10);let wa=Ya;var re,Ni,oi,dl,Di,gn,fl,Oi,nn,ls,mo,Fi,or,vi,jc,tf;const $e=class $e{constructor(t){A(this,vi);A(this,re,null);A(this,Ni,!1);A(this,oi,null);A(this,dl,null);A(this,Di,null);A(this,gn,null);A(this,fl,!1);A(this,Oi,null);A(this,nn,null);A(this,ls,null);A(this,mo,null);A(this,Fi,!1);g(this,nn,t),g(this,Fi,t._uiManager.useNewAltTextFlow),a($e,or)||g($e,or,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){$e._l10n??($e._l10n=t)}async render(){const t=g(this,oi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=g(this,dl,document.createElement("span"));t.append(e),a(this,Fi)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a($e,or).missing),e.setAttribute("data-l10n-id",a($e,or)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=a(this,nn)._uiManager._signal;t.addEventListener("contextmenu",Ei,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),a(this,nn)._uiManager.editAltText(a(this,nn)),a(this,Fi)&&a(this,nn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,vi,jc)}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(g(this,fl,!0),s(r))},{signal:i}),await S(this,vi,tf).call(this),t}finish(){a(this,oi)&&(a(this,oi).focus({focusVisible:a(this,fl)}),g(this,fl,!1))}isEmpty(){return a(this,Fi)?a(this,re)===null:!a(this,re)&&!a(this,Ni)}hasData(){return a(this,Fi)?a(this,re)!==null||!!a(this,ls):this.isEmpty()}get guessedText(){return a(this,ls)}async setGuessedText(t){a(this,re)===null&&(g(this,ls,t),g(this,mo,await $e._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),S(this,vi,tf).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,Fi)||a(this,re)){(e=a(this,Oi))==null||e.remove(),g(this,Oi,null);return}if(!a(this,Oi)){const i=g(this,Oi,document.createElement("div"));i.className="noAltTextBadge",a(this,nn).div.append(i)}a(this,Oi).classList.toggle("hidden",!t)}serialize(t){let e=a(this,re);return!t&&a(this,ls)===e&&(e=a(this,mo)),{altText:e,decorative:a(this,Ni),guessedText:a(this,ls),textWithDisclaimer:a(this,mo)}}get data(){return{altText:a(this,re),decorative:a(this,Ni)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(g(this,ls,i),g(this,mo,s)),!(a(this,re)===t&&a(this,Ni)===e)&&(r||(g(this,re,t),g(this,Ni,e)),S(this,vi,tf).call(this))}toggle(t=!1){a(this,oi)&&(!t&&a(this,gn)&&(clearTimeout(a(this,gn)),g(this,gn,null)),a(this,oi).disabled=!t)}shown(){a(this,nn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,vi,jc)}})}destroy(){var t,e;(t=a(this,oi))==null||t.remove(),g(this,oi,null),g(this,dl,null),g(this,Di,null),(e=a(this,Oi))==null||e.remove(),g(this,Oi,null)}};re=new WeakMap,Ni=new WeakMap,oi=new WeakMap,dl=new WeakMap,Di=new WeakMap,gn=new WeakMap,fl=new WeakMap,Oi=new WeakMap,nn=new WeakMap,ls=new WeakMap,mo=new WeakMap,Fi=new WeakMap,or=new WeakMap,vi=new WeakSet,jc=function(){return a(this,re)&&"added"||a(this,re)===null&&this.guessedText&&"review"||"missing"},tf=async function(){var s,r,o;const t=a(this,oi);if(!t)return;if(a(this,Fi)){if(t.classList.toggle("done",!!a(this,re)),t.setAttribute("data-l10n-id",a($e,or)[a(this,vi,jc)]),(s=a(this,dl))==null||s.setAttribute("data-l10n-id",a($e,or)[`${a(this,vi,jc)}-label`]),!a(this,re)){(r=a(this,Di))==null||r.remove();return}}else{if(!a(this,re)&&!a(this,Ni)){t.classList.remove("done"),(o=a(this,Di))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,Di);if(!e){g(this,Di,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,nn).id}`;const l=100,c=a(this,nn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,gn)),g(this,gn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{g(this,gn,setTimeout(()=>{g(this,gn,null),a(this,Di).classList.add("show"),a(this,nn)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var u;a(this,gn)&&(clearTimeout(a(this,gn)),g(this,gn,null)),(u=a(this,Di))==null||u.classList.remove("show")},{signal:c})}a(this,Ni)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,re)),e.parentNode||t.append(e);const i=a(this,nn).getImageForAltText();i==null||i.setAttribute("aria-describedby",e.id)},A($e,or,null),B($e,"_l10n",null);let Jf=$e;var Xu,yo,qu,Ku,Qu,Ju,Zu,pl,cs,vo,ar,$s,SE,EE,Om;const Hv=class Hv{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){A(this,$s);A(this,Xu);A(this,yo,!1);A(this,qu,null);A(this,Ku);A(this,Qu);A(this,Ju);A(this,Zu);A(this,pl);A(this,cs,null);A(this,vo);A(this,ar,null);g(this,Xu,t),g(this,qu,i),g(this,Ku,e),g(this,Qu,s),g(this,Ju,r),g(this,Zu,o),g(this,vo,new AbortController),g(this,pl,AbortSignal.any([l,a(this,vo).signal])),t.addEventListener("touchstart",S(this,$s,SE).bind(this),{passive:!1,signal:a(this,pl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return it(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=a(this,vo))==null||t.abort(),g(this,vo,null)}};Xu=new WeakMap,yo=new WeakMap,qu=new WeakMap,Ku=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,pl=new WeakMap,cs=new WeakMap,vo=new WeakMap,ar=new WeakMap,$s=new WeakSet,SE=function(t){var s,r,o;if((s=a(this,Ku))!=null&&s.call(this)||t.touches.length<2)return;if(!a(this,ar)){g(this,ar,new AbortController);const l=AbortSignal.any([a(this,pl),a(this,ar).signal]),c=a(this,Xu),u={signal:l,passive:!1};c.addEventListener("touchmove",S(this,$s,EE).bind(this),u),c.addEventListener("touchend",S(this,$s,Om).bind(this),u),c.addEventListener("touchcancel",S(this,$s,Om).bind(this),u),(r=a(this,Qu))==null||r.call(this)}if(Pn(t),t.touches.length!==2||(o=a(this,qu))!=null&&o.call(this)){g(this,cs,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),g(this,cs,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},EE=function(t){var b;if(!a(this,cs)||t.touches.length!==2)return;let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:s,screenY:r}=e,{screenX:o,screenY:l}=i,c=a(this,cs),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,p=d-u,m=f-h,v=o-s,_=l-r,y=Math.hypot(v,_)||1,w=Math.hypot(p,m)||1;if(!a(this,yo)&&Math.abs(w-y)<=Hv.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,t.preventDefault(),!a(this,yo)){g(this,yo,!0);return}const E=[(s+o)/2,(r+l)/2];(b=a(this,Ju))==null||b.call(this,E,w,y)},Om=function(t){var e;a(this,ar).abort(),g(this,ar,null),(e=a(this,Zu))==null||e.call(this),a(this,cs)&&(t.preventDefault(),g(this,cs,null),g(this,yo,!1))};let Zf=Hv;var wo,ai,Ct,gl,lr,th,Ao,pe,So,us,cr,eh,Eo,mn,nh,_o,hs,ji,ml,yl,zn,bo,ih,cp,Y,Fm,sh,jm,ef,_E,bE,zm,nf,$m,CE,xE,TE,Bm,kE,Hm,PE,RE,IE,Um,zc;const Z=class Z{constructor(t){A(this,Y);A(this,wo,null);A(this,ai,null);A(this,Ct,null);A(this,gl,!1);A(this,lr,null);A(this,th,"");A(this,Ao,!1);A(this,pe,null);A(this,So,null);A(this,us,null);A(this,cr,null);A(this,eh,"");A(this,Eo,!1);A(this,mn,null);A(this,nh,!1);A(this,_o,!1);A(this,hs,!1);A(this,ji,null);A(this,ml,0);A(this,yl,0);A(this,zn,null);A(this,bo,null);B(this,"_editToolbar",null);B(this,"_initialOptions",Object.create(null));B(this,"_initialData",null);B(this,"_isVisible",!0);B(this,"_uiManager",null);B(this,"_focusEventsAllowed",!0);A(this,ih,!1);A(this,cp,Z._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Z.prototype._resizeWithKeyboard,e=wa.TRANSLATE_SMALL,i=wa.TRANSLATE_BIG;return it(this,"_resizerKeyboardManager",new ud([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Z.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return it(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new yx({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Z._l10n??(Z._l10n=t),Z._l10nResizer||(Z._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Z._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Z._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){At("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,ih)}set _isDraggable(t){var e;g(this,ih,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,cp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):S(this,Y,zc).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Eo)?g(this,Eo,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/r,this.y=(e+s)/o,this.fixAndSetPosition()}translate(t,e){S(this,Y,Fm).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,mn)||g(this,mn,[this.x,this.y,this.width,this.height]),S(this,Y,Fm).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){a(this,mn)||g(this,mn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[s,r]}=this;if(this.x+=t/s,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:h}=i;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,mn)&&(a(this,mn)[0]!==this.x||a(this,mn)[1]!==this.y)}get _hasBeenResized(){return!!a(this,mn)&&(a(this,mn)[2]!==this.width||a(this,mn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Z,s=i/t,r=i/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,s]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=i,c*=s,r*=i,o*=s,this._mustFixPosition)switch(t){case 0:r=Math.max(0,Math.min(i-l,r)),o=Math.max(0,Math.min(s-c,o));break;case 90:r=Math.max(0,Math.min(i-c,r)),o=Math.min(s,Math.max(l,o));break;case 180:r=Math.min(i,Math.max(l,r)),o=Math.min(s,Math.max(c,o));break;case 270:r=Math.min(i,Math.max(c,r)),o=Math.max(0,Math.min(s-l,o));break}this.x=r/=i,this.y=o/=s;const[u,h]=this.getBaseTranslation();r+=u,o+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return S(i=Z,sh,jm).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return S(i=Z,sh,jm).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,s]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/i).toFixed(2)}%`,a(this,Ao)||(r.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),r=!a(this,Ao)&&e.endsWith("%");if(s&&r)return;const[o,l]=this.parentDimensions;s||(t.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!a(this,Ao)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Ct))==null||t.finish()}async addEditToolbar(){return this._editToolbar||a(this,_o)?this._editToolbar:(this._editToolbar=new xm(this),this.div.append(this._editToolbar.render()),a(this,Ct)&&await this._editToolbar.addAltText(a(this,Ct)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,Ct))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,Ct)||(Jf.initialize(Z._l10n),g(this,Ct,new Jf(this)),a(this,wo)&&(a(this,Ct).data=a(this,wo),g(this,wo,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=a(this,Ct))==null?void 0:t.data}set altTextData(t){a(this,Ct)&&(a(this,Ct).data=t)}get guessedAltText(){var t;return(t=a(this,Ct))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Ct))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Ct))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Ct)&&!a(this,Ct).isEmpty()}hasAltTextData(){var t;return((t=a(this,Ct))==null?void 0:t.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=a(this,gl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),S(this,Y,Hm).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),Qf(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,bo)||g(this,bo,new Zf({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:S(this,Y,CE).bind(this),onPinching:S(this,Y,xE).bind(this),onPinchEnd:S(this,Y,TE).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(t){const{isMac:e}=We.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(g(this,Eo,!0),this._isDraggable){S(this,Y,kE).call(this,t);return}S(this,Y,Bm).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,ji)&&clearTimeout(a(this,ji)),g(this,ji,setTimeout(()=>{var t;g(this,ji,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=t/s,h=e/s,d=this.x*r,f=this.y*o,p=this.width*r,m=this.height*o;switch(i){case 0:return[d+u+l,o-f-h-m+c,d+u+p+l,o-f-h+c];case 90:return[d+h+l,o-f+u+c,d+h+m+l,o-f+u+p+c];case 180:return[d-u-p+l,o-f+h+c,d-u+l,o-f+h+m+c];case 270:return[d-h-m+l,o-f-u-p+c,d-h+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,r,o]=t,l=r-i,c=o-s;switch(this.rotation){case 0:return[i,e-o,l,c];case 90:return[i,e-s,c,l];case 180:return[r,e-s,l,c];case 270:return[r,e-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){g(this,_o,!0)}disableEditMode(){g(this,_o,!1)}isInEditMode(){return a(this,_o)}shouldGetKeyboardEvents(){return a(this,hs)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&s>0&&t<r&&i>0}rebuild(){S(this,Y,Hm).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){At("An editor must be serializable")}static async deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});s.rotation=t.rotation,g(s,wo,t.accessibilityData);const[r,o]=s.pageDimensions,[l,c,u,h]=s.getRectInCurrentCoords(t.rect,o);return s.x=l/r,s.y=c/o,s.width=u/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,cr))==null||t.abort(),g(this,cr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,ji)&&(clearTimeout(a(this,ji)),g(this,ji,null)),S(this,Y,zc).call(this),this.removeEditToolbar(),a(this,zn)){for(const i of a(this,zn).values())clearTimeout(i);g(this,zn,null)}this.parent=null,(e=a(this,bo))==null||e.destroy(),g(this,bo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(S(this,Y,_E).call(this),a(this,pe).classList.remove("hidden"),Qf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),g(this,us,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,pe).children;if(!a(this,ai)){g(this,ai,Array.from(e));const o=S(this,Y,PE).bind(this),l=S(this,Y,RE).bind(this),c=this._uiManager._signal;for(const u of a(this,ai)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",S(this,Y,IE).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",Z._l10nResizer[h])}}const i=a(this,ai)[0];let s=0;for(const o of e){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,ai).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)a(this,pe).append(a(this,pe).firstChild);else if(r>s)for(let l=0;l<r-s;l++)a(this,pe).firstChild.before(a(this,pe).lastChild);let o=0;for(const l of e){const u=a(this,ai)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",Z._l10nResizer[u])}}S(this,Y,Um).call(this,0),g(this,hs,!0),a(this,pe).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,hs)&&S(this,Y,$m).call(this,a(this,eh),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){S(this,Y,zc).call(this),this.div.focus()}select(){var t,e,i;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(i=a(this,Ct))==null||i.toggleAltTextBadge(!1)}unselect(){var t,e,i,s,r;(t=a(this,pe))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=a(this,Ct))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return a(this,nh)}set isEditing(t){g(this,nh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){g(this,Ao,!0);const i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,zn)||g(this,zn,new Map);const{action:i}=t;let s=a(this,zn).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),a(this,zn).delete(i),a(this,zn).size===0&&g(this,zn,null)},Z._telemetryTimeout),a(this,zn).set(i,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),g(this,gl,!1)}disable(){this.div&&(this.div.tabIndex=-1),g(this,gl,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};wo=new WeakMap,ai=new WeakMap,Ct=new WeakMap,gl=new WeakMap,lr=new WeakMap,th=new WeakMap,Ao=new WeakMap,pe=new WeakMap,So=new WeakMap,us=new WeakMap,cr=new WeakMap,eh=new WeakMap,Eo=new WeakMap,mn=new WeakMap,nh=new WeakMap,_o=new WeakMap,hs=new WeakMap,ji=new WeakMap,ml=new WeakMap,yl=new WeakMap,zn=new WeakMap,bo=new WeakMap,ih=new WeakMap,cp=new WeakMap,Y=new WeakSet,Fm=function([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},sh=new WeakSet,jm=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},ef=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},_E=function(){if(a(this,pe))return;g(this,pe,document.createElement("div")),a(this,pe).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");a(this,pe).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",S(this,Y,bE).bind(this,i),{signal:e}),s.addEventListener("contextmenu",Ei,{signal:e}),s.tabIndex=-1}this.div.prepend(a(this,pe))},bE=function(t,e){var h;e.preventDefault();const{isMac:i}=We.platform;if(e.button!==0||e.ctrlKey&&i)return;(h=a(this,Ct))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,g(this,So,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",S(this,Y,$m).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Pn,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ei,{signal:o}),g(this,us,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Ct))==null||d.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=c,S(this,Y,nf).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},zm=function(t,e,i,s){this.width=i,this.height=s,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*i,o*s),this.fixAndSetPosition(),this._onResized()},nf=function(){if(!a(this,us))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=a(this,us);g(this,us,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===t&&o===e&&l===i&&c===s||this.addCommands({cmd:S(this,Y,zm).bind(this,r,o,l,c),undo:S(this,Y,zm).bind(this,t,e,i,s),mustExec:!0})},$m=function(t,e){const[i,s]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,u=Z.MIN_SIZE/i,h=Z.MIN_SIZE/s,d=S(this,Y,ef).call(this,this.rotation),f=(D,G)=>[d[0]*D+d[2]*G,d[1]*D+d[3]*G],p=S(this,Y,ef).call(this,360-this.rotation),m=(D,G)=>[p[0]*D+p[2]*G,p[1]*D+p[3]*G];let v,_,y=!1,w=!1;switch(t){case"topLeft":y=!0,v=(D,G)=>[0,0],_=(D,G)=>[D,G];break;case"topMiddle":v=(D,G)=>[D/2,0],_=(D,G)=>[D/2,G];break;case"topRight":y=!0,v=(D,G)=>[D,0],_=(D,G)=>[0,G];break;case"middleRight":w=!0,v=(D,G)=>[D,G/2],_=(D,G)=>[0,G/2];break;case"bottomRight":y=!0,v=(D,G)=>[D,G],_=(D,G)=>[0,0];break;case"bottomMiddle":v=(D,G)=>[D/2,G],_=(D,G)=>[D/2,0];break;case"bottomLeft":y=!0,v=(D,G)=>[0,G],_=(D,G)=>[D,0];break;case"middleLeft":w=!0,v=(D,G)=>[0,G/2],_=(D,G)=>[D,G/2];break}const E=v(l,c),b=_(l,c);let C=f(...b);const x=Z._round(r+C[0]),T=Z._round(o+C[1]);let P=1,M=1,L,H;if(e.fromKeyboard)({deltaX:L,deltaY:H}=e);else{const{screenX:D,screenY:G}=e,[I,W]=a(this,So);[L,H]=this.screenToPageTranslation(D-I,G-W),a(this,So)[0]=D,a(this,So)[1]=G}if([L,H]=m(L/i,H/s),y){const D=Math.hypot(l,c);P=M=Math.max(Math.min(Math.hypot(b[0]-E[0]-L,b[1]-E[1]-H)/D,1/l,1/c),u/l,h/c)}else w?P=Math.max(u,Math.min(1,Math.abs(b[0]-E[0]-L)))/l:M=Math.max(h,Math.min(1,Math.abs(b[1]-E[1]-H)))/c;const tt=Z._round(l*P),pt=Z._round(c*M);C=f(..._(tt,pt));const et=x-C[0],Bt=T-C[1];a(this,mn)||g(this,mn,[this.x,this.y,this.width,this.height]),this.width=tt,this.height=pt,this.x=et,this.y=Bt,this.setDims(i*tt,s*pt),this.fixAndSetPosition(),this._onResizing()},CE=function(){var t;g(this,us,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Ct))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},xE=function(t,e,i){let r=.7*(i/e)+1-.7;if(r===1)return;const o=S(this,Y,ef).call(this,this.rotation),l=(x,T)=>[o[0]*x+o[2]*T,o[1]*x+o[3]*T],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,m=Z.MIN_SIZE/c,v=Z.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),m/f,v/p);const _=Z._round(f*r),y=Z._round(p*r);if(_===f&&y===p)return;a(this,mn)||g(this,mn,[h,d,f,p]);const w=l(f/2,p/2),E=Z._round(h+w[0]),b=Z._round(d+w[1]),C=l(_/2,y/2);this.x=E-C[0],this.y=b-C[1],this.width=_,this.height=y,this.setDims(c*_,u*y),this.fixAndSetPosition(),this._onResizing()},TE=function(){var t;(t=a(this,Ct))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),S(this,Y,nf).call(this)},Bm=function(t){const{isMac:e}=We.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},kE=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},l=u=>{s.abort(),g(this,lr,null),g(this,Eo,!1),this._uiManager.endDragSession()||S(this,Y,Bm).call(this,u),i&&this._onStopDragging()};e&&(g(this,ml,t.clientX),g(this,yl,t.clientY),g(this,lr,t.pointerId),g(this,th,t.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==a(this,lr)){Pn(u);return}const[p,m]=this.screenToPageTranslation(h-a(this,ml),d-a(this,yl));g(this,ml,h),g(this,yl,d),this._uiManager.dragSelectedEditors(p,m)},o),window.addEventListener("touchmove",Pn,o),window.addEventListener("pointerdown",u=>{u.pointerType===a(this,th)&&(a(this,bo)||u.isPrimary)&&l(u),Pn(u)},o));const c=u=>{if(!a(this,lr)||a(this,lr)===u.pointerId){l(u);return}Pn(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},Hm=function(){if(a(this,cr)||!this.div)return;g(this,cr,new AbortController);const t=this._uiManager.combinedSignal(a(this,cr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},PE=function(t){Z._resizerKeyboardManager.exec(this,t)},RE=function(t){var e;a(this,hs)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,pe)&&S(this,Y,zc).call(this)},IE=function(t){g(this,eh,a(this,hs)?t:"")},Um=function(t){if(a(this,ai))for(const e of a(this,ai))e.tabIndex=t},zc=function(){g(this,hs,!1),S(this,Y,Um).call(this,-1),S(this,Y,nf).call(this)},A(Z,sh),B(Z,"_l10n",null),B(Z,"_l10nResizer",null),B(Z,"_borderLineWidth",-1),B(Z,"_colorManager",new Pm),B(Z,"_zIndex",1),B(Z,"_telemetryTimeout",1e3);let Dt=Z;class yx extends Dt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ow=3285377520,On=4294901760,Ti=65535;class ME{constructor(t){this.h1=t?t&4294967295:ow,this.h2=t?t&4294967295:ow}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let v=0,_=t.length;v<_;v++){const y=t.charCodeAt(v);y<=255?e[i++]=y:(e[i++]=y>>>8,e[i++]=y&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(e.buffer,0,s);let l=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Ti,m=f&Ti;for(let v=0;v<s;v++)v&1?(l=o[v],l=l*d&On|l*p&Ti,l=l<<15|l>>>17,l=l*f&On|l*m&Ti,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[v],c=c*d&On|c*p&Ti,c=c<<15|c>>>17,c=c*f&On|c*m&Ti,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*d&On|l*p&Ti,l=l<<15|l>>>17,l=l*f&On|l*m&Ti,s&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&On|t*36045&Ti,e=e*4283543511&On|((e<<16|t>>>16)*2950163797&On)>>>16,t^=e>>>1,t=t*444984403&On|t*60499&Ti,e=e*3301882366&On|((e<<16|t>>>16)*3120437893&On)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Gm=Object.freeze({map:null,hash:"",transfer:void 0});var Co,xo,oe,up,LE;class Ov{constructor(){A(this,up);A(this,Co,!1);A(this,xo,null);A(this,oe,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=a(this,oe).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return a(this,oe).get(t)}remove(t){if(a(this,oe).delete(t),a(this,oe).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,oe).values())if(e instanceof Dt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=a(this,oe).get(t);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(e))i[r]!==o&&(s=!0,i[r]=o);else s=!0,a(this,oe).set(t,e);s&&S(this,up,LE).call(this),e instanceof Dt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,oe).has(t)}getAll(){return a(this,oe).size>0?Rv(a(this,oe)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return a(this,oe).size}resetModified(){a(this,Co)&&(g(this,Co,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new NE(this)}get serializable(){if(a(this,oe).size===0)return Gm;const t=new Map,e=new ME,i=[],s=Object.create(null);let r=!1;for(const[o,l]of a(this,oe)){const c=l instanceof Dt?l.serialize(!1,s):l;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Gm}get editorStats(){let t=null;const e=new Map;for(const i of a(this,oe).values()){if(!(i instanceof Dt))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[l,c]of Object.entries(s)){if(l==="type")continue;let u=o.get(l);u||(u=new Map,o.set(l,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[i,s]of e)t[i]=s.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){g(this,xo,null)}get modifiedIds(){if(a(this,xo))return a(this,xo);const t=[];for(const e of a(this,oe).values())!(e instanceof Dt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return g(this,xo,{ids:new Set(t),hash:t.join(",")})}}Co=new WeakMap,xo=new WeakMap,oe=new WeakMap,up=new WeakSet,LE=function(){a(this,Co)||(g(this,Co,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var rh;class NE extends Ov{constructor(e){super();A(this,rh);const{map:i,hash:s,transfer:r}=e.serializable,o=structuredClone(i,r?{transfer:r}:null);g(this,rh,{map:o,hash:s,transfer:r})}get print(){At("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,rh)}get modifiedIds(){return it(this,"modifiedIds",{ids:new Set,hash:""})}}rh=new WeakMap;var vl;class vx{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){A(this,vl,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,vl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||a(this,vl).has(t.loadedName))){if(qt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:r}=t,o=new FontFace(i,s,r);this.addNativeFontFace(o);try{await o.load(),a(this,vl).add(i),e==null||e(t)}catch{J(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}At("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw J(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return it(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Ne||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),it(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(qt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return it(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(b,C){return b.charCodeAt(C)<<24|b.charCodeAt(C+1)<<16|b.charCodeAt(C+2)<<8|b.charCodeAt(C+3)&255}function s(b,C,x,T){const P=b.substring(0,C),M=b.substring(C+x);return P+T+M}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(b,C){if(++u>30){J("Load test font never loaded."),C();return}if(c.font="30px "+b,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(h.bind(null,b,C))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const m=16,v=1482184792;let _=i(f,m);for(r=0,o=d.length-3;r<o;r+=4)_=_-v+i(d,r)|0;r<d.length&&(_=_-v+i(d+"XXX",r)|0),f=s(f,m,4,ix(_));const y=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(w);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const b of[t.loadedName,d]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=b,E.append(C)}this._document.body.append(E),h(d,()=>{E.remove(),e.complete()})}}vl=new WeakMap;class wx{constructor(t,{disableFontFace:e=!1,fontExtraProperties:i=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.disableFontFace=e===!0,this.fontExtraProperties=i===!0,this._inspectFont=s}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${cx(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let s;try{s=t.get(i)}catch(o){J(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=r}}const Md={DATA:1,ERROR:2},Yt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function aw(){}function tn(n){if(n instanceof Ur||n instanceof _m||n instanceof ku||n instanceof iw||n instanceof Kf||n instanceof _g)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||At('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ur(n.message);case"InvalidPDFException":return new _m(n.message);case"MissingPDFException":return new ku(n.message);case"PasswordException":return new iw(n.message,n.code);case"UnexpectedResponseException":return new Kf(n.message,n.status);case"UnknownErrorException":return new _g(n.message,n.details)}return new _g(n.message,n.toString())}var wl,Kn,DE,OE,FE,sf;class $c{constructor(t,e,i){A(this,Kn);A(this,wl,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",S(this,Kn,DE).bind(this),{signal:a(this,wl).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,i,s){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:Yt.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{qt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:Yt.CANCEL,streamId:r,reason:tn(u)}),h.promise}},i)}destroy(){var t;(t=a(this,wl))==null||t.abort(),g(this,wl,null)}}wl=new WeakMap,Kn=new WeakSet,DE=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){S(this,Kn,FE).call(this,t);return}if(t.callback){const i=t.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Md.DATA)s.resolve(t.data);else if(t.callback===Md.ERROR)s.reject(tn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,s=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:Md.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:Md.ERROR,callbackId:t.callbackId,reason:tn(o)})});return}if(t.streamId){S(this,Kn,OE).call(this,t);return}e(t.data)},OE=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:Yt.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Yt.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){qt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Yt.ERROR,streamId:e,reason:tn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Yt.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Yt.START_COMPLETE,streamId:e,reason:tn(u)})})},FE=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Yt.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(tn(t.reason));break;case Yt.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(tn(t.reason));break;case Yt.PULL:if(!l){r.postMessage({sourceName:i,targetName:s,stream:Yt.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||aw).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Yt.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Yt.PULL_COMPLETE,streamId:e,reason:tn(u)})});break;case Yt.ENQUEUE:if(qt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Yt.CLOSE:if(qt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),S(this,Kn,sf).call(this,o,e);break;case Yt.ERROR:qt(o,"error should have stream controller"),o.controller.error(tn(t.reason)),S(this,Kn,sf).call(this,o,e);break;case Yt.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(tn(t.reason)),S(this,Kn,sf).call(this,o,e);break;case Yt.CANCEL:if(!l)break;const c=tn(t.reason);Promise.try(l.onCancel||aw,c).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Yt.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Yt.CANCEL_COMPLETE,streamId:e,reason:tn(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},sf=async function(t,e){var i,s,r;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var oh;class jE{constructor({enableHWA:t=!1}){A(this,oh,!1);g(this,oh,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!a(this,oh)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){At("Abstract method `_createCanvas` called.")}}oh=new WeakMap;class Ax extends jE{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class zE{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){At("Abstract method `_fetch` called.")}}class $E extends zE{async _fetch(t){const e=await Up(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Hp(e)}}class BE{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,r){return"none"}destroy(t=!1){}}var To,Al,ds,fs,Pe,ko,Po,F,xe,Bc,ka,rf,Pa,HE,Vm,Ra,Hc,Uc,Wm,Gc;class Sx extends BE{constructor({docId:e,ownerDocument:i=globalThis.document}){super();A(this,F);A(this,To);A(this,Al);A(this,ds);A(this,fs);A(this,Pe);A(this,ko);A(this,Po,0);g(this,fs,e),g(this,Pe,i)}addFilter(e){if(!e)return"none";let i=a(this,F,xe).get(e);if(i)return i;const[s,r,o]=S(this,F,rf).call(this,e),l=e.length===1?s:`${s}${r}${o}`;if(i=a(this,F,xe).get(l),i)return a(this,F,xe).set(e,i),i;const c=`g_${a(this,fs)}_transfer_map_${Fe(this,Po)._++}`,u=S(this,F,Pa).call(this,c);a(this,F,xe).set(e,u),a(this,F,xe).set(l,u);const h=S(this,F,Ra).call(this,c);return S(this,F,Uc).call(this,s,r,o,h),u}addHCMFilter(e,i){var m;const s=`${e}-${i}`,r="base";let o=a(this,F,Bc).get(r);if((o==null?void 0:o.key)===s||(o?((m=o.filter)==null||m.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},a(this,F,Bc).set(r,o)),!e||!i))return o.url;const l=S(this,F,Gc).call(this,e);e=V.makeHexColor(...l);const c=S(this,F,Gc).call(this,i);if(i=V.makeHexColor(...c),a(this,F,ka).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return o.url;const u=new Array(256);for(let v=0;v<=255;v++){const _=v/255;u[v]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const h=u.join(","),d=`g_${a(this,fs)}_hcm_filter`,f=o.filter=S(this,F,Ra).call(this,d);S(this,F,Uc).call(this,h,h,h,f),S(this,F,Vm).call(this,f);const p=(v,_)=>{const y=l[v]/255,w=c[v]/255,E=new Array(_+1);for(let b=0;b<=_;b++)E[b]=y+b/_*(w-y);return E.join(",")};return S(this,F,Uc).call(this,p(0,5),p(1,5),p(2,5),f),o.url=S(this,F,Pa).call(this,d),o.url}addAlphaFilter(e){let i=a(this,F,xe).get(e);if(i)return i;const[s]=S(this,F,rf).call(this,[e]),r=`alpha_${s}`;if(i=a(this,F,xe).get(r),i)return a(this,F,xe).set(e,i),i;const o=`g_${a(this,fs)}_alpha_map_${Fe(this,Po)._++}`,l=S(this,F,Pa).call(this,o);a(this,F,xe).set(e,l),a(this,F,xe).set(r,l);const c=S(this,F,Ra).call(this,o);return S(this,F,Wm).call(this,s,c),l}addLuminosityFilter(e){let i=a(this,F,xe).get(e||"luminosity");if(i)return i;let s,r;if(e?([s]=S(this,F,rf).call(this,[e]),r=`luminosity_${s}`):r="luminosity",i=a(this,F,xe).get(r),i)return a(this,F,xe).set(e,i),i;const o=`g_${a(this,fs)}_luminosity_map_${Fe(this,Po)._++}`,l=S(this,F,Pa).call(this,o);a(this,F,xe).set(e,l),a(this,F,xe).set(r,l);const c=S(this,F,Ra).call(this,o);return S(this,F,HE).call(this,c),e&&S(this,F,Wm).call(this,s,c),l}addHighlightHCMFilter(e,i,s,r,o){var w;const l=`${i}-${s}-${r}-${o}`;let c=a(this,F,Bc).get(e);if((c==null?void 0:c.key)===l||(c?((w=c.filter)==null||w.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,F,Bc).set(e,c)),!i||!s))return c.url;const[u,h]=[i,s].map(S(this,F,Gc).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,m]=[r,o].map(S(this,F,Gc).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),a(this,F,ka).style.color="";const v=(E,b,C)=>{const x=new Array(256),T=(f-d)/C,P=E/255,M=(b-E)/(255*C);let L=0;for(let H=0;H<=C;H++){const tt=Math.round(d+H*T),pt=P+H*M;for(let et=L;et<=tt;et++)x[et]=pt;L=tt+1}for(let H=L;H<256;H++)x[H]=x[L-1];return x.join(",")},_=`g_${a(this,fs)}_hcm_${e}_filter`,y=c.filter=S(this,F,Ra).call(this,_);return S(this,F,Vm).call(this,y),S(this,F,Uc).call(this,v(p[0],m[0],5),v(p[1],m[1],5),v(p[2],m[2],5),y),c.url=S(this,F,Pa).call(this,_),c.url}destroy(e=!1){var i,s,r,o;e&&((i=a(this,ko))!=null&&i.size)||((s=a(this,ds))==null||s.parentNode.parentNode.remove(),g(this,ds,null),(r=a(this,Al))==null||r.clear(),g(this,Al,null),(o=a(this,ko))==null||o.clear(),g(this,ko,null),g(this,Po,0))}}To=new WeakMap,Al=new WeakMap,ds=new WeakMap,fs=new WeakMap,Pe=new WeakMap,ko=new WeakMap,Po=new WeakMap,F=new WeakSet,xe=function(){return a(this,Al)||g(this,Al,new Map)},Bc=function(){return a(this,ko)||g(this,ko,new Map)},ka=function(){if(!a(this,ds)){const e=a(this,Pe).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=a(this,Pe).createElementNS(Ji,"svg");s.setAttribute("width",0),s.setAttribute("height",0),g(this,ds,a(this,Pe).createElementNS(Ji,"defs")),e.append(s),s.append(a(this,ds)),a(this,Pe).body.append(e)}return a(this,ds)},rf=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,l[u]=s[u]/255,c[u]=r[u]/255;return[o.join(","),l.join(","),c.join(",")]},Pa=function(e){if(a(this,To)===void 0){g(this,To,"");const i=a(this,Pe).URL;i!==a(this,Pe).baseURI&&(Gp(i)?J('#createUrl: ignore "data:"-URL for performance reasons.'):g(this,To,i.split("#",1)[0]))}return`url(${a(this,To)}#${e})`},HE=function(e){const i=a(this,Pe).createElementNS(Ji,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},Vm=function(e){const i=a(this,Pe).createElementNS(Ji,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},Ra=function(e){const i=a(this,Pe).createElementNS(Ji,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),a(this,F,ka).append(i),i},Hc=function(e,i,s){const r=a(this,Pe).createElementNS(Ji,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},Uc=function(e,i,s,r){const o=a(this,Pe).createElementNS(Ji,"feComponentTransfer");r.append(o),S(this,F,Hc).call(this,o,"feFuncR",e),S(this,F,Hc).call(this,o,"feFuncG",i),S(this,F,Hc).call(this,o,"feFuncB",s)},Wm=function(e,i){const s=a(this,Pe).createElementNS(Ji,"feComponentTransfer");i.append(s),S(this,F,Hc).call(this,s,"feFuncA",e)},Gc=function(e){return a(this,F,ka).style.color=e,Dv(getComputedStyle(a(this,F,ka)).getPropertyValue("color"))};class UE{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){At("Abstract method `_fetch` called.")}}class GE extends UE{async _fetch(t){const e=await Up(t,"arraybuffer");return new Uint8Array(e)}}Ne&&J("Please use the `legacy` build in Node.js environments.");async function VE(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class Ex extends BE{}class _x extends jE{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class bx extends zE{async _fetch(t){return VE(t)}}class Cx extends UE{async _fetch(t){return VE(t)}}const Me={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ym(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),n.clip(s)}class Fv{getPattern(){At("Abstract method `getPattern` called.")}}class xx extends Fv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let r;if(s===Me.STROKE||s===Me.FILL){const o=e.current.getClippedPathBoundingBox(s,Pt(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",l,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),i=V.transform(i,[1,0,0,1,o[0],o[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),Ym(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);r.setTransform(d)}else Ym(t,this._bbox),r=this._createGradient(t);return r}}function xg(n,t,e,i,s,r,o,l){const c=t.coords,u=t.colors,h=n.data,d=n.width*4;let f;c[e+1]>c[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f),c[i+1]>c[s+1]&&(f=i,i=s,s=f,f=o,o=l,l=f),c[e+1]>c[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f);const p=(c[e]+t.offsetX)*t.scaleX,m=(c[e+1]+t.offsetY)*t.scaleY,v=(c[i]+t.offsetX)*t.scaleX,_=(c[i+1]+t.offsetY)*t.scaleY,y=(c[s]+t.offsetX)*t.scaleX,w=(c[s+1]+t.offsetY)*t.scaleY;if(m>=w)return;const E=u[r],b=u[r+1],C=u[r+2],x=u[o],T=u[o+1],P=u[o+2],M=u[l],L=u[l+1],H=u[l+2],tt=Math.round(m),pt=Math.round(w);let et,Bt,D,G,I,W,X,ot;for(let st=tt;st<=pt;st++){if(st<_){const dt=st<m?0:(m-st)/(m-_);et=p-(p-v)*dt,Bt=E-(E-x)*dt,D=b-(b-T)*dt,G=C-(C-P)*dt}else{let dt;st>w?dt=1:_===w?dt=0:dt=(_-st)/(_-w),et=v-(v-y)*dt,Bt=x-(x-M)*dt,D=T-(T-L)*dt,G=P-(P-H)*dt}let St;st<m?St=0:st>w?St=1:St=(m-st)/(m-w),I=p-(p-y)*St,W=E-(E-M)*St,X=b-(b-L)*St,ot=C-(C-H)*St;const Ee=Math.round(Math.min(et,I)),Zn=Math.round(Math.max(et,I));let Tt=d*st+Ee*4;for(let dt=Ee;dt<=Zn;dt++)St=(et-dt)/(et-I),St<0?St=0:St>1&&(St=1),h[Tt++]=Bt-(Bt-W)*St|0,h[Tt++]=D-(D-X)*St|0,h[Tt++]=G-(G-ot)*St|0,h[Tt++]=255}}function Tx(n,t,e){const i=t.coords,s=t.colors;let r,o;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(i.length/l)-1,u=l-1;for(r=0;r<c;r++){let h=r*l;for(let d=0;d<u;d++,h++)xg(n,e,i[h],i[h+1],i[h+l],s[h],s[h+1],s[h+l]),xg(n,e,i[h+l+1],i[h+1],i[h+l],s[h+l+1],s[h+1],s[h+l])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)xg(n,e,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class kx extends Fv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),p=u/d,m=h/f,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/m},_=d+2*2,y=f+2*2,w=i.getCanvas("mesh",_,y),E=w.context,b=E.createImageData(d,f);if(e){const x=b.data;for(let T=0,P=x.length;T<P;T+=4)x[T]=e[0],x[T+1]=e[1],x[T+2]=e[2],x[T+3]=255}for(const x of this._figures)Tx(b,x,v);return E.putImageData(b,2,2),{canvas:w.canvas,offsetX:l-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}getPattern(t,e,i,s){Ym(t,this._bbox);let r;if(s===Me.SHADING)r=V.singularValueDecompose2dScale(Pt(t));else if(r=V.singularValueDecompose2dScale(e.baseTransform),this.matrix){const l=V.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}const o=this._createMeshCanvas(r,s===Me.SHADING?null:this._background,e.cachedCanvases);return s!==Me.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class Px extends Fv{getPattern(){return"hotpink"}}function Rx(n){switch(n[0]){case"RadialAxial":return new xx(n);case"Mesh":return new kx(n);case"Dummy":return new Px}throw new Error(`Unknown IR type: ${n[0]}`)}const lw={COLORED:1,UNCOLORED:2},hp=class hp{constructor(t,e,i,s,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Bp("TilingType: "+r);const h=e[0],d=e[1],f=e[2],p=e[3],m=f-h,v=p-d,_=V.singularValueDecompose2dScale(this.matrix),y=V.singularValueDecompose2dScale(this.baseTransform),w=_[0]*y[0],E=_[1]*y[1];let b=m,C=v,x=!1,T=!1;const P=Math.ceil(c*w),M=Math.ceil(u*E),L=Math.ceil(m*w),H=Math.ceil(v*E);P>=L?b=c:x=!0,M>=H?C=u:T=!0;const tt=this.getSizeAndScale(b,this.ctx.canvas.width,w),pt=this.getSizeAndScale(C,this.ctx.canvas.height,E),et=t.cachedCanvases.getCanvas("pattern",tt.size,pt.size),Bt=et.context,D=l.createCanvasGraphics(Bt);if(D.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(D,s,o),Bt.translate(-tt.scale*h,-pt.scale*d),D.transform(tt.scale,0,0,pt.scale,0,0),Bt.save(),this.clipBbox(D,h,d,f,p),D.baseTransform=Pt(D.ctx),D.executeOperatorList(i),D.endDrawing(),Bt.restore(),x||T){const G=et.canvas;x&&(b=c),T&&(C=u);const I=this.getSizeAndScale(b,this.ctx.canvas.width,w),W=this.getSizeAndScale(C,this.ctx.canvas.height,E),X=I.size,ot=W.size,st=t.cachedCanvases.getCanvas("pattern-workaround",X,ot),St=st.context,Ee=x?Math.floor(m/c):0,Zn=T?Math.floor(v/u):0;for(let Tt=0;Tt<=Ee;Tt++)for(let dt=0;dt<=Zn;dt++)St.drawImage(G,X*Tt,ot*dt,X,ot,0,0,X,ot);return{canvas:st.canvas,scaleX:I.scale,scaleY:W.scale,offsetX:h,offsetY:d}}return{canvas:et.canvas,scaleX:tt.scale,scaleY:pt.scale,offsetX:h,offsetY:d}}getSizeAndScale(t,e,i){const s=Math.max(hp.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=s?r=s:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,s,r){const o=s-e,l=r-i;t.ctx.rect(e,i,o,l),t.current.updateRectMinMax(Pt(t.ctx),[e,i,s,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,r=t.current;switch(e){case lw.COLORED:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case lw.UNCOLORED:const l=V.makeHexColor(i[0],i[1],i[2]);s.fillStyle=l,s.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new nx(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,s){let r=i;s!==Me.SHADING&&(r=V.transform(r,e.baseTransform),this.matrix&&(r=V.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};B(hp,"MAX_PATTERN_SIZE",3e3);let Xm=hp;function Ix({src:n,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=We.isLittleEndian?4278190080:255,[c,u]=o?[r,l]:[l,r],h=i>>3,d=i&7,f=n.length;e=new Uint32Array(e.buffer);let p=0;for(let m=0;m<s;m++){for(const _=t+h;t<_;t++){const y=t<f?n[t]:255;e[p++]=y&128?u:c,e[p++]=y&64?u:c,e[p++]=y&32?u:c,e[p++]=y&16?u:c,e[p++]=y&8?u:c,e[p++]=y&4?u:c,e[p++]=y&2?u:c,e[p++]=y&1?u:c}if(d===0)continue;const v=t<f?n[t++]:255;for(let _=0;_<d;_++)e[p++]=v&1<<7-_?u:c}return{srcPos:t,destPos:p}}const cw=16,uw=100,Mx=15,hw=10,dw=1e3,on=16;function Lx(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,r,o,l,c){t.transform(i,s,r,o,l,c),this.__originalTransform(i,s,r,o,l,c)},n.setTransform=function(i,s,r,o,l,c){t.setTransform(i,s,r,o,l,c),this.__originalSetTransform(i,s,r,o,l,c)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){t.rotate(i),this.__originalRotate(i)},n.clip=function(i){t.clip(i),this.__originalClip(i)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,s,r,o,l){t.bezierCurveTo(e,i,s,r,o,l),this.__originalBezierCurveTo(e,i,s,r,o,l)},n.rect=function(e,i,s,r){t.rect(e,i,s,r),this.__originalRect(e,i,s,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Nx{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ld(n,t,e,i,s,r,o,l,c,u){const[h,d,f,p,m,v]=Pt(n);if(d===0&&f===0){const w=o*h+m,E=Math.round(w),b=l*p+v,C=Math.round(b),x=(o+c)*h+m,T=Math.abs(Math.round(x)-E)||1,P=(l+u)*p+v,M=Math.abs(Math.round(P)-C)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),E,C),n.drawImage(t,e,i,s,r,0,0,T,M),n.setTransform(h,d,f,p,m,v),[T,M]}if(h===0&&p===0){const w=l*f+m,E=Math.round(w),b=o*d+v,C=Math.round(b),x=(l+u)*f+m,T=Math.abs(Math.round(x)-E)||1,P=(o+c)*d+v,M=Math.abs(Math.round(P)-C)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,E,C),n.drawImage(t,e,i,s,r,0,0,M,T),n.setTransform(h,d,f,p,m,v),[M,T]}n.drawImage(t,e,i,s,r,o,l,c,u);const _=Math.hypot(h,d),y=Math.hypot(f,p);return[_*c,y*u]}function Dx(n){const{width:t,height:e}=n;if(t>dw||e>dw)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let o=new Uint8Array(r*(e+1)),l,c,u;const h=t+7&-8;let d=new Uint8Array(h*e),f=0;for(const y of n.data){let w=128;for(;w>0;)d[f++]=y&w?0:255,w>>=1}let p=0;for(f=0,d[f]!==0&&(o[0]=1,++p),c=1;c<t;c++)d[f]!==d[f+1]&&(o[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(o[c]=2,++p),l=1;l<e;l++){f=l*h,u=l*r,d[f-h]!==d[f]&&(o[u]=d[f]?1:8,++p);let y=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<t;c++)y=(y>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),s[y]&&(o[u+c]=s[y],++p),f++;if(d[f-h]!==d[f]&&(o[u+c]=d[f]?2:4,++p),p>i)return null}for(f=h*(e-1),u=l*r,d[f]!==0&&(o[u]=8,++p),c=1;c<t;c++)d[f]!==d[f+1]&&(o[u+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(o[u+c]=4,++p),p>i)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),v=new Path2D;for(l=0;p&&l<=e;l++){let y=l*r;const w=y+t;for(;y<w&&!o[y];)y++;if(y===w)continue;v.moveTo(y%r,l);const E=y;let b=o[y];do{const C=m[b];do y+=C;while(!o[y]);const x=o[y];x!==5&&x!==10?(b=x,o[y]=0):(b=x&51*b>>4,o[y]&=b>>2|b<<2),v.lineTo(y%r,y/r|0),o[y]||--p}while(E!==y);--l}return d=null,o=null,function(y){y.save(),y.scale(1/t,-1/e),y.translate(0,-e),y.fill(v),y.beginPath(),y.restore()}}class fw{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=eE,this.textMatrixScale=1,this.fontMatrix=Em,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Ce.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=V.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=V.applyTransform(e,t),s=V.applyTransform(e.slice(2),t),r=V.applyTransform([e[0],e[3]],t),o=V.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],s[0],r[0],o[0]),this.minY=Math.min(this.minY,i[1],s[1],r[1],o[1]),this.maxX=Math.max(this.maxX,i[0],s[0],r[0],o[0]),this.maxY=Math.max(this.maxY,i[1],s[1],r[1],o[1])}updateScalingPathMinMax(t,e){V.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,s,r,o,l,c,u,h){const d=V.bezierBoundingBox(e,i,s,r,o,l,c,u,h);h||this.updateRectMinMax(t,d)}getPathBoundingBox(t=Me.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===Me.STROKE){e||At("Stroke bounding box must include transform.");const s=V.singularValueDecompose2dScale(e),r=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;i[0]-=r,i[1]-=o,i[2]+=r,i[3]+=o}return i}updateClipFromPath(){const t=V.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Me.FILL,e=null){return V.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function pw(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%on,r=(e-s)/on,o=s===0?r:r+1,l=n.createImageData(i,on);let c=0,u;const h=t.data,d=l.data;let f,p,m,v;if(t.kind===Xd.GRAYSCALE_1BPP){const _=h.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),w=y.length,E=i+7>>3,b=4294967295,C=We.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<r?on:s,u=0,p=0;p<m;p++){const x=_-c;let T=0;const P=x>E?i:x*8-7,M=P&-8;let L=0,H=0;for(;T<M;T+=8)H=h[c++],y[u++]=H&128?b:C,y[u++]=H&64?b:C,y[u++]=H&32?b:C,y[u++]=H&16?b:C,y[u++]=H&8?b:C,y[u++]=H&4?b:C,y[u++]=H&2?b:C,y[u++]=H&1?b:C;for(;T<P;T++)L===0&&(H=h[c++],L=128),y[u++]=H&L?b:C,L>>=1}for(;u<w;)y[u++]=0;n.putImageData(l,0,f*on)}}else if(t.kind===Xd.RGBA_32BPP){for(p=0,v=i*on*4,f=0;f<r;f++)d.set(h.subarray(c,c+v)),c+=v,n.putImageData(l,0,p),p+=on;f<o&&(v=i*s*4,d.set(h.subarray(c,c+v)),n.putImageData(l,0,p))}else if(t.kind===Xd.RGB_24BPP)for(m=on,v=i*m,f=0;f<o;f++){for(f>=r&&(m=s,v=i*m),u=0,p=v;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(l,0,f*on)}else throw new Error(`bad image kind: ${t.kind}`)}function gw(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%on,r=(e-s)/on,o=s===0?r:r+1,l=n.createImageData(i,on);let c=0;const u=t.data,h=l.data;for(let d=0;d<o;d++){const f=d<r?on:s;({srcPos:c}=Ix({src:u,srcPos:c,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(l,0,d*on)}}function kc(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Nd(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Ne){const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}}function mw(n,t){if(t)return!0;const e=V.singularValueDecompose2dScale(n);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Gr.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const Ox=["butt","round","square"],Fx=["miter","round","bevel"],jx={},yw={};var _i,qm,Km,Qm;const Uv=class Uv{constructor(t,e,i,s,r,{optionalContentConfig:o,markedContentStack:l=null},c,u){A(this,_i);this.ctx=t,this.current=new fw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new Nx(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,i){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Pt(this.compositeCtx))}this.ctx.save(),Nd(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Pt(this.ctx)}executeOperatorList(t,e,i,s){const r=t.argsArray,o=t.fnArray;let l=e||0;const c=r.length;if(c===l)return l;const u=c-l>hw&&typeof i=="function",h=u?Date.now()+Mx:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,i),l;if(m=o[l],m!==ii.dependency)this[m].apply(this,r[l]);else for(const v of r[l]){const _=v.startsWith("g_")?f:p;if(!_.has(v))return _.get(v,i),l}if(l++,l===c)return l;if(u&&++d>hw){if(Date.now()>h)return i(),l;d=0}}}endDrawing(){S(this,_i,qm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),S(this,_i,Km).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,c=s,u="prescale1",h,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,p=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,l,c,0,0,f,p),t=h.canvas,l=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,r=this.current.fillColor,o=this.current.patternFill,l=Pt(e);let c,u,h,d;if((t.bitmap||t.data)&&t.count>1){const P=t.bitmap||t.data.buffer;u=JSON.stringify(o?l:[l.slice(0,4),r]),c=this._cachedBitmapsMap.get(P),c||(c=new Map,this._cachedBitmapsMap.set(P,c));const M=c.get(u);if(M&&!o){const L=Math.round(Math.min(l[0],l[2])+l[4]),H=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:M,offsetX:L,offsetY:H}}h=M}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),gw(d.context,t));let f=V.transform(l,[1/i,0,0,-1/s,0,0]);f=V.transform(f,[1,0,0,1,0,-s]);const[p,m,v,_]=V.getAxialAlignedBoundingBox([0,0,i,s],f),y=Math.round(v-p)||1,w=Math.round(_-m)||1,E=this.cachedCanvases.getCanvas("fillCanvas",y,w),b=E.context,C=p,x=m;b.translate(-C,-x),b.transform(...f),h||(h=this._scaleImage(d.canvas,xi(b)),h=h.img,c&&o&&c.set(u,h)),b.imageSmoothingEnabled=mw(Pt(b),t.interpolate),Ld(b,h,0,0,h.width,h.height,0,0,i,s),b.globalCompositeOperation="source-in";const T=V.transform(xi(b),[1,0,0,1,-C,-x]);return b.fillStyle=o?r.getPattern(e,this,T,Me.FILL):r,b.fillRect(0,0,i,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,E.canvas)),{canvas:E.canvas,offsetX:Math.round(C),offsetY:Math.round(x)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Ox[t]}setLineJoin(t){this.ctx.lineJoin=Fx[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...Pt(this.suspendedCtx)),kc(this.suspendedCtx,r),Lx(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),kc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const r=s[0],o=s[1],l=s[2]-r,c=s[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,i,l,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,r,o,l,c,u,h,d){let f=t.canvas,p=c-h,m=u-d;if(o){const _=V.makeHexColor(...o);if(p<0||m<0||p+i>f.width||m+s>f.height){const y=this.cachedCanvases.getCanvas("maskExtension",i,s),w=y.context;w.drawImage(f,-p,-m),w.globalCompositeOperation="destination-atop",w.fillStyle=_,w.fillRect(0,0,i,s),w.globalCompositeOperation="source-over",f=y.canvas,p=m=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(p,m,i,s),t.clip(y),t.globalCompositeOperation="destination-atop",t.fillStyle=_,t.fillRect(p,m,i,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(c,u,i,s),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(f,p,m,i,s,c,u,i,s),e.restore()}save(){this.inSMaskMode?(kc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),kc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,s,r,o){this.ctx.transform(t,e,i,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const s=this.ctx,r=this.current;let o=r.x,l=r.y,c,u;const h=Pt(s),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?i.slice(0):null;for(let p=0,m=0,v=t.length;p<v;p++)switch(t[p]|0){case ii.rectangle:o=e[m++],l=e[m++];const _=e[m++],y=e[m++],w=o+_,E=l+y;s.moveTo(o,l),_===0||y===0?s.lineTo(w,E):(s.lineTo(w,l),s.lineTo(w,E),s.lineTo(o,E)),d||r.updateRectMinMax(h,[o,l,w,E]),s.closePath();break;case ii.moveTo:o=e[m++],l=e[m++],s.moveTo(o,l),d||r.updatePathMinMax(h,o,l);break;case ii.lineTo:o=e[m++],l=e[m++],s.lineTo(o,l),d||r.updatePathMinMax(h,o,l);break;case ii.curveTo:c=o,u=l,o=e[m+4],l=e[m+5],s.bezierCurveTo(e[m],e[m+1],e[m+2],e[m+3],o,l),r.updateCurvePathMinMax(h,c,u,e[m],e[m+1],e[m+2],e[m+3],o,l,f),m+=6;break;case ii.curveTo2:c=o,u=l,s.bezierCurveTo(o,l,e[m],e[m+1],e[m+2],e[m+3]),r.updateCurvePathMinMax(h,c,u,o,l,e[m],e[m+1],e[m+2],e[m+3],f),o=e[m+2],l=e[m+3],m+=4;break;case ii.curveTo3:c=o,u=l,o=e[m+2],l=e[m+3],s.bezierCurveTo(e[m],e[m+1],o,l,o,l),r.updateCurvePathMinMax(h,c,u,e[m],e[m+1],o,l,o,l,f),m+=4;break;case ii.closePath:s.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(e.save(),e.strokeStyle=i.getPattern(e,this,xi(e),Me.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(e.save(),e.fillStyle=i.getPattern(e,this,xi(e),Me.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=jx}eoClip(){this.pendingClip=yw}beginText(){this.current.textMatrix=eE,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const i=new Path2D,s=e.getTransform().invertSelf();for(const{transform:r,x:o,y:l,fontSize:c,path:u}of t)i.addPath(u,new DOMMatrix(r).preMultiplySelf(s).translate(o,l).scale(c,-c));e.clip(i),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var h;const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||Em,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&J("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const r=i.loadedName||"sans-serif",o=((h=i.systemFontInfo)==null?void 0:h.css)||`"${r}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let u=e;e<cw?u=cw:e>uw&&(u=uw),this.current.fontSizeScale=e/u,this.ctx.font=`${c} ${l} ${u}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,s,r,o){this.current.textMatrix=[t,e,i,s,r,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s,r){const o=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,d=u&Ce.FILL_STROKE_MASK,f=!!(u&Ce.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,m=l.patternStroke&&!c.missingFile;let v;if((c.disableFontFace||f||p||m)&&(v=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||p||m){if(o.save(),o.translate(e,i),o.scale(h,-h),d===Ce.FILL||d===Ce.FILL_STROKE)if(s){const _=o.getTransform();o.setTransform(...s),o.fill(S(this,_i,Qm).call(this,v,_,s))}else o.fill(v);if(d===Ce.STROKE||d===Ce.FILL_STROKE)if(r){const _=o.getTransform();o.setTransform(...r),o.stroke(S(this,_i,Qm).call(this,v,_,r))}else o.lineWidth/=h,o.stroke(v);o.restore()}else(d===Ce.FILL||d===Ce.FILL_STROKE)&&o.fillText(t,e,i),(d===Ce.STROKE||d===Ce.FILL_STROKE)&&o.strokeText(t,e,i);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Pt(o),x:e,y:i,fontSize:h,path:v})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return it(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const r=this.ctx,o=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,d=t.length,f=i.vertical,p=f?1:-1,m=i.defaultVMetrics,v=s*e.fontMatrix[0],_=e.textRenderingMode===Ce.FILL&&!i.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),u>0?r.scale(h,-1):r.scale(h,1);let y,w;if(e.patternFill){r.save();const T=e.fillColor.getPattern(r,this,xi(r),Me.FILL);y=Pt(r),r.restore(),r.fillStyle=T}if(e.patternStroke){r.save();const T=e.strokeColor.getPattern(r,this,xi(r),Me.STROKE);w=Pt(r),r.restore(),r.strokeStyle=T}let E=e.lineWidth;const b=e.textMatrixScale;if(b===0||E===0){const T=e.textRenderingMode&Ce.FILL_STROKE_MASK;(T===Ce.STROKE||T===Ce.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=b;if(o!==1&&(r.scale(o,o),E/=o),r.lineWidth=E,i.isInvalidPDFjsFont){const T=[];let P=0;for(const M of t)T.push(M.unicode),P+=M.width;r.fillText(T.join(""),0,0),e.x+=P*v*h,r.restore(),this.compose();return}let C=0,x;for(x=0;x<d;++x){const T=t[x];if(typeof T=="number"){C+=p*T*s/1e3;continue}let P=!1;const M=(T.isSpace?c:0)+l,L=T.fontChar,H=T.accent;let tt,pt,et=T.width;if(f){const D=T.vmetric||m,G=-(T.vmetric?D[1]:et*.5)*v,I=D[2]*v;et=D?-D[0]:et,tt=G/o,pt=(C+I)/o}else tt=C/o,pt=0;if(i.remeasure&&et>0){const D=r.measureText(L).width*1e3/s*o;if(et<D&&this.isFontSubpixelAAEnabled){const G=et/D;P=!0,r.save(),r.scale(G,1),tt/=G}else et!==D&&(tt+=(et-D)/2e3*s/o)}if(this.contentVisible&&(T.isInFont||i.missingFile)){if(_&&!H)r.fillText(L,tt,pt);else if(this.paintChar(L,tt,pt,y,w),H){const D=tt+s*H.offset.x/o,G=pt-s*H.offset.y/o;this.paintChar(H.fontChar,D,G,y,w)}}const Bt=f?et*v-M*u:et*v+M*u;C+=Bt,P&&r.restore()}f?e.y-=C:e.x+=C*h,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,s=i.font,r=i.fontSize,o=i.fontDirection,l=s.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,h=i.textHScale*o,d=i.fontMatrix||Em,f=t.length,p=i.textRenderingMode===Ce.INVISIBLE;let m,v,_,y;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(h,o),m=0;m<f;++m){if(v=t[m],typeof v=="number"){y=l*v*r/1e3,this.ctx.translate(y,0),i.x+=y*h;continue}const w=(v.isSpace?u:0)+c,E=s.charProcOperatorList[v.operatorListId];if(!E){J(`Type3 character "${v.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=v,this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(E),this.restore()),_=V.applyTransform([v.width,0],d)[0]*r+w,e.translate(_,0),i.x+=_*h}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,r,o){this.ctx.rect(i,s,r-i,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],s=this.baseTransform||Pt(this.ctx),r={createCanvasGraphics:o=>new Uv(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Xm(t,i,this.ctx,r,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=V.makeHexColor(t,e,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=V.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=Rx(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,xi(e),Me.SHADING);const s=xi(e);if(s){const{width:r,height:o}=e.canvas,[l,c,u,h]=V.getAxialAlignedBoundingBox([0,0,r,o],s);this.ctx.fillRect(l,c,u-l,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){At("Should not call beginInlineImage")}beginImageData(){At("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Pt(this.ctx),e)){const i=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],i,s),this.current.updateRectMinMax(Pt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Bp("TODO: Support non-isolated groups."),t.knockout&&J("Knockout groups not supported.");const i=Pt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=V.getAxialAlignedBoundingBox(t.bbox,Pt(e));const r=[0,0,e.canvas.width,e.canvas.height];s=V.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-o,-l),f.transform(...i),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,l),e.save()),kc(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Pt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=V.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,i,s,r){if(S(this,_i,qm).call(this),Nd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=l;const[c,u]=V.singularValueDecompose2dScale(Pt(this.ctx)),{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(l*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,l*u),Nd(this.ctx)}else Nd(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],o,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new fw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),S(this,_i,Km).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=Dx(t)),s.compiled)){s.compiled(i);return}const r=this._createMaskCanvas(t),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,s=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=Pt(l);l.transform(e,i,s,r,0,0);const u=this._createMaskCanvas(t);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=o.length;h<d;h+=2){const f=V.transform(c,[e,i,s,r,o[h],o[h+1]]),[p,m]=V.applyTransform([0,0],f);l.drawImage(u.canvas,p,m)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of t){const{data:o,width:l,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",l,c),d=h.context;d.save();const f=this.getObject(o,r);gw(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?i.getPattern(d,this,xi(e),Me.FILL):i,d.fillRect(0,0,l,c),d.restore(),e.save(),e.transform(...u),e.scale(1,-1),Ld(e,h.canvas,0,0,l,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){J("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){J("Dependent image isn't ready yet");return}const o=r.width,l=r.height,c=[];for(let u=0,h=s.length;u<h;u+=2)c.push({transform:[e,0,0,i,s[u],s[u+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,s=this.ctx;if(this.save(),!Ne){const{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none")}s.scale(1/e,-1/i);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const c=this.cachedCanvases.getCanvas("inlineImage",e,i).context;pw(c,t),r=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(r,xi(s));s.imageSmoothingEnabled=mw(Pt(s),t.interpolate),Ld(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;pw(c,t),s=this.applyTransferMapsToCanvas(c)}for(const r of e)i.save(),i.transform(...r.transform),i.scale(1,-1),Ld(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===yw?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Pt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:r}=this.ctx.getTransform();let o,l;if(i===0&&s===0){const c=Math.abs(e),u=Math.abs(r);if(c===u)if(t===0)o=l=1/c;else{const h=c*t;o=l=h<1?1/h:1}else if(t===0)o=1/c,l=1/u;else{const h=c*t,d=u*t;o=h<1?1/h:1,l=d<1?1/d:1}}else{const c=Math.abs(e*r-i*s),u=Math.hypot(e,i),h=Math.hypot(s,r);if(t===0)o=h/c,l=u/c;else{const d=t*c;o=h>d?h/d:1,l=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[s,r]=this.getScaleForStroking();if(e.lineWidth=i||1,s===1&&r===1){e.stroke();return}const o=e.getLineDash();if(t&&e.save(),e.scale(s,r),o.length>0){const l=Math.max(s,r);e.setLineDash(o.map(c=>c/l)),e.lineDashOffset/=l}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};_i=new WeakSet,qm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Km=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Qm=function(t,e,i){const s=new Path2D;return s.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),s};let el=Uv;for(const n in ii)el.prototype[n]!==void 0&&(el.prototype[ii[n]]=el.prototype[n]);var ah,lh;class Rs{static get workerPort(){return a(this,ah)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");g(this,ah,t)}static get workerSrc(){return a(this,lh)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");g(this,lh,t)}}ah=new WeakMap,lh=new WeakMap,A(Rs,ah,null),A(Rs,lh,"");var Ro,ch;class zx{constructor({parsedData:t,rawData:e}){A(this,Ro);A(this,ch);g(this,Ro,t),g(this,ch,e)}getRaw(){return a(this,ch)}get(t){return a(this,Ro).get(t)??null}getAll(){return Rv(a(this,Ro))}has(t){return a(this,Ro).has(t)}}Ro=new WeakMap,ch=new WeakMap;const Ia=Symbol("INTERNAL");var uh,hh,dh,Sl;class $x{constructor(t,{name:e,intent:i,usage:s,rbGroups:r}){A(this,uh,!1);A(this,hh,!1);A(this,dh,!1);A(this,Sl,!0);g(this,uh,!!(t&xn.DISPLAY)),g(this,hh,!!(t&xn.PRINT)),this.name=e,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(a(this,dh))return a(this,Sl);if(!a(this,Sl))return!1;const{print:t,view:e}=this.usage;return a(this,uh)?(e==null?void 0:e.viewState)!=="OFF":a(this,hh)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==Ia&&At("Internal method `_setVisible` called."),g(this,dh,i),g(this,Sl,e)}}uh=new WeakMap,hh=new WeakMap,dh=new WeakMap,Sl=new WeakMap;var ur,mt,El,_l,fh,Jm;class Bx{constructor(t,e=xn.DISPLAY){A(this,fh);A(this,ur,null);A(this,mt,new Map);A(this,El,null);A(this,_l,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,g(this,_l,t.order);for(const i of t.groups)a(this,mt).set(i.id,new $x(e,i));if(t.baseState==="OFF")for(const i of a(this,mt).values())i._setVisible(Ia,!1);for(const i of t.on)a(this,mt).get(i)._setVisible(Ia,!0);for(const i of t.off)a(this,mt).get(i)._setVisible(Ia,!1);g(this,El,this.getHash())}}isVisible(t){if(a(this,mt).size===0)return!0;if(!t)return Bp("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,mt).has(t.id)?a(this,mt).get(t.id).visible:(J(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return S(this,fh,Jm).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,mt).has(e))return J(`Optional content group not found: ${e}`),!0;if(a(this,mt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,mt).has(e))return J(`Optional content group not found: ${e}`),!0;if(!a(this,mt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,mt).has(e))return J(`Optional content group not found: ${e}`),!0;if(!a(this,mt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,mt).has(e))return J(`Optional content group not found: ${e}`),!0;if(a(this,mt).get(e).visible)return!1}return!0}return J(`Unknown optional content policy ${t.policy}.`),!0}return J(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var r;const s=a(this,mt).get(t);if(!s){J(`Optional content group not found: ${t}`);return}if(i&&e&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==t&&((r=a(this,mt).get(l))==null||r._setVisible(Ia,!1,!0));s._setVisible(Ia,!!e,!0),g(this,ur,null)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=a(this,mt).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}g(this,ur,null)}get hasInitialVisibility(){return a(this,El)===null||this.getHash()===a(this,El)}getOrder(){return a(this,mt).size?a(this,_l)?a(this,_l).slice():[...a(this,mt).keys()]:null}getGroups(){return a(this,mt).size>0?Rv(a(this,mt)):null}getGroup(t){return a(this,mt).get(t)||null}getHash(){if(a(this,ur)!==null)return a(this,ur);const t=new ME;for(const[e,i]of a(this,mt))t.update(`${e}:${i.visible}`);return g(this,ur,t.hexdigest())}}ur=new WeakMap,mt=new WeakMap,El=new WeakMap,_l=new WeakMap,fh=new WeakSet,Jm=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const r=t[s];let o;if(Array.isArray(r))o=S(this,fh,Jm).call(this,r);else if(a(this,mt).has(r))o=a(this,mt).get(r).visible;else return J(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class Hx{constructor(t,{disableRange:e=!1,disableStream:i=!1}){qt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(i),!0)});qt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,s,r;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){qt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Ux(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Gx(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Ux{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=Lv(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Gx{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Vx(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let h=l(e);return h=unescape(h),h=c(h),h=u(h),r(h)}if(e=o(n),e){const h=u(e);return r(h)}if(e=i("filename","i").exec(n),e){e=e[1];let h=l(e);return h=u(h),r(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Hp(d);d=f.decode(p),t=!1}catch{}}return d}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),t&&(h=s("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,v,_,y]=f;if(v=parseInt(v,10),v in d){if(v===0)break;continue}d[v]=[_,y]}const m=[];for(let v=0;v<d.length&&v in d;++v){let[_,y]=d[v];y=l(y),_&&(y=unescape(y),v===0&&(y=c(y))),m.push(y)}return m.join("")}function l(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return s(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,_){return String.fromCharCode(parseInt(_,16))}),s(f,m);try{m=atob(m)}catch{}return s(f,m)})}return""}function WE(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const s=t[i];s!==void 0&&e.append(i,s)}return e}function Vp(n){try{return new URL(n).origin}catch{}return null}function YE({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function XE(n){const t=n.get("Content-Disposition");if(t){let e=Vx(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Lv(e))return e}return null}function Wp(n,t){return n===404||n===0&&t.startsWith("file:")?new ku('Missing PDF "'+t+'".'):new Kf(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n)}function qE(n){return n===200||n===206}function KE(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function QE(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(J(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class vw{constructor(t){B(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=WE(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return qt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Wx(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Yx(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Wx{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),s=e.url;fetch(s,KE(i,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=Vp(r.url),!qE(r.status))throw Wp(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=YE({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=XE(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ur("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:QE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Yx{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${i-1}`);const o=s.url;fetch(o,KE(r,this._withCredentials,this._abortController)).then(l=>{const c=Vp(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!qE(l.status))throw Wp(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:QE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Tg=200,kg=206;function Xx(n){const t=n.response;return typeof t!="string"?t:Hp(t).buffer}class qx{constructor({url:t,httpHeaders:e,withCredentials:i}){B(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=WE(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=kg):s.expectedStatus=Tg,e.responseType="arraybuffer",qt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var s;const i=this.pendingRequests[t];i&&((s=i.onProgress)==null||s.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){i.onError(s.status);return}const r=s.status||Tg;if(!(r===Tg&&i.expectedStatus===kg)&&r!==i.expectedStatus){i.onError(s.status);return}const l=Xx(s);if(r===kg){const c=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?i.onDone({begin:parseInt(u[1],10),chunk:l}):(J('Missing or invalid "Content-Range" header.'),i.onError(0))}else l?i.onDone({begin:0,chunk:l}):i.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Kx{constructor(t){this._source=t,this._manager=new qx(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return qt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Qx(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Jx(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Qx{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Vp(e.responseURL);const i=e.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=YE({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=XE(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Wp(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Jx{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Vp((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Wp(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Zx=/^[a-z][a-z0-9\-+.]+:/i;function tT(n){if(Zx.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class eT{constructor(t){this.source=t,this.url=tT(t.url),qt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return qt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new nT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new iT(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class nT{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new ku(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ur("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class iT{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const sT=1e5,Ze=30,rT=.8;var Bw,hr,sn,ph,gh,Io,ps,mh,yh,Mo,bl,Cl,dr,xl,vh,Tl,Lo,wh,Ah,No,Do,Sh,fr,kl,Bs,JE,ZE,Zm,Mn,of,ty,t_,e_;const Jt=class Jt{constructor({textContentSource:t,container:e,viewport:i}){A(this,Bs);A(this,hr,Promise.withResolvers());A(this,sn,null);A(this,ph,!1);A(this,gh,!!((Bw=globalThis.FontInspector)!=null&&Bw.enabled));A(this,Io,null);A(this,ps,null);A(this,mh,0);A(this,yh,0);A(this,Mo,null);A(this,bl,null);A(this,Cl,0);A(this,dr,0);A(this,xl,Object.create(null));A(this,vh,[]);A(this,Tl,null);A(this,Lo,[]);A(this,wh,new WeakMap);A(this,Ah,null);var c;if(t instanceof ReadableStream)g(this,Tl,t);else if(typeof t=="object")g(this,Tl,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');g(this,sn,g(this,bl,e)),g(this,dr,i.scale*(globalThis.devicePixelRatio||1)),g(this,Cl,i.rotation),g(this,ps,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:l}=i.rawDims;g(this,Ah,[1,0,0,-1,-o,l+r]),g(this,yh,s),g(this,mh,r),S(c=Jt,Mn,t_).call(c),va(e,i),a(this,hr).promise.finally(()=>{a(Jt,kl).delete(this),g(this,ps,null),g(this,xl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=We.platform;return it(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,Mo).read().then(({value:e,done:i})=>{if(i){a(this,hr).resolve();return}a(this,Io)??g(this,Io,e.lang),Object.assign(a(this,xl),e.styles),S(this,Bs,JE).call(this,e.items),t()},a(this,hr).reject)};return g(this,Mo,a(this,Tl).getReader()),a(Jt,kl).add(this),t(),a(this,hr).promise}update({viewport:t,onBefore:e=null}){var r;const i=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==a(this,Cl)&&(e==null||e(),g(this,Cl,s),va(a(this,bl),{rotation:s})),i!==a(this,dr)){e==null||e(),g(this,dr,i);const o={div:null,properties:null,ctx:S(r=Jt,Mn,of).call(r,a(this,Io))};for(const l of a(this,Lo))o.properties=a(this,wh).get(l),o.div=l,S(this,Bs,Zm).call(this,o)}}cancel(){var e;const t=new Ur("TextLayer task cancelled.");(e=a(this,Mo))==null||e.cancel(t).catch(()=>{}),g(this,Mo,null),a(this,hr).reject(t)}get textDivs(){return a(this,Lo)}get textContentItemsStr(){return a(this,vh)}static cleanup(){if(!(a(this,kl).size>0)){a(this,No).clear();for(const{canvas:t}of a(this,Do).values())t.remove();a(this,Do).clear()}}};hr=new WeakMap,sn=new WeakMap,ph=new WeakMap,gh=new WeakMap,Io=new WeakMap,ps=new WeakMap,mh=new WeakMap,yh=new WeakMap,Mo=new WeakMap,bl=new WeakMap,Cl=new WeakMap,dr=new WeakMap,xl=new WeakMap,vh=new WeakMap,Tl=new WeakMap,Lo=new WeakMap,wh=new WeakMap,Ah=new WeakMap,No=new WeakMap,Do=new WeakMap,Sh=new WeakMap,fr=new WeakMap,kl=new WeakMap,Bs=new WeakSet,JE=function(t){var s,r;if(a(this,ph))return;(r=a(this,ps)).ctx??(r.ctx=S(s=Jt,Mn,of).call(s,a(this,Io)));const e=a(this,Lo),i=a(this,vh);for(const o of t){if(e.length>sT){J("Ignoring additional textDivs for performance reasons."),g(this,ph,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,sn);g(this,sn,document.createElement("span")),a(this,sn).classList.add("markedContent"),o.id!==null&&a(this,sn).setAttribute("id",`${o.id}`),l.append(a(this,sn))}else o.type==="endMarkedContent"&&g(this,sn,a(this,sn).parentNode);continue}i.push(o.str),S(this,Bs,ZE).call(this,o)}},ZE=function(t){var v;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,Lo).push(e);const s=V.transform(a(this,Ah),t.transform);let r=Math.atan2(s[1],s[0]);const o=a(this,xl)[t.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,gh)&&o.fontSubstitution||o.fontFamily;l=Jt.fontFamilyMap.get(l)||l;const c=Math.hypot(s[2],s[3]),u=c*S(v=Jt,Mn,e_).call(v,l,a(this,Io));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=e.style;a(this,sn)===a(this,bl)?(p.left=`${(100*h/a(this,yh)).toFixed(2)}%`,p.top=`${(100*d/a(this,mh)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(a(Jt,fr)*c).toFixed(2)}px)`,p.fontFamily=l,i.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,gh)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let m=!1;if(t.str.length>1)m=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),y=Math.abs(t.transform[3]);_!==y&&Math.max(_,y)/Math.min(_,y)>1.5&&(m=!0)}if(m&&(i.canvasWidth=o.vertical?t.height:t.width),a(this,wh).set(e,i),a(this,ps).div=e,a(this,ps).properties=i,S(this,Bs,Zm).call(this,a(this,ps)),i.hasText&&a(this,sn).append(e),i.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),a(this,sn).append(_)}},Zm=function(t){var l;const{div:e,properties:i,ctx:s}=t,{style:r}=e;let o="";if(a(Jt,fr)>1&&(o=`scale(${1/a(Jt,fr)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=i;S(l=Jt,Mn,ty).call(l,s,h*a(this,dr),c);const{width:d}=s.measureText(e.textContent);d>0&&(o=`scaleX(${u*a(this,dr)/d}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Mn=new WeakSet,of=function(t=null){let e=a(this,Do).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Do).set(t,e),a(this,Sh).set(e,{size:0,family:""})}return e},ty=function(t,e,i){const s=a(this,Sh).get(t);e===s.size&&i===s.family||(t.font=`${e}px ${i}`,s.size=e,s.family=i)},t_=function(){if(a(this,fr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),g(this,fr,t.getBoundingClientRect().height),t.remove()},e_=function(t,e){const i=a(this,No).get(t);if(i)return i;const s=S(this,Mn,of).call(this,e);s.canvas.width=s.canvas.height=Ze,S(this,Mn,ty).call(this,s,Ze,t);const r=s.measureText("");let o=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);if(o){const h=o/(o+l);return a(this,No).set(t,h),s.canvas.width=s.canvas.height=0,h}s.strokeStyle="red",s.clearRect(0,0,Ze,Ze),s.strokeText("g",0,0);let c=s.getImageData(0,0,Ze,Ze).data;l=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){l=Math.ceil(h/4/Ze);break}s.clearRect(0,0,Ze,Ze),s.strokeText("A",0,Ze),c=s.getImageData(0,0,Ze,Ze).data,o=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){o=Ze-Math.floor(h/4/Ze);break}s.canvas.width=s.canvas.height=0;const u=o?o/(o+l):rT;return a(this,No).set(t,u),u},A(Jt,Mn),A(Jt,No,new Map),A(Jt,Do,new Map),A(Jt,Sh,new WeakMap),A(Jt,fr,null),A(Jt,kl,new Set);let Pu=Jt;class Ru{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(Ru.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)s(u)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const oT=65536,aT=100,lT=5e3,cT=Ne?_x:Ax,uT=Ne?bx:$E,hT=Ne?Ex:Sx,dT=Ne?Cx:GE;function fT(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new ey,{docId:e}=t,i=n.url?pT(n.url):null,s=n.data?gT(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,c=n.range instanceof n_?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:oT;let h=n.worker instanceof nl?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Gp(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,v=n.CMapReaderFactory||uT,_=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,y=n.StandardFontDataFactory||dT,w=n.stopAtErrors!==!0,E=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,b=n.isEvalSupported!==!1,C=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Ne,x=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Ne&&(We.platform.isFirefox||!globalThis.chrome),T=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,P=typeof n.disableFontFace=="boolean"?n.disableFontFace:Ne,M=n.fontExtraProperties===!0,L=n.enableXfa===!0,H=n.ownerDocument||globalThis.document,tt=n.disableRange===!0,pt=n.disableStream===!0,et=n.disableAutoFetch===!0,Bt=n.pdfBug===!0,D=n.CanvasFactory||cT,G=n.FilterFactory||hT,I=n.enableHWA===!0,W=c?c.length:n.length??NaN,X=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Ne&&!P,ot=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:v===$E&&y===GE&&p&&_&&Oc(p,document.baseURI)&&Oc(_,document.baseURI),st=null;JC(d);const St={canvasFactory:new D({ownerDocument:H,enableHWA:I}),filterFactory:new G({docId:e,ownerDocument:H}),cMapReaderFactory:ot?null:new v({baseUrl:p,isCompressed:m}),standardFontDataFactory:ot?null:new y({baseUrl:_})};if(!h){const Tt={verbosity:d,port:Rs.workerPort};h=Tt.port?nl.fromPort(Tt):new nl(Tt),t._worker=h}const Ee={docId:e,apiVersion:"4.10.38",data:s,password:l,disableAutoFetch:et,rangeChunkSize:u,length:W,docBaseUrl:f,enableXfa:L,evaluatorOptions:{maxImageSize:E,disableFontFace:P,ignoreErrors:w,isEvalSupported:b,isOffscreenCanvasSupported:C,isImageDecoderSupported:x,canvasMaxAreaInBytes:T,fontExtraProperties:M,useSystemFonts:X,cMapUrl:ot?p:null,standardFontDataUrl:ot?_:null}},Zn={disableFontFace:P,fontExtraProperties:M,ownerDocument:H,pdfBug:Bt,styleElement:st,loadingParams:{disableAutoFetch:et,enableXfa:L}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Tt=h.messageHandler.sendWithPromise("GetDocRequest",Ee,s?[s.buffer]:null);let dt;if(c)dt=new Hx(c,{disableRange:tt,disableStream:pt});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Us;if(Ne)if(Oc(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Us=vw}else Us=eT;else Us=Oc(i)?vw:Kx;dt=new Us({url:i,length:W,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:tt,disableStream:pt})}return Tt.then(Us=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const fd=new $c(e,Us,h.port),Yp=new wT(fd,t,dt,Zn,St);t._transport=Yp,fd.send("Ready",null)})}).catch(t._capability.reject),t}function pT(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Ne&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function gT(n){if(Ne&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Hp(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ww(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var dp;const fp=class fp{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Fe(fp,dp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}};dp=new WeakMap,A(fp,dp,0);let ey=fp;class n_{constructor(t,e,i=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){At("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class mT{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return it(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var pr,gs,Wn,Ma,af;class yT{constructor(t,e,i,s=!1){A(this,Wn);A(this,pr,null);A(this,gs,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new rw:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new i_,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new cd({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return it(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:s=Qs.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var b,C;(b=this._stats)==null||b.time("Overall");const f=this._transport.getRenderingIntent(i,s,h,d),{renderingIntent:p,cacheKey:m}=f;g(this,gs,!1),S(this,Wn,af).call(this),l||(l=this._transport.getOptionalContentConfig(p));let v=this._intentStates.get(m);v||(v=Object.create(null),this._intentStates.set(m,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const _=!!(p&xn.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(f));const y=x=>{var T;v.renderTasks.delete(w),(this._maybeCleanupAfterRender||_)&&g(this,gs,!0),S(this,Wn,Ma).call(this,!_),x?(w.capability.reject(x),this._abortOperatorList({intentState:v,reason:x instanceof Error?x:new Error(x)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(T=globalThis.Stats)!=null&&T.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new iy({callback:y,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:u});(v.renderTasks||(v.renderTasks=new Set)).add(w);const E=w.task;return Promise.all([v.displayReadyCapability.promise,l]).then(([x,T])=>{var P;if(this.destroyed){y();return}if((P=this._stats)==null||P.time("Rendering"),!(T.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:x,optionalContentConfig:T}),w.operatorListChanged()}).catch(y),E}getOperatorList({intent:t="display",annotationMode:e=Qs.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,i,s,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Ru.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function r(){o.read().then(function({value:c,done:u}){if(u){i(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},s)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),g(this,gs,!1),S(this,Wn,af).call(this),Promise.all(t)}cleanup(t=!1){g(this,gs,!0);const e=S(this,Wn,Ma).call(this,!1);return t&&e&&this._stats&&(this._stats=new rw),e}_startRenderPage(t,e){var s,r;const i=this._intentStates.get(e);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&S(this,Wn,Ma).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:o}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},o).getReader(),u=this._intentStates.get(e);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();S(this,Wn,Ma).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Mv){let s=aT;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Ur(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}pr=new WeakMap,gs=new WeakMap,Wn=new WeakSet,Ma=function(t=!1){if(S(this,Wn,af).call(this),!a(this,gs)||this.destroyed)return!1;if(t)return g(this,pr,setTimeout(()=>{g(this,pr,null),S(this,Wn,Ma).call(this,!1)},lT)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),g(this,gs,!1),!0},af=function(){a(this,pr)&&(clearTimeout(a(this,pr)),g(this,pr,null))};var ms,pp;class vT{constructor(){A(this,ms,new Map);A(this,pp,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};a(this,pp).then(()=>{for(const[s]of a(this,ms))s.call(this,i)})}addEventListener(t,e,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){J("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,ms).set(e,s)}removeEventListener(t,e){const i=a(this,ms).get(e);i==null||i(),a(this,ms).delete(e)}terminate(){for(const[,t]of a(this,ms))t==null||t();a(this,ms).clear()}}ms=new WeakMap,pp=new WeakMap;var gp,Oo,Fo,Pl,lf,Rl,cf;const kt=class kt{constructor({name:t=null,port:e=null,verbosity:i=ZC()}={}){A(this,Pl);var s;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=a(kt,Fo))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(a(kt,Fo)||g(kt,Fo,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new $c("main","worker",t),this._messageHandler.on("ready",function(){}),S(this,Pl,lf).call(this)}_initialize(){if(a(kt,Oo)||a(kt,Rl,cf)){this._setupFakeWorker();return}let{workerSrc:t}=kt;try{kt._isSameOrigin(window.location.href,t)||(t=kt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new $c("main","worker",e),s=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),i.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}this._messageHandler=i,this._port=e,this._webWorker=e,S(this,Pl,lf).call(this)}),i.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const l=new Uint8Array;i.send("test",l,[l.buffer])};o();return}catch{Bp("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){a(kt,Oo)||(J("Setting up fake worker."),g(kt,Oo,!0)),kt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new vT;this._port=e;const i=`fake${Fe(kt,gp)._++}`,s=new $c(i+"_worker",i,e);t.setup(s,e),this._messageHandler=new $c(i,i+"_worker",e),S(this,Pl,lf).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,i;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=a(kt,Fo))==null||e.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=a(this,Fo))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new kt(t)}static get workerSrc(){if(Rs.workerSrc)return Rs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return it(this,"_setupFakeWorkerGlobal",(async()=>a(this,Rl,cf)?a(this,Rl,cf):(await import(this.workerSrc)).WorkerMessageHandler)())}};gp=new WeakMap,Oo=new WeakMap,Fo=new WeakMap,Pl=new WeakSet,lf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Rl=new WeakSet,cf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},A(kt,Rl),A(kt,gp,0),A(kt,Oo,!1),A(kt,Fo),Ne&&(g(kt,Oo,!0),Rs.workerSrc||(Rs.workerSrc="./pdf.worker.mjs")),kt._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const s=new URL(e,i);return i.origin===s.origin},kt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let nl=kt;var ys,zi,Il,Ml,vs,jo,Vc;class wT{constructor(t,e,i,s,r){A(this,jo);A(this,ys,new Map);A(this,zi,new Map);A(this,Il,new Map);A(this,Ml,new Map);A(this,vs,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new i_,this.fontLoader=new vx({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return it(this,"annotationStorage",new Ov)}getRenderingIntent(t,e=Qs.ENABLE,i=null,s=!1,r=!1){let o=xn.DISPLAY,l=Gm;switch(t){case"any":o=xn.ANY;break;case"display":break;case"print":o=xn.PRINT;break;default:J(`getRenderingIntent - invalid intent: ${t}`)}const c=o&xn.PRINT&&i instanceof NE?i:this.annotationStorage;switch(e){case Qs.DISABLE:o+=xn.ANNOTATIONS_DISABLE;break;case Qs.ENABLE:break;case Qs.ENABLE_FORMS:o+=xn.ANNOTATIONS_FORMS;break;case Qs.ENABLE_STORAGE:o+=xn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:J(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(o+=xn.IS_EDITING),r&&(o+=xn.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,l.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=a(this,vs))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of a(this,zi).values())t.push(s._destroy());a(this,zi).clear(),a(this,Il).clear(),a(this,Ml).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,ys).clear(),this.filterFactory.destroy(),Pu.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Ur("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{qt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}qt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(i,s)=>{qt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){s.close();return}qt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new mT(i,this))}),t.on("DocException",i=>{e._capability.reject(tn(i))}),t.on("PasswordRequest",i=>{g(this,vs,Promise.withResolvers());try{if(!e.onPassword)throw tn(i);const s=r=>{r instanceof Error?a(this,vs).reject(r):a(this,vs).resolve({password:r})};e.onPassword(s,i.code)}catch(s){a(this,vs).reject(s)}return a(this,vs).promise}),t.on("DataLoaded",i=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,zi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:l,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const p=r.error;J(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const h=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new wx(r,{disableFontFace:l,fontExtraProperties:c,inspectFont:h});this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=r;qt(f,"The imageRef must be defined.");for(const p of a(this,zi).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(i,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,r,o])=>{var c;if(this.destroyed)return;const l=a(this,zi).get(s);if(!l.objs.has(i)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":l.objs.resolve(i,o),(o==null?void 0:o.dataLen)>XC&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),t.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&J("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=a(this,Il).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,Ml).set(r.refStr,t);const o=new yT(e,r,this,this._params.pdfBug);return a(this,zi).set(e,o),o});return a(this,Il).set(e,s),s}getPageIndex(t){return ww(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return S(this,jo,Vc).call(this,"GetFieldObjects")}hasJSActions(){return S(this,jo,Vc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return S(this,jo,Vc).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return S(this,jo,Vc).call(this,"GetOptionalContentConfig").then(e=>new Bx(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,ys).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new zx(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,ys).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,zi).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,ys).clear(),this.filterFactory.destroy(!0),Pu.cleanup()}}cachedPageNumber(t){if(!ww(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,Ml).get(e)??null}}ys=new WeakMap,zi=new WeakMap,Il=new WeakMap,Ml=new WeakMap,vs=new WeakMap,jo=new WeakSet,Vc=function(t,e=null){const i=a(this,ys).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return a(this,ys).set(t,s),s};const Pc=Symbol("INITIAL_DATA");var yn,Eh,ny;class i_{constructor(){A(this,Eh);A(this,yn,Object.create(null))}get(t,e=null){if(e){const s=S(this,Eh,ny).call(this,t);return s.promise.then(()=>e(s.data)),null}const i=a(this,yn)[t];if(!i||i.data===Pc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=a(this,yn)[t];return!!e&&e.data!==Pc}delete(t){const e=a(this,yn)[t];return!e||e.data===Pc?!1:(delete a(this,yn)[t],!0)}resolve(t,e=null){const i=S(this,Eh,ny).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in a(this,yn)){const{data:i}=a(this,yn)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}g(this,yn,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,yn)){const{data:e}=a(this,yn)[t];e!==Pc&&(yield[t,e])}}}yn=new WeakMap,Eh=new WeakSet,ny=function(t){var e;return(e=a(this,yn))[t]||(e[t]={...Promise.withResolvers(),data:Pc})};var gr;class AT{constructor(t){A(this,gr,null);g(this,gr,t),this.onContinue=null}get promise(){return a(this,gr).capability.promise}cancel(t=0){a(this,gr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,gr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,gr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}gr=new WeakMap;var mr,zo;const no=class no{constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){A(this,mr,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new AT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,c;if(this.cancelled)return;if(this._canvas){if(a(no,zo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(no,zo).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:o}=this.params;this.gfx=new el(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(this,mr)&&(window.cancelAnimationFrame(a(this,mr)),g(this,mr,null)),a(no,zo).delete(this._canvas),this.callback(t||new Mv(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?g(this,mr,window.requestAnimationFrame(()=>{g(this,mr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(no,zo).delete(this._canvas),this.callback())))}};mr=new WeakMap,zo=new WeakMap,A(no,zo,new WeakSet);let iy=no;const ST="4.10.38",ET="f9bea397f";function Aw(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Rc(n){return Math.max(0,Math.min(255,255*n))}class Sw{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Rc(t),[t,t,t]}static G_HTML([t]){const e=Aw(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Rc)}static RGB_HTML(t){return`#${t.map(Aw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[Rc(1-Math.min(1,t+s)),Rc(1-Math.min(1,i+s)),Rc(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,r=1-e,o=1-i,l=Math.min(s,r,o);return["CMYK",s,r,o,l]}}class _T{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){At("Abstract method `_createSVG` called.")}}class jv extends _T{_createSVG(t){return document.createElementNS(Ji,t)}}class s_{static setupStorage(t,e,i,s,r){const o=s.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of i.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:r}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}l&&r.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){var d,f;const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,r=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const l=r!=="richText",c=t.div;if(c.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),l&&Ru.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const h=[[s,-1,o]];for(;h.length>0;){const[p,m,v]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const _=p.children[++h.at(-1)[1]];if(_===null)continue;const{name:y}=_;if(y==="#text"){const E=document.createTextNode(_.value);u.push(E),v.append(E);continue}const w=(d=_==null?void 0:_.attributes)!=null&&d.xmlns?document.createElementNS(_.attributes.xmlns,y):document.createElement(y);if(v.append(w),_.attributes&&this.setAttributes({html:w,element:_,storage:e,intent:r,linkService:i}),((f=_.children)==null?void 0:f.length)>0)h.push([_,-1,w]);else if(_.value){const E=document.createTextNode(_.value);l&&Ru.shouldBuildText(y)&&u.push(E),w.append(E)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const hd=1e3,bT=9,Aa=new WeakSet;function zr(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class CT{static create(t){switch(t.data.annotationType){case Qt.LINK:return new r_(t);case Qt.TEXT:return new xT(t);case Qt.WIDGET:switch(t.data.fieldType){case"Tx":return new TT(t);case"Btn":return t.data.radioButton?new l_(t):t.data.checkBox?new PT(t):new RT(t);case"Ch":return new IT(t);case"Sig":return new kT(t)}return new Ca(t);case Qt.POPUP:return new ry(t);case Qt.FREETEXT:return new f_(t);case Qt.LINE:return new LT(t);case Qt.SQUARE:return new NT(t);case Qt.CIRCLE:return new DT(t);case Qt.POLYLINE:return new p_(t);case Qt.CARET:return new FT(t);case Qt.INK:return new zv(t);case Qt.POLYGON:return new OT(t);case Qt.HIGHLIGHT:return new g_(t);case Qt.UNDERLINE:return new jT(t);case Qt.SQUIGGLY:return new zT(t);case Qt.STRIKEOUT:return new $T(t);case Qt.STAMP:return new m_(t);case Qt.FILEATTACHMENT:return new BT(t);default:return new Wt(t)}}}var $o,Ll,Nl,_h,sy;const Gv=class Gv{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){A(this,_h);A(this,$o,null);A(this,Ll,!1);A(this,Nl,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Gv._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;a(this,$o)||g(this,$o,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&S(this,_h,sy).call(this,e),(i=a(this,Nl))==null||i.popup.updateEdited(t)}resetEdited(){var t;a(this,$o)&&(S(this,_h,sy).call(this,a(this,$o).rect),(t=a(this,Nl))==null||t.popup.resetEdited(),g(this,$o,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Ca||(r.tabIndex=hd);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof ry){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:l,height:c}=zr(e.rect);if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(v>0||_>0){const w=`calc(${v}px * var(--scale-factor)) / calc(${_}px * var(--scale-factor))`;o.borderRadius=w}else if(this instanceof l_){const w=`calc(${l}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=w}switch(e.borderStyle.style){case Tc.SOLID:o.borderStyle="solid";break;case Tc.DASHED:o.borderStyle="dashed";break;case Tc.BEVELED:J("Unimplemented border style: beveled");break;case Tc.INSET:J("Unimplemented border style: inset");break;case Tc.UNDERLINE:o.borderBottomStyle="solid";break}const y=e.borderColor||null;y?(g(this,Ll,!0),o.borderColor=V.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):o.borderWidth=0}const u=V.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:m}=e;return e.hasOwnCanvas||m===0?(o.width=`${100*l/h}%`,o.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:o}=zr(this.data.rect);let l,c;t%180===0?(l=100*r/i,c=100*o/s):(l=100*o/i,c=100*r/s),e.style.width=`${l}%`,e.style.height=`${c}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const r=s.detail[e],o=r[0],l=r.slice(1);s.target.style[i]=Sw[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[i]:Sw[`${o}_rgb`](l)})};return it(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||i[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,r]of Object.entries(e)){const o=i[s];if(o){const l={detail:{[s]:r},target:t};o(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,r]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,_,y,w]=t.subarray(2,6);if(s===v&&r===_&&e===y&&i===w)return}const{style:o}=this.container;let l;if(a(this,Ll)){const{borderColor:v,borderWidth:_}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const c=s-e,u=r-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let v=2,_=t.length;v<_;v+=8){const y=t[v],w=t[v+1],E=t[v+2],b=t[v+3],C=h.createElement("rect"),x=(E-e)/c,T=(r-w)/u,P=(y-E)/c,M=(w-b)/u;C.setAttribute("x",x),C.setAttribute("y",T),C.setAttribute("width",P),C.setAttribute("height",M),p.append(C),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${x}" y="${T}" width="${P}" height="${M}"/>`)}a(this,Ll)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:t}=this,e=g(this,Nl,new ry({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){At("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:o,exportValues:l}of s){if(r===-1||o===e)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Aa.has(u)){J(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:c,domElement:u})}return i}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==e&&Aa.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};$o=new WeakMap,Ll=new WeakMap,Nl=new WeakMap,_h=new WeakSet,sy=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;i==null||i.splice(0,4,...t);const{width:u,height:h}=zr(t);e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,s===0?(e.width=`${100*u/r}%`,e.height=`${100*h/o}%`):this.setRotation(s)};let Wt=Gv;var kn,Jr,o_,a_;class r_ extends Wt{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});A(this,kn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(i.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action),r=!0):e.attachment?(S(this,kn,o_).call(this,s,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(S(this,kn,a_).call(this,s,e.setOCGState),r=!0):e.dest?(this._bindLink(s,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&S(this,kn,Jr).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),S(this,kn,Jr).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),S(this,kn,Jr).call(this)}_bindResetFormAction(e,i){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),S(this,kn,Jr).call(this),!this._fieldObjects){J('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:l}=i,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:v}of m)f.add(v)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===l&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const v=f.defaultValue||"";u.setValue(p,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;u.setValue(p,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";u.setValue(p,{value:v});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Aa.has(m)){J(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}kn=new WeakSet,Jr=function(){this.container.setAttribute("data-internal-link","")},o_=function(e,i,s=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,s),!1},S(this,kn,Jr).call(this)},a_=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),S(this,kn,Jr).call(this)};class xT extends Wt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ca extends Wt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return We.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,r){i.includes("mouse")?t.addEventListener(i,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{var l;if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(t,e,i,s){var r,o,l;for(const[c,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":V.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||bT,r=t.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(Eg*s))||1,d=u/h;o=Math.min(s,c(d/Eg))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,c(u/Eg))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=V.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class TT extends Ca{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Aa.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=hd,this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";i.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",p=>{var v;if(h.focused)return;const{target:m}=p;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(v){h.userValue=v.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),v.target.value=h.userValue},formattedValue(v){const{formattedValue:_}=v.detail;h.formattedValue=_,_!=null&&v.target!==document.activeElement&&(v.target.value=_),t.setValue(e,{formattedValue:_})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var E;const{charLimit:_}=v.detail,{target:y}=v;if(_===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",_);let w=h.userValue;!w||w.length<=_||(w=w.slice(0,_),y.value=h.userValue=w,t.setValue(e,{value:w}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),i.addEventListener("keydown",p=>{var _;h.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:v}=p.target;h.lastCommittedValue!==v&&(h.lastCommittedValue=v,h.userValue=v,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",p=>{var v,_;if(!h.focused||!p.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(h.focused=!1);const{value:m}=p.target;h.userValue=m,h.lastCommittedValue!==m&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",p=>{var C;h.lastCommittedValue=null;const{data:m,target:v}=p,{value:_,selectionStart:y,selectionEnd:w}=v;let E=y,b=w;switch(p.inputType){case"deleteWordBackward":{const x=_.substring(0,y).match(/\w*[^\w]*$/);x&&(E-=x[0].length);break}case"deleteWordForward":{const x=_.substring(y).match(/^[^\w]*\w*/);x&&(b+=x[0].length);break}case"deleteContentBackward":y===w&&(E-=1);break;case"deleteContentForward":y===w&&(b+=1);break}p.preventDefault(),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,change:m||"",willCommit:!1,selStart:E,selEnd:b}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class kT extends Ca{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class PT extends Ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Aa.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=hd,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i)){const h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class l_ extends Ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Aa.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=hd,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class RT extends r_{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class IT extends Ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Aa.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=hd;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const v of s.options)v.selected=m.has(v.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,m=f.detail.remove;p[m].selected=!1,s.remove(m),p.length>0&&Array.prototype.findIndex.call(p,_=>_.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:p,displayValue:m,exportValue:v}=f.detail.insert,_=s.children[p],y=document.createElement("option");y.textContent=m,y.value=v,_?_.before(y):s.append(y),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const m of p){const{displayValue:v,exportValue:_}=m,y=document.createElement("option");y.textContent=v,y.value=_,s.append(y)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var p;const d=l(!0),f=l(!1);t.setValue(e,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class ry extends Wt{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:Wt._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new MT({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${Iv}${i}`).join(",")),this.container}}var Dl,mp,yp,Ol,Bo,zt,ws,Fl,bh,Ch,jl,As,li,Ss,xh,Es,Th,Ho,Uo,wt,uf,oy,c_,u_,h_,d_,hf,df,ay;class MT{constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:u,parentRect:h,open:d}){A(this,wt);A(this,Dl,S(this,wt,h_).bind(this));A(this,mp,S(this,wt,ay).bind(this));A(this,yp,S(this,wt,df).bind(this));A(this,Ol,S(this,wt,hf).bind(this));A(this,Bo,null);A(this,zt,null);A(this,ws,null);A(this,Fl,null);A(this,bh,null);A(this,Ch,null);A(this,jl,null);A(this,As,!1);A(this,li,null);A(this,Ss,null);A(this,xh,null);A(this,Es,null);A(this,Th,null);A(this,Ho,null);A(this,Uo,!1);var f;g(this,zt,t),g(this,Th,s),g(this,ws,o),g(this,Es,l),g(this,Ch,c),g(this,Bo,e),g(this,xh,u),g(this,jl,h),g(this,bh,i),g(this,Fl,Nv.toDateObject(r)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",a(this,Ol)),p.addEventListener("mouseenter",a(this,yp)),p.addEventListener("mouseleave",a(this,mp)),p.classList.add("popupTriggerArea");for(const p of i)(f=p.container)==null||f.addEventListener("keydown",a(this,Dl));a(this,zt).hidden=!0,d&&S(this,wt,hf).call(this)}render(){if(a(this,li))return;const t=g(this,li,document.createElement("div"));if(t.className="popup",a(this,Bo)){const r=t.style.outlineColor=V.makeHexColor(...a(this,Bo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=V.makeHexColor(...a(this,Bo).map(l=>Math.floor(.7*(255-l)+l)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=a(this,Th),t.append(e),a(this,Fl)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Fl).valueOf()})),e.append(r)}const s=a(this,wt,uf);if(s)s_.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(a(this,ws));t.append(r)}a(this,zt).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const l=s[r];i.append(document.createTextNode(l)),r<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;a(this,Ho)||g(this,Ho,{contentsObj:a(this,ws),richText:a(this,Es)}),t&&g(this,Ss,null),e&&(g(this,Es,S(this,wt,u_).call(this,e)),g(this,ws,null)),(i=a(this,li))==null||i.remove(),g(this,li,null)}resetEdited(){var t;a(this,Ho)&&({contentsObj:Fe(this,ws)._,richText:Fe(this,Es)._}=a(this,Ho),g(this,Ho,null),(t=a(this,li))==null||t.remove(),g(this,li,null),g(this,Ss,null))}forceHide(){g(this,Uo,this.isVisible),a(this,Uo)&&(a(this,zt).hidden=!0)}maybeShow(){a(this,Uo)&&(a(this,li)||S(this,wt,df).call(this),g(this,Uo,!1),a(this,zt).hidden=!1)}get isVisible(){return a(this,zt).hidden===!1}}Dl=new WeakMap,mp=new WeakMap,yp=new WeakMap,Ol=new WeakMap,Bo=new WeakMap,zt=new WeakMap,ws=new WeakMap,Fl=new WeakMap,bh=new WeakMap,Ch=new WeakMap,jl=new WeakMap,As=new WeakMap,li=new WeakMap,Ss=new WeakMap,xh=new WeakMap,Es=new WeakMap,Th=new WeakMap,Ho=new WeakMap,Uo=new WeakMap,wt=new WeakSet,uf=function(){const t=a(this,Es),e=a(this,ws);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,Es).html||null},oy=function(){var t,e,i;return((i=(e=(t=a(this,wt,uf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},c_=function(){var t,e,i;return((i=(e=(t=a(this,wt,uf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},u_=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:a(this,wt,c_),fontSize:a(this,wt,oy)?`calc(${a(this,wt,oy)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return i},h_=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,As))&&S(this,wt,hf).call(this)},d_=function(){if(a(this,Ss)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:r}}}=a(this,Ch);let o=!!a(this,jl),l=o?a(this,jl):a(this,xh);for(const m of a(this,bh))if(!l||V.intersect(m.data.rect,l)!==null){l=m.data.rect,o=!0;break}const c=V.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),h=o?l[2]-l[0]+5:0,d=c[0]+h,f=c[1];g(this,Ss,[100*(d-s)/e,100*(f-r)/i]);const{style:p}=a(this,zt);p.left=`${a(this,Ss)[0]}%`,p.top=`${a(this,Ss)[1]}%`},hf=function(){g(this,As,!a(this,As)),a(this,As)?(S(this,wt,df).call(this),a(this,zt).addEventListener("click",a(this,Ol)),a(this,zt).addEventListener("keydown",a(this,Dl))):(S(this,wt,ay).call(this),a(this,zt).removeEventListener("click",a(this,Ol)),a(this,zt).removeEventListener("keydown",a(this,Dl)))},df=function(){a(this,li)||this.render(),this.isVisible?a(this,As)&&a(this,zt).classList.add("focused"):(S(this,wt,d_).call(this),a(this,zt).hidden=!1,a(this,zt).style.zIndex=parseInt(a(this,zt).style.zIndex)+1e3)},ay=function(){a(this,zt).classList.remove("focused"),!(a(this,As)||!this.isVisible)&&(a(this,zt).hidden=!0,a(this,zt).style.zIndex=parseInt(a(this,zt).style.zIndex)-1e3)};class f_ extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Q.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var kh;class LT extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,kh,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:s}=zr(e.rect),r=this.svgFactory.create(i,s,!0),o=g(this,kh,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,kh)}addHighlightArea(){this.container.classList.add("highlightArea")}}kh=new WeakMap;var Ph;class NT extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,Ph,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:s}=zr(e.rect),r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,l=g(this,Ph,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",i-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ph)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ph=new WeakMap;var Rh;class DT extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,Rh,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:s}=zr(e.rect),r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,l=g(this,Rh,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",i/2),l.setAttribute("cy",s/2),l.setAttribute("rx",i/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Rh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rh=new WeakMap;var Ih;class p_ extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,Ih,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:s,popupRef:r}}=this;if(!i)return this.container;const{width:o,height:l}=zr(e),c=this.svgFactory.create(o,l,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const p=i[d]-e[0],m=e[3]-i[d+1];u.push(`${p},${m}`)}u=u.join(" ");const h=g(this,Ih,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ih=new WeakMap;class OT extends p_{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class FT extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Mh,Go,Lh,ly;class zv extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,Lh);A(this,Mh,null);A(this,Go,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Q.HIGHLIGHT:Q.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:u}=S(this,Lh,ly).call(this,i,e),h=this.svgFactory.create(c,u,!0),d=g(this,Mh,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,p=s.length;f<p;f++){const m=this.svgFactory.createElement(this.svgElementName);a(this,Go).push(m),m.setAttribute("points",s[f].join(",")),d.append(m)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:s,rect:r}=e,o=a(this,Mh);if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let l=0,c=a(this,Go).length;l<c;l++)a(this,Go)[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:c,height:u}=S(this,Lh,ly).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,Go)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mh=new WeakMap,Go=new WeakMap,Lh=new WeakSet,ly=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class g_ extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Q.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class jT extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class zT extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class $T extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class m_ extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Q.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Nh,Dh,cy;class BT extends Wt{constructor(e){var s;super(e,{isRenderable:!0});A(this,Dh);A(this,Nh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",S(this,Dh,cy).bind(this)),g(this,Nh,s);const{isMac:r}=We.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&S(this,Dh,cy).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return a(this,Nh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nh=new WeakMap,Dh=new WeakSet,cy=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Oh,Vo,Wo,Fh,Ea,y_,uy;class HT{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:l}){A(this,Ea);A(this,Oh,null);A(this,Vo,null);A(this,Wo,new Map);A(this,Fh,null);this.div=t,g(this,Oh,e),g(this,Vo,i),g(this,Fh,l||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return a(this,Wo).size>0}async render(t){var o;const{annotations:e}=t,i=this.div;va(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new jv,annotationStorage:t.annotationStorage||new Ov,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===Qt.POPUP;if(c){const d=s.get(l.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=zr(l.rect);if(d<=0||f<=0)continue}r.data=l;const u=CT.create(r);if(!u.isRenderable)continue;if(!c&&l.popupRef){const d=s.get(l.popupRef);d?d.push(u):s.set(l.popupRef,[u])}const h=u.render();l.hidden&&(h.style.visibility="hidden"),await S(this,Ea,y_).call(this,h,l.id),u._isEditable&&(a(this,Wo).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}S(this,Ea,uy).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,va(e,{rotation:t.rotation}),S(this,Ea,uy).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Wo).values())}getEditableAnnotation(t){return a(this,Wo).get(t)}}Oh=new WeakMap,Vo=new WeakMap,Wo=new WeakMap,Fh=new WeakMap,Ea=new WeakSet,y_=async function(t,e){var o,l;const i=t.firstChild||t,s=i.id=`${Iv}${e}`,r=await((o=a(this,Fh))==null?void 0:o.getAriaAttributes(s));if(r)for(const[c,u]of r)i.setAttribute(c,u);this.div.append(t),(l=a(this,Oh))==null||l.moveElementInDOM(this.div,t,i,!1)},uy=function(){if(!a(this,Vo))return;const t=this.div;for(const[e,i]of a(this,Vo)){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i)}a(this,Vo).clear()};const Dd=/\r\n?|\n/g;var ci,vn,jh,Yo,wn,Kt,v_,w_,A_,ff,Ds,pf,gf,S_,dy,E_;const Et=class Et extends Dt{constructor(e){super({...e,name:"freeTextEditor"});A(this,Kt);A(this,ci);A(this,vn,"");A(this,jh,`${this.id}-editor`);A(this,Yo,null);A(this,wn);g(this,ci,e.color||Et._defaultColor||Dt._defaultLineColor),g(this,wn,e.fontSize||Et._defaultFontSize)}static get _keyboardManager(){const e=Et.prototype,i=o=>o.isEmpty(),s=wa.TRANSLATE_SMALL,r=wa.TRANSLATE_BIG;return it(this,"_keyboardManager",new ud([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(e,i){Dt.initialize(e,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case at.FREETEXT_SIZE:Et._defaultFontSize=i;break;case at.FREETEXT_COLOR:Et._defaultColor=i;break}}updateParams(e,i){switch(e){case at.FREETEXT_SIZE:S(this,Kt,v_).call(this,i);break;case at.FREETEXT_COLOR:S(this,Kt,w_).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[at.FREETEXT_SIZE,Et._defaultFontSize],[at.FREETEXT_COLOR,Et._defaultColor||Dt._defaultLineColor]]}get propertiesToUpdate(){return[[at.FREETEXT_SIZE,a(this,wn)],[at.FREETEXT_COLOR,a(this,ci)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Et._internalPadding*e,-(Et._internalPadding+a(this,wn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Q.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),g(this,Yo,new AbortController);const e=this._uiManager.combinedSignal(a(this,Yo));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,jh)),this._isDraggable=!0,(e=a(this,Yo))==null||e.abort(),g(this,Yo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,vn),i=g(this,vn,S(this,Kt,A_).call(this).trimEnd());if(e===i)return;const s=r=>{if(g(this,vn,r),!r){this.remove();return}S(this,Kt,gf).call(this),this._uiManager.rebuild(this),S(this,Kt,ff).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(e)},mustExec:!1}),S(this,Kt,ff).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Et._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,jh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${a(this,wn)}px * var(--scale-factor))`,s.color=a(this,ci),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Qf(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,v;switch(this.rotation){case 0:m=e+(l[0]-f)/h,v=i+this.height-(l[1]-p)/d;break;case 90:m=e+(l[0]-f)/h,v=i-(l[1]-p)/d,[c,u]=[u,-c];break;case 180:m=e-this.width+(l[0]-f)/h,v=i-(l[1]-p)/d,[c,u]=[-c,-u];break;case 270:m=e+(l[0]-f-this.height*d)/h,v=i+(l[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(m*r,v*o,c,u)}else this.setAt(e*r,i*o,this.width*r,this.height*o);S(this,Kt,gf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var m,v,_;const i=e.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=S(m=Et,Ds,dy).call(m,i.getData("text")||"").replaceAll(Dd,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const y=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Dd,"")),y!==this.editorDiv){let w=h;for(const E of this.editorDiv.childNodes){if(E===y){w=d;continue}w.push(S(v=Et,Ds,pf).call(v,E))}}h.push(c.nodeValue.slice(0,u).replaceAll(Dd,""))}else if(c===this.editorDiv){let y=h,w=0;for(const E of this.editorDiv.childNodes)w++===u&&(y=d),y.push(S(_=Et,Ds,pf).call(_,E))}g(this,vn,`${h.join(`
`)}${r}${d.join(`
`)}`),S(this,Kt,gf).call(this);const f=new Range;let p=h.reduce((y,w)=>y+w.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(p<=w){f.setStart(y,p),f.setEnd(y,p);break}p-=w}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,s){var l;let r=null;if(e instanceof f_){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:m,textPosition:v,parent:{page:{pageNumber:_}}}=e;if(!m||m.length===0)return null;r=e={annotationType:Q.FREETEXT,color:Array.from(u),fontSize:c,value:m.join(`
`),position:v,pageIndex:_-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(e,i,s);return g(o,wn,e.fontSize),g(o,ci,V.makeHexColor(...e.color)),g(o,vn,S(l=Et,Ds,dy).call(l,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Et._internalPadding*this.parentScale,s=this.getRect(i,i),r=Dt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,ci)),o={annotationType:Q.FREETEXT,color:r,fontSize:a(this,wn),value:S(this,Kt,S_).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!S(this,Kt,E_).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${a(this,wn)}px * var(--scale-factor))`,s.color=a(this,ci),i.replaceChildren();for(const o of a(this,vn).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),i.append(l)}const r=Et._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:a(this,vn)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};ci=new WeakMap,vn=new WeakMap,jh=new WeakMap,Yo=new WeakMap,wn=new WeakMap,Kt=new WeakSet,v_=function(e){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-a(this,wn))*this.parentScale),g(this,wn,r),S(this,Kt,ff).call(this)},s=a(this,wn);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},w_=function(e){const i=r=>{g(this,ci,this.editorDiv.style.color=r)},s=a(this,ci);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},A_=function(){var s;const e=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(S(s=Et,Ds,pf).call(s,r)),i=r);return e.join(`
`)},ff=function(){const[e,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/i):(this.width=s.height/e,this.height=s.width/i),this.fixAndSetPosition()},Ds=new WeakSet,pf=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Dd,"")},gf=function(){if(this.editorDiv.replaceChildren(),!!a(this,vn))for(const e of a(this,vn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},S_=function(){return a(this,vn).replaceAll(""," ")},dy=function(e){return e.replaceAll(" ","")},E_=function(e){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==i||e.fontSize!==s||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o},A(Et,Ds),B(Et,"_freeTextDefaultContent",""),B(Et,"_internalPadding",0),B(Et,"_defaultColor",null),B(Et,"_defaultFontSize",10),B(Et,"_type","freetext"),B(Et,"_editorType",Q.FREETEXT);let hy=Et;class j{toSVGPath(){At("Abstract method `toSVGPath` must be implemented.")}get box(){At("Abstract getter `box` must be implemented.")}serialize(t,e){At("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*s,o[l+1]=i+t[l+1]*r;return o}static _rescaleAndSwap(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*s,o[l+1]=i+t[l]*r;return o}static _translate(t,e,i,s){s||(s=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)s[r]=e+t[r],s[r+1]=i+t[r+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,s,r){switch(r){case 90:return[1-e/i,t/s];case 180:return[1-t/i,1-e/s];case 270:return[e/i,1-t/s];default:return[t/i,e/s]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,s,r,o){return[(t+5*i)/6,(e+5*s)/6,(5*i+r)/6,(5*s+o)/6,(i+r)/2,(s+o)/2]}}B(j,"PRECISION",1e-4);var An,ui,zl,$l,$i,nt,Xo,qo,zh,$h,Bl,Hl,yr,Bh,vp,wp,ie,Wc,__,b_,C_,x_,T_,k_;const is=class is{constructor({x:t,y:e},i,s,r,o,l=0){A(this,ie);A(this,An);A(this,ui,[]);A(this,zl);A(this,$l);A(this,$i,[]);A(this,nt,new Float32Array(18));A(this,Xo);A(this,qo);A(this,zh);A(this,$h);A(this,Bl);A(this,Hl);A(this,yr,[]);g(this,An,i),g(this,Hl,r*s),g(this,$l,o),a(this,nt).set([NaN,NaN,NaN,NaN,t,e],6),g(this,zl,l),g(this,$h,a(is,Bh)*s),g(this,zh,a(is,wp)*s),g(this,Bl,s),a(this,yr).push(t,e)}isEmpty(){return isNaN(a(this,nt)[8])}add({x:t,y:e}){var M;g(this,Xo,t),g(this,qo,e);const[i,s,r,o]=a(this,An);let[l,c,u,h]=a(this,nt).subarray(8,12);const d=t-u,f=e-h,p=Math.hypot(d,f);if(p<a(this,zh))return!1;const m=p-a(this,$h),v=m/p,_=v*d,y=v*f;let w=l,E=c;l=u,c=h,u+=_,h+=y,(M=a(this,yr))==null||M.push(t,e);const b=-y/m,C=_/m,x=b*a(this,Hl),T=C*a(this,Hl);return a(this,nt).set(a(this,nt).subarray(2,8),0),a(this,nt).set([u+x,h+T],4),a(this,nt).set(a(this,nt).subarray(14,18),12),a(this,nt).set([u-x,h-T],16),isNaN(a(this,nt)[6])?(a(this,$i).length===0&&(a(this,nt).set([l+x,c+T],2),a(this,$i).push(NaN,NaN,NaN,NaN,(l+x-i)/r,(c+T-s)/o),a(this,nt).set([l-x,c-T],14),a(this,ui).push(NaN,NaN,NaN,NaN,(l-x-i)/r,(c-T-s)/o)),a(this,nt).set([w,E,l,c,u,h],6),!this.isEmpty()):(a(this,nt).set([w,E,l,c,u,h],6),Math.abs(Math.atan2(E-c,w-l)-Math.atan2(y,_))<Math.PI/2?([l,c,u,h]=a(this,nt).subarray(2,6),a(this,$i).push(NaN,NaN,NaN,NaN,((l+u)/2-i)/r,((c+h)/2-s)/o),[l,c,w,E]=a(this,nt).subarray(14,18),a(this,ui).push(NaN,NaN,NaN,NaN,((w+l)/2-i)/r,((E+c)/2-s)/o),!0):([w,E,l,c,u,h]=a(this,nt).subarray(0,6),a(this,$i).push(((w+5*l)/6-i)/r,((E+5*c)/6-s)/o,((5*l+u)/6-i)/r,((5*c+h)/6-s)/o,((l+u)/2-i)/r,((c+h)/2-s)/o),[u,h,l,c,w,E]=a(this,nt).subarray(12,18),a(this,ui).push(((w+5*l)/6-i)/r,((E+5*c)/6-s)/o,((5*l+u)/6-i)/r,((5*c+h)/6-s)/o,((l+u)/2-i)/r,((c+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,$i),e=a(this,ui);if(isNaN(a(this,nt)[6])&&!this.isEmpty())return S(this,ie,__).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);S(this,ie,C_).call(this,i);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return S(this,ie,b_).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,s,r,o){return new P_(t,e,i,s,r,o)}getOutlines(){var d;const t=a(this,$i),e=a(this,ui),i=a(this,nt),[s,r,o,l]=a(this,An),c=new Float32Array((((d=a(this,yr))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(a(this,yr)[f]-s)/o,c[f+1]=(a(this,yr)[f+1]-r)/l;if(c[c.length-2]=(a(this,Xo)-s)/o,c[c.length-1]=(a(this,qo)-r)/l,isNaN(i[6])&&!this.isEmpty())return S(this,ie,x_).call(this,c);const u=new Float32Array(a(this,$i).length+24+a(this,ui).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=S(this,ie,k_).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+p],u[h+1]=e[f+p+1],h+=2}return S(this,ie,T_).call(this,u,h),this.newFreeDrawOutline(u,c,a(this,An),a(this,Bl),a(this,zl),a(this,$l))}};An=new WeakMap,ui=new WeakMap,zl=new WeakMap,$l=new WeakMap,$i=new WeakMap,nt=new WeakMap,Xo=new WeakMap,qo=new WeakMap,zh=new WeakMap,$h=new WeakMap,Bl=new WeakMap,Hl=new WeakMap,yr=new WeakMap,Bh=new WeakMap,vp=new WeakMap,wp=new WeakMap,ie=new WeakSet,Wc=function(){const t=a(this,nt).subarray(4,6),e=a(this,nt).subarray(16,18),[i,s,r,o]=a(this,An);return[(a(this,Xo)+(t[0]-e[0])/2-i)/r,(a(this,qo)+(t[1]-e[1])/2-s)/o,(a(this,Xo)+(e[0]-t[0])/2-i)/r,(a(this,qo)+(e[1]-t[1])/2-s)/o]},__=function(){const[t,e,i,s]=a(this,An),[r,o,l,c]=S(this,ie,Wc).call(this);return`M${(a(this,nt)[2]-t)/i} ${(a(this,nt)[3]-e)/s} L${(a(this,nt)[4]-t)/i} ${(a(this,nt)[5]-e)/s} L${r} ${o} L${l} ${c} L${(a(this,nt)[16]-t)/i} ${(a(this,nt)[17]-e)/s} L${(a(this,nt)[14]-t)/i} ${(a(this,nt)[15]-e)/s} Z`},b_=function(t){const e=a(this,ui);t.push(`L${e[4]} ${e[5]} Z`)},C_=function(t){const[e,i,s,r]=a(this,An),o=a(this,nt).subarray(4,6),l=a(this,nt).subarray(16,18),[c,u,h,d]=S(this,ie,Wc).call(this);t.push(`L${(o[0]-e)/s} ${(o[1]-i)/r} L${c} ${u} L${h} ${d} L${(l[0]-e)/s} ${(l[1]-i)/r}`)},x_=function(t){const e=a(this,nt),[i,s,r,o]=a(this,An),[l,c,u,h]=S(this,ie,Wc).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-i)/r,(e[3]-s)/o,NaN,NaN,NaN,NaN,(e[4]-i)/r,(e[5]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-i)/r,(e[17]-s)/o,NaN,NaN,NaN,NaN,(e[14]-i)/r,(e[15]-s)/o],0),this.newFreeDrawOutline(d,t,a(this,An),a(this,Bl),a(this,zl),a(this,$l))},T_=function(t,e){const i=a(this,ui);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},k_=function(t,e){const i=a(this,nt).subarray(4,6),s=a(this,nt).subarray(16,18),[r,o,l,c]=a(this,An),[u,h,d,f]=S(this,ie,Wc).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c],e),e+=24},A(is,Bh,8),A(is,vp,2),A(is,wp,a(is,Bh)+a(is,vp));let tp=is;var Ul,Ko,_s,Hh,Sn,Uh,Gt,Ap,R_;class P_ extends j{constructor(e,i,s,r,o,l){super();A(this,Ap);A(this,Ul);A(this,Ko,new Float32Array(4));A(this,_s);A(this,Hh);A(this,Sn);A(this,Uh);A(this,Gt);g(this,Gt,e),g(this,Sn,i),g(this,Ul,s),g(this,Uh,r),g(this,_s,o),g(this,Hh,l),this.lastPoint=[NaN,NaN],S(this,Ap,R_).call(this,l);const[c,u,h,d]=a(this,Ko);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-c)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const e=[`M${a(this,Gt)[4]} ${a(this,Gt)[5]}`];for(let i=6,s=a(this,Gt).length;i<s;i+=6){if(isNaN(a(this,Gt)[i])){e.push(`L${a(this,Gt)[i+4]} ${a(this,Gt)[i+5]}`);continue}e.push(`C${a(this,Gt)[i]} ${a(this,Gt)[i+1]} ${a(this,Gt)[i+2]} ${a(this,Gt)[i+3]} ${a(this,Gt)[i+4]} ${a(this,Gt)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,s,r],o){const l=s-e,c=r-i;let u,h;switch(o){case 0:u=j._rescale(a(this,Gt),e,r,l,-c),h=j._rescale(a(this,Sn),e,r,l,-c);break;case 90:u=j._rescaleAndSwap(a(this,Gt),e,i,l,c),h=j._rescaleAndSwap(a(this,Sn),e,i,l,c);break;case 180:u=j._rescale(a(this,Gt),s,i,-l,c),h=j._rescale(a(this,Sn),s,i,-l,c);break;case 270:u=j._rescaleAndSwap(a(this,Gt),s,r,-l,-c),h=j._rescaleAndSwap(a(this,Sn),s,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return a(this,Ko)}newOutliner(e,i,s,r,o,l=0){return new tp(e,i,s,r,o,l)}getNewOutline(e,i){const[s,r,o,l]=a(this,Ko),[c,u,h,d]=a(this,Ul),f=o*h,p=l*d,m=s*h+c,v=r*d+u,_=this.newOutliner({x:a(this,Sn)[0]*f+m,y:a(this,Sn)[1]*p+v},a(this,Ul),a(this,Uh),e,a(this,Hh),i??a(this,_s));for(let y=2;y<a(this,Sn).length;y+=2)_.add({x:a(this,Sn)[y]*f+m,y:a(this,Sn)[y+1]*p+v});return _.getOutlines()}}Ul=new WeakMap,Ko=new WeakMap,_s=new WeakMap,Hh=new WeakMap,Sn=new WeakMap,Uh=new WeakMap,Gt=new WeakMap,Ap=new WeakSet,R_=function(e){const i=a(this,Gt);let s=i[4],r=i[5],o=s,l=r,c=s,u=r,h=s,d=r;const f=e?Math.max:Math.min;for(let m=6,v=i.length;m<v;m+=6){if(isNaN(i[m]))o=Math.min(o,i[m+4]),l=Math.min(l,i[m+5]),c=Math.max(c,i[m+4]),u=Math.max(u,i[m+5]),d<i[m+5]?(h=i[m+4],d=i[m+5]):d===i[m+5]&&(h=f(h,i[m+4]));else{const _=V.bezierBoundingBox(s,r,...i.slice(m,m+6));o=Math.min(o,_[0]),l=Math.min(l,_[1]),c=Math.max(c,_[2]),u=Math.max(u,_[3]),d<_[3]?(h=_[2],d=_[3]):d===_[3]&&(h=f(h,_[2]))}s=i[m+4],r=i[m+5]}const p=a(this,Ko);p[0]=o-a(this,_s),p[1]=l-a(this,_s),p[2]=c-o+2*a(this,_s),p[3]=u-l+2*a(this,_s),this.lastPoint=[h,d]};var Gh,Vh,vr,hi,Xe,I_,mf,M_,L_,py;class fy{constructor(t,e=0,i=0,s=!0){A(this,Xe);A(this,Gh);A(this,Vh);A(this,vr,[]);A(this,hi,[]);let r=1/0,o=-1/0,l=1/0,c=-1/0;const u=10**-4;for(const{x:_,y,width:w,height:E}of t){const b=Math.floor((_-e)/u)*u,C=Math.ceil((_+w+e)/u)*u,x=Math.floor((y-e)/u)*u,T=Math.ceil((y+E+e)/u)*u,P=[b,x,T,!0],M=[C,x,T,!1];a(this,vr).push(P,M),r=Math.min(r,b),o=Math.max(o,C),l=Math.min(l,x),c=Math.max(c,T)}const h=o-r+2*i,d=c-l+2*i,f=r-i,p=l-i,m=a(this,vr).at(s?-1:-2),v=[m[0],m[2]];for(const _ of a(this,vr)){const[y,w,E]=_;_[0]=(y-f)/h,_[1]=(w-p)/d,_[2]=(E-p)/d}g(this,Gh,new Float32Array([f,p,h,d])),g(this,Vh,v)}getOutlines(){a(this,vr).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of a(this,vr))e[3]?(t.push(...S(this,Xe,py).call(this,e)),S(this,Xe,M_).call(this,e)):(S(this,Xe,L_).call(this,e),t.push(...S(this,Xe,py).call(this,e)));return S(this,Xe,I_).call(this,t)}}Gh=new WeakMap,Vh=new WeakMap,vr=new WeakMap,hi=new WeakMap,Xe=new WeakSet,I_=function(t){const e=[],i=new Set;for(const o of t){const[l,c,u]=o;e.push([l,c,o],[l,u,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],u=e[o+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[l,c,u,h,d]=o;i.delete(o);let f=l,p=c;for(r=[l,u],s.push(r);;){let m;if(i.has(h))m=h;else if(i.has(d))m=d;else break;i.delete(m),[l,c,u,h,d]=m,f!==l&&(r.push(f,p,l,p===c?c:u),f=l),p=p===c?u:c}r.push(f,p)}return new UT(s,a(this,Gh),a(this,Vh))},mf=function(t){const e=a(this,hi);let i=0,s=e.length-1;for(;i<=s;){const r=i+s>>1,o=e[r][0];if(o===t)return r;o<t?i=r+1:s=r-1}return s+1},M_=function([,t,e]){const i=S(this,Xe,mf).call(this,t);a(this,hi).splice(i,0,[t,e])},L_=function([,t,e]){const i=S(this,Xe,mf).call(this,t);for(let s=i;s<a(this,hi).length;s++){const[r,o]=a(this,hi)[s];if(r!==t)break;if(r===t&&o===e){a(this,hi).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=a(this,hi)[s];if(r!==t)break;if(r===t&&o===e){a(this,hi).splice(s,1);return}}},py=function(t){const[e,i,s]=t,r=[[e,i,s]],o=S(this,Xe,mf).call(this,s);for(let l=0;l<o;l++){const[c,u]=a(this,hi)[l];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([e,u,p])}}}return r};var Wh,Gl;class UT extends j{constructor(e,i,s){super();A(this,Wh);A(this,Gl);g(this,Gl,e),g(this,Wh,i),this.lastPoint=s}toSVGPath(){const e=[];for(const i of a(this,Gl)){let[s,r]=i;e.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const l=i[o],c=i[o+1];l===s?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),s=l)}e.push("Z")}return e.join(" ")}serialize([e,i,s,r],o){const l=[],c=s-e,u=r-i;for(const h of a(this,Gl)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*c,d[f+1]=r-h[f+1]*u;l.push(d)}return l}get box(){return a(this,Wh)}get classNamesForOutlining(){return["highlightOutline"]}}Wh=new WeakMap,Gl=new WeakMap;class gy extends tp{newFreeDrawOutline(t,e,i,s,r,o){return new GT(t,e,i,s,r,o)}}class GT extends P_{newOutliner(t,e,i,s,r,o=0){return new gy(t,e,i,s,r,o)}}var di,Qo,Vl,te,Yh,Wl,Xh,qh,wr,fi,Yl,Kh,vt,my,yy,vy,Zr,N_,Vs;const en=class en{constructor({editor:t=null,uiManager:e=null}){A(this,vt);A(this,di,null);A(this,Qo,null);A(this,Vl);A(this,te,null);A(this,Yh,!1);A(this,Wl,!1);A(this,Xh,null);A(this,qh);A(this,wr,null);A(this,fi,null);A(this,Yl);var i;t?(g(this,Wl,!1),g(this,Yl,at.HIGHLIGHT_COLOR),g(this,Xh,t)):(g(this,Wl,!0),g(this,Yl,at.HIGHLIGHT_DEFAULT_COLOR)),g(this,fi,(t==null?void 0:t._uiManager)||e),g(this,qh,a(this,fi)._eventBus),g(this,Vl,(t==null?void 0:t.color)||((i=a(this,fi))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),a(en,Kh)||g(en,Kh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return it(this,"_keyboardManager",new ud([[["Escape","mac+Escape"],en.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],en.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],en.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],en.prototype._moveToPrevious],[["Home","mac+Home"],en.prototype._moveToBeginning],[["End","mac+End"],en.prototype._moveToEnd]]))}renderButton(){const t=g(this,di,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=a(this,fi)._signal;t.addEventListener("click",S(this,vt,Zr).bind(this),{signal:e}),t.addEventListener("keydown",S(this,vt,vy).bind(this),{signal:e});const i=g(this,Qo,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=a(this,Vl),t.append(i),t}renderMainDropdown(){const t=g(this,te,S(this,vt,my).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,di)){S(this,vt,Zr).call(this,t);return}const e=t.target.getAttribute("data-color");e&&S(this,vt,yy).call(this,e,t)}_moveToNext(t){var e,i;if(!a(this,vt,Vs)){S(this,vt,Zr).call(this,t);return}if(t.target===a(this,di)){(e=a(this,te).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=a(this,te))==null?void 0:e.firstChild)||t.target===a(this,di)){a(this,vt,Vs)&&this._hideDropdownFromKeyboard();return}a(this,vt,Vs)||S(this,vt,Zr).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!a(this,vt,Vs)){S(this,vt,Zr).call(this,t);return}(e=a(this,te).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,vt,Vs)){S(this,vt,Zr).call(this,t);return}(e=a(this,te).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,te))==null||t.classList.add("hidden"),(e=a(this,wr))==null||e.abort(),g(this,wr,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,Wl)){if(!a(this,vt,Vs)){(t=a(this,Xh))==null||t.unselect();return}this.hideDropdown(),a(this,di).focus({preventScroll:!0,focusVisible:a(this,Yh)})}}updateColor(t){if(a(this,Qo)&&(a(this,Qo).style.backgroundColor=t),!a(this,te))return;const e=a(this,fi).highlightColors.values();for(const i of a(this,te).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,di))==null||t.remove(),g(this,di,null),g(this,Qo,null),(e=a(this,te))==null||e.remove(),g(this,te,null)}};di=new WeakMap,Qo=new WeakMap,Vl=new WeakMap,te=new WeakMap,Yh=new WeakMap,Wl=new WeakMap,Xh=new WeakMap,qh=new WeakMap,wr=new WeakMap,fi=new WeakMap,Yl=new WeakMap,Kh=new WeakMap,vt=new WeakSet,my=function(){const t=document.createElement("div"),e=a(this,fi)._signal;t.addEventListener("contextmenu",Ei,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of a(this,fi).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",a(en,Kh)[i]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.setAttribute("aria-selected",s===a(this,Vl)),r.addEventListener("click",S(this,vt,yy).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",S(this,vt,vy).bind(this),{signal:e}),t},yy=function(t,e){e.stopPropagation(),a(this,qh).dispatch("switchannotationeditorparams",{source:this,type:a(this,Yl),value:t})},vy=function(t){en._keyboardManager.exec(this,t)},Zr=function(t){if(a(this,vt,Vs)){this.hideDropdown();return}if(g(this,Yh,t.detail===0),a(this,wr)||(g(this,wr,new AbortController),window.addEventListener("pointerdown",S(this,vt,N_).bind(this),{signal:a(this,fi).combinedSignal(a(this,wr))})),a(this,te)){a(this,te).classList.remove("hidden");return}const e=g(this,te,S(this,vt,my).call(this));a(this,di).append(e)},N_=function(t){var e;(e=a(this,te))!=null&&e.contains(t.target)||this.hideDropdown()},Vs=function(){return a(this,te)&&!a(this,te).classList.contains("hidden")},A(en,Kh,null);let ep=en;var Xl,Qh,bs,Jo,ql,rn,Jh,Zh,Zo,$n,En,ge,Kl,Cs,Re,Ql,Bn,td,K,wy,yf,D_,O_,F_,Ay,to,Yn,La,j_,vf,Yc,z_,$_,B_,H_,U_;const ft=class ft extends Dt{constructor(e){super({...e,name:"highlightEditor"});A(this,K);A(this,Xl,null);A(this,Qh,0);A(this,bs);A(this,Jo,null);A(this,ql,null);A(this,rn,null);A(this,Jh,null);A(this,Zh,0);A(this,Zo,null);A(this,$n,null);A(this,En,null);A(this,ge,!1);A(this,Kl,null);A(this,Cs);A(this,Re,null);A(this,Ql,"");A(this,Bn);A(this,td,"");this.color=e.color||ft._defaultColor,g(this,Bn,e.thickness||ft._defaultThickness),g(this,Cs,e.opacity||ft._defaultOpacity),g(this,bs,e.boxes||null),g(this,td,e.methodOfCreation||""),g(this,Ql,e.text||""),this._isDraggable=!1,e.highlightId>-1?(g(this,ge,!0),S(this,K,yf).call(this,e),S(this,K,to).call(this)):a(this,bs)&&(g(this,Xl,e.anchorNode),g(this,Qh,e.anchorOffset),g(this,Jh,e.focusNode),g(this,Zh,e.focusOffset),S(this,K,wy).call(this),S(this,K,to).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=ft.prototype;return it(this,"_keyboardManager",new ud([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,ge)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,Bn),methodOfCreation:a(this,td)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var s;Dt.initialize(e,i),ft._defaultColor||(ft._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case at.HIGHLIGHT_DEFAULT_COLOR:ft._defaultColor=i;break;case at.HIGHLIGHT_THICKNESS:ft._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return a(this,Kl)}updateParams(e,i){switch(e){case at.HIGHLIGHT_COLOR:S(this,K,D_).call(this,i);break;case at.HIGHLIGHT_THICKNESS:S(this,K,O_).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[at.HIGHLIGHT_DEFAULT_COLOR,ft._defaultColor],[at.HIGHLIGHT_THICKNESS,ft._defaultThickness]]}get propertiesToUpdate(){return[[at.HIGHLIGHT_COLOR,this.color||ft._defaultColor],[at.HIGHLIGHT_THICKNESS,a(this,Bn)||ft._defaultThickness],[at.HIGHLIGHT_FREE,a(this,ge)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(g(this,ql,new ep({editor:this})),e.addColorPicker(a(this,ql))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(S(this,K,Yc).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,S(this,K,Yc).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){S(this,K,Ay).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,K,to).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?S(this,K,Ay).call(this):e&&(S(this,K,to).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var r,o,l;const{drawLayer:i}=this.parent;let s;a(this,ge)?(e=(e-this.rotation+360)%360,s=S(r=ft,Yn,La).call(r,a(this,$n).box,e)):s=S(o=ft,Yn,La).call(o,[this.x,this.y,this.width,this.height],e),i.updateProperties(a(this,En),{bbox:s,root:{"data-main-rotation":e}}),i.updateProperties(a(this,Re),{bbox:S(l=ft,Yn,La).call(l,a(this,rn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,Ql)&&(e.setAttribute("aria-label",a(this,Ql)),e.setAttribute("role","mark")),a(this,ge)?e.classList.add("free"):this.div.addEventListener("keydown",S(this,K,j_).bind(this),{signal:this._uiManager._signal});const i=g(this,Zo,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=a(this,Jo);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Qf(this,a(this,Zo),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Re),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Re),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:S(this,K,vf).call(this,!0);break;case 1:case 3:S(this,K,vf).call(this,!1);break}}select(){var e;super.select(),a(this,Re)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Re),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,Re)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Re),{rootClass:{selected:!1}}),a(this,ge)||S(this,K,vf).call(this,!1))}get _mustFixPosition(){return!a(this,ge)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,En),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,Re),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:s,x:r,y:o}){const{x:l,y:c,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=m=>{d.abort(),S(this,Yn,H_).call(this,e,m)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",Pn,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Ei,{signal:f}),s.addEventListener("pointermove",S(this,Yn,B_).bind(this,e),{signal:f}),this._freeHighlight=new gy({x:r,y:o},[l,c,u,h],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,s){var v,_,y,w;let r=null;if(e instanceof g_){const{data:{quadPoints:E,rect:b,rotation:C,id:x,color:T,opacity:P,popupRef:M},parent:{page:{pageNumber:L}}}=e;r=e={annotationType:Q.HIGHLIGHT,color:Array.from(T),opacity:P,quadPoints:E,boxes:null,pageIndex:L-1,rect:b.slice(0),rotation:C,id:x,deleted:!1,popupRef:M}}else if(e instanceof zv){const{data:{inkLists:E,rect:b,rotation:C,id:x,color:T,borderStyle:{rawWidth:P},popupRef:M},parent:{page:{pageNumber:L}}}=e;r=e={annotationType:Q.HIGHLIGHT,color:Array.from(T),thickness:P,inkLists:E,boxes:null,pageIndex:L-1,rect:b.slice(0),rotation:C,id:x,deleted:!1,popupRef:M}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=e,h=await super.deserialize(e,i,s);h.color=V.makeHexColor(...o),g(h,Cs,u||1),c&&g(h,Bn,e.thickness),h.annotationElementId=e.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,m]=h.pageTranslation;if(l){const E=g(h,bs,[]);for(let b=0;b<l.length;b+=8)E.push({x:(l[b]-p)/d,y:1-(l[b+1]-m)/f,width:(l[b+2]-l[b])/d,height:(l[b+1]-l[b+5])/f});S(v=h,K,wy).call(v),S(_=h,K,to).call(_),h.rotate(h.rotation)}else if(c){g(h,ge,!0);const E=c[0],b={x:E[0]-p,y:f-(E[1]-m)},C=new gy(b,[0,0,d,f],1,a(h,Bn)/2,!0,.001);for(let P=0,M=E.length;P<M;P+=2)b.x=E[P]-p,b.y=f-(E[P+1]-m),C.add(b);const{id:x,clipPathId:T}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);S(y=h,K,yf).call(y,{highlightOutlines:C.getOutlines(),highlightId:x,clipPathId:T}),S(w=h,K,to).call(w)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=Dt._colorManager.convert(this.color),r={annotationType:Q.HIGHLIGHT,color:s,opacity:a(this,Cs),thickness:a(this,Bn),quadPoints:S(this,K,z_).call(this),outlines:S(this,K,$_).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:S(this,K,Yc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!S(this,K,U_).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Xl=new WeakMap,Qh=new WeakMap,bs=new WeakMap,Jo=new WeakMap,ql=new WeakMap,rn=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,Zo=new WeakMap,$n=new WeakMap,En=new WeakMap,ge=new WeakMap,Kl=new WeakMap,Cs=new WeakMap,Re=new WeakMap,Ql=new WeakMap,Bn=new WeakMap,td=new WeakMap,K=new WeakSet,wy=function(){const e=new fy(a(this,bs),.001);g(this,$n,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,$n).box;const i=new fy(a(this,bs),.0025,.001,this._uiManager.direction==="ltr");g(this,rn,i.getOutlines());const{lastPoint:s}=a(this,rn);g(this,Kl,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},yf=function({highlightOutlines:e,highlightId:i,clipPathId:s}){var d,f;if(g(this,$n,e),g(this,rn,e.getNewOutline(a(this,Bn)/2+1.5,.0025)),i>=0)g(this,En,i),g(this,Jo,s),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),g(this,Re,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,rn).box,path:{d:a(this,rn).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,En),{bbox:S(d=ft,Yn,La).call(d,a(this,$n).box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,Re),{bbox:S(f=ft,Yn,La).call(f,a(this,rn).box,p),path:{d:a(this,rn).toSVGPath()}})}const[o,l,c,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*m/p,this.height=u*p/m;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*m/p,this.height=u*p/m;break}}const{lastPoint:h}=a(this,rn);g(this,Kl,[(h[0]-o)/c,(h[1]-l)/u])},D_=function(e){const i=(o,l)=>{var c,u;this.color=o,g(this,Cs,l),(c=this.parent)==null||c.drawLayer.updateProperties(a(this,En),{root:{fill:o,"fill-opacity":l}}),(u=a(this,ql))==null||u.updateColor(o)},s=this.color,r=a(this,Cs);this.addCommands({cmd:i.bind(this,e,ft._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},O_=function(e){const i=a(this,Bn),s=r=>{g(this,Bn,r),S(this,K,F_).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},F_=function(e){if(!a(this,ge))return;S(this,K,yf).call(this,{highlightOutlines:a(this,$n).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},Ay=function(){a(this,En)===null||!this.parent||(this.parent.drawLayer.remove(a(this,En)),g(this,En,null),this.parent.drawLayer.remove(a(this,Re)),g(this,Re,null))},to=function(e=this.parent){a(this,En)===null&&({id:Fe(this,En)._,clipPathId:Fe(this,Jo)._}=e.drawLayer.draw({bbox:a(this,$n).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,Cs)},rootClass:{highlight:!0,free:a(this,ge)},path:{d:a(this,$n).toSVGPath()}},!1,!0),g(this,Re,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,ge)},bbox:a(this,rn).box,path:{d:a(this,rn).toSVGPath()}},a(this,ge))),a(this,Zo)&&(a(this,Zo).style.clipPath=a(this,Jo)))},Yn=new WeakSet,La=function([e,i,s,r],o){switch(o){case 90:return[1-i-r,e,r,s];case 180:return[1-e-s,1-i-r,s,r];case 270:return[i,1-e-s,r,s]}return[e,i,s,r]},j_=function(e){ft._keyboardManager.exec(this,e)},vf=function(e){if(!a(this,Xl))return;const i=window.getSelection();e?i.setPosition(a(this,Xl),a(this,Qh)):i.setPosition(a(this,Jh),a(this,Zh))},Yc=function(){return a(this,ge)?this.rotation:0},z_=function(){if(a(this,ge))return null;const[e,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=a(this,bs),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*e+s,m=(1-h)*i+r;l[c]=l[c+4]=p,l[c+1]=l[c+3]=m,l[c+2]=l[c+6]=p+d*e,l[c+5]=l[c+7]=m-f*i,c+=8}return l},$_=function(e){return a(this,$n).serialize(e,S(this,K,Yc).call(this))},B_=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},H_=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},U_=function(e){const{color:i}=this._initialData;return e.color.some((s,r)=>s!==i[r])},A(ft,Yn),B(ft,"_defaultColor",null),B(ft,"_defaultOpacity",1),B(ft,"_defaultThickness",12),B(ft,"_type","highlight"),B(ft,"_editorType",Q.HIGHLIGHT),B(ft,"_freeHighlightId",-1),B(ft,"_freeHighlight",null),B(ft,"_freeHighlightClipId","");let np=ft;var ta;class VT{constructor(){A(this,ta,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))this.updateProperty(e,i)}updateSVGProperty(t,e){a(this,ta)[t]=e}toSVGProperties(){const t=a(this,ta);return g(this,ta,Object.create(null)),{root:t}}reset(){g(this,ta,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){At("Not implemented")}}ta=new WeakMap;var _n,Jl,ae,ea,na,Ar,Sr,Er,ia,ut,Ey,_y,by,Xc,G_,wf,qc,Na;const $=class $ extends Dt{constructor(e){super(e);A(this,ut);A(this,_n,null);A(this,Jl);B(this,"_drawId",null);g(this,Jl,e.mustBeCommitted||!1),e.drawOutlines&&(S(this,ut,Ey).call(this,e),S(this,ut,Xc).call(this))}static _mergeSVGProperties(e,i){const s=new Set(Object.keys(e));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){At("Not implemented")}static get typesMap(){At("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(a($,ae).updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,i[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,i[r]]);return e}_updateProperty(e,i,s){const r=this._drawingOptions,o=r[i],l=c=>{var h;r.updateProperty(i,c);const u=a(this,_n).updateProperty(i,c);u&&S(this,ut,qc).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,$._mergeSVGProperties(a(this,_n).getPathResizingSVGProperties(S(this,ut,wf).call(this)),{bbox:S(this,ut,Na).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,$._mergeSVGProperties(a(this,_n).getPathResizedSVGProperties(S(this,ut,wf).call(this)),{bbox:S(this,ut,Na).call(this)}))}_onTranslating(e,i){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:S(this,ut,Na).call(this,e,i)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,$._mergeSVGProperties(a(this,_n).getPathTranslatedSVGProperties(S(this,ut,wf).call(this),this.parentDimensions),{bbox:S(this,ut,Na).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,Jl)&&(g(this,Jl,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){S(this,ut,by).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,ut,Xc).call(this),S(this,ut,qc).call(this,a(this,_n).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),S(this,ut,by).call(this)):e&&(this._uiManager.addShouldRescale(this),S(this,ut,Xc).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,$._mergeSVGProperties({bbox:S(this,ut,Na).call(this)},a(this,_n).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&S(this,ut,qc).call(this,a(this,_n).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const i=document.createElement("div");e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,i,s,r,o){At("Not implemented")}static startDrawing(e,i,s,r){var _;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=r;if(a($,Sr)&&a($,Sr)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:p}=o.getBoundingClientRect(),m=g($,ea,new AbortController),v=e.combinedSignal(m);if(a($,Ar)||g($,Ar,u),a($,Sr)??g($,Sr,h),window.addEventListener("pointerup",y=>{var w;a($,Ar)===y.pointerId?this._endDraw(y):(w=a($,Er))==null||w.delete(y.pointerId)},{signal:v}),window.addEventListener("pointercancel",y=>{var w;a($,Ar)===y.pointerId?this._currentParent.endDrawingSession():(w=a($,Er))==null||w.delete(y.pointerId)},{signal:v}),window.addEventListener("pointerdown",y=>{a($,Sr)===y.pointerType&&((a($,Er)||g($,Er,new Set)).add(y.pointerId),a($,ae).isCancellable()&&(a($,ae).removeLastElement(),a($,ae).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ei,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",y=>{y.timeStamp===a($,ia)&&Pn(y)},{signal:v}),e.toggleDrawing(),(_=i._editorUndoBar)==null||_.hide(),a($,ae)){e.drawLayer.updateProperties(this._currentDrawId,a($,ae).startNew(l,c,f,p,d));return}i.updateUIForDefaultProperties(this),g($,ae,this.createDrawerInstance(l,c,f,p,d)),g($,na,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a($,na).toSVGProperties(),a($,ae).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(g($,ia,-1),!a($,ae))return;const{offsetX:i,offsetY:s,pointerId:r}=e;if(a($,Ar)===r){if(((o=a($,Er))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a($,ae).add(i,s)),g($,ia,e.timeStamp),Pn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,g($,ae,null),g($,na,null),g($,Sr,null),g($,ia,NaN)),a($,ea)&&(a($,ea).abort(),g($,ea,null),g($,Ar,NaN),g($,Er,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),e&&i.drawLayer.updateProperties(this._currentDrawId,a($,ae).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=a($,ae),r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:at.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(at.DRAW_STEP),!a($,ae).isEmpty()){const{pageDimensions:[s,r],scale:o}=i,l=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a($,ae).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:a($,na),mustBeCommitted:!e});return this._cleanup(!0),l}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,s,r,o,l){At("Not implemented")}static async deserialize(e,i,s){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=i.viewport,u=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),h=await super.deserialize(e,i,s);return h.createDrawingOptions(e),S(d=h,ut,Ey).call(d,{drawOutlines:u}),S(f=h,ut,Xc).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,_n).serialize([i,s,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};_n=new WeakMap,Jl=new WeakMap,ae=new WeakMap,ea=new WeakMap,na=new WeakMap,Ar=new WeakMap,Sr=new WeakMap,Er=new WeakMap,ia=new WeakMap,ut=new WeakSet,Ey=function({drawOutlines:e,drawId:i,drawingOptions:s}){g(this,_n,e),this._drawingOptions||(this._drawingOptions=s),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=S(this,ut,_y).call(this,e,this.parent),S(this,ut,qc).call(this,e.box)},_y=function(e,i){const{id:s}=i.drawLayer.draw($._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},by=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Xc=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=S(this,ut,_y).call(this,a(this,_n),e)}},G_=function([e,i,s,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[i,1-e,s*(l/o),r*(o/l)];case 180:return[1-e,1-i,s,r];case 270:return[1-i,e,s*(l/o),r*(o/l)];default:return[e,i,s,r]}},wf=function(){const{x:e,y:i,width:s,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-i,e,s*(o/l),r*(l/o)];case 180:return[1-e,1-i,s,r];case 270:return[i,1-e,s*(o/l),r*(l/o)];default:return[e,i,s,r]}},qc=function(e){if([this.x,this.y,this.width,this.height]=S(this,ut,G_).call(this,e),this.div){this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)}this._onResized()},Na=function(){const{x:e,y:i,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-i-r,e,r,s];case 2:return[1-e-s,1-i-r,s,r];case 3:return[i,1-e-s,r,s];case 4:return[e,i-s*(c/u),r*(u/c),s*(c/u)];case 5:return[1-i,e,s*(c/u),r*(u/c)];case 6:return[1-e-r*(u/c),1-i,r*(u/c),s*(c/u)];case 7:return[i-s*(c/u),1-e-r*(u/c),s*(c/u),r*(u/c)];case 8:return[e-s,i-r,s,r];case 9:return[1-i,e-s,r,s];case 10:return[1-e,1-i,s,r];case 11:return[i-r,1-e,r,s];case 12:return[e-r*(u/c),i,r*(u/c),s*(c/u)];case 13:return[1-i-s*(c/u),e-r*(u/c),s*(c/u),r*(u/c)];case 14:return[1-e,1-i-s*(c/u),r*(u/c),s*(c/u)];case 15:return[i,1-e,s*(c/u),r*(u/c)];default:return[e,i,s,r]}},B($,"_currentDrawId",-1),B($,"_currentParent",null),A($,ae,null),A($,ea,null),A($,na,null),A($,Ar,NaN),A($,Sr,null),A($,Er,null),A($,ia,NaN),B($,"_INNER_MARGIN",3);let Sy=$;var Bi,le,ce,sa,Zl,Be,me,Hn,ra,oa,aa,tc,Af;class WT{constructor(t,e,i,s,r,o){A(this,tc);A(this,Bi,new Float64Array(6));A(this,le);A(this,ce);A(this,sa);A(this,Zl);A(this,Be);A(this,me,"");A(this,Hn,0);A(this,ra,new ip);A(this,oa);A(this,aa);g(this,oa,i),g(this,aa,s),g(this,sa,r),g(this,Zl,o),[t,e]=S(this,tc,Af).call(this,t,e);const l=g(this,le,[NaN,NaN,NaN,NaN,t,e]);g(this,Be,[t,e]),g(this,ce,[{line:l,points:a(this,Be)}]),a(this,Bi).set(l,0)}updateProperty(t,e){t==="stroke-width"&&g(this,Zl,e)}isEmpty(){return!a(this,ce)||a(this,ce).length===0}isCancellable(){return a(this,Be).length<=10}add(t,e){[t,e]=S(this,tc,Af).call(this,t,e);const[i,s,r,o]=a(this,Bi).subarray(2,6),l=t-r,c=e-o;return Math.hypot(a(this,oa)*l,a(this,aa)*c)<=2?null:(a(this,Be).push(t,e),isNaN(i)?(a(this,Bi).set([r,o,t,e],2),a(this,le).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Bi)[0])&&a(this,le).splice(6,6),a(this,Bi).set([i,s,r,o,t,e],0),a(this,le).push(...j.createBezierPoints(i,s,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(a(this,Be).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,s,r){g(this,oa,i),g(this,aa,s),g(this,sa,r),[t,e]=S(this,tc,Af).call(this,t,e);const o=g(this,le,[NaN,NaN,NaN,NaN,t,e]);g(this,Be,[t,e]);const l=a(this,ce).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,ce).push({line:o,points:a(this,Be)}),a(this,Bi).set(o,0),g(this,Hn,0),this.toSVGPath(),null}getLastElement(){return a(this,ce).at(-1)}setLastElement(t){return a(this,ce)?(a(this,ce).push(t),g(this,le,t.line),g(this,Be,t.points),g(this,Hn,0),{path:{d:this.toSVGPath()}}):a(this,ra).setLastElement(t)}removeLastElement(){if(!a(this,ce))return a(this,ra).removeLastElement();a(this,ce).pop(),g(this,me,"");for(let t=0,e=a(this,ce).length;t<e;t++){const{line:i,points:s}=a(this,ce)[t];g(this,le,i),g(this,Be,s),g(this,Hn,0),this.toSVGPath()}return{path:{d:a(this,me)}}}toSVGPath(){const t=j.svgRound(a(this,le)[4]),e=j.svgRound(a(this,le)[5]);if(a(this,Be).length===2)return g(this,me,`${a(this,me)} M ${t} ${e} Z`),a(this,me);if(a(this,Be).length<=6){const s=a(this,me).lastIndexOf("M");g(this,me,`${a(this,me).slice(0,s)} M ${t} ${e}`),g(this,Hn,6)}if(a(this,Be).length===4){const s=j.svgRound(a(this,le)[10]),r=j.svgRound(a(this,le)[11]);return g(this,me,`${a(this,me)} L ${s} ${r}`),g(this,Hn,12),a(this,me)}const i=[];a(this,Hn)===0&&(i.push(`M ${t} ${e}`),g(this,Hn,6));for(let s=a(this,Hn),r=a(this,le).length;s<r;s+=6){const[o,l,c,u,h,d]=a(this,le).slice(s,s+6).map(j.svgRound);i.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}return g(this,me,a(this,me)+i.join(" ")),g(this,Hn,a(this,le).length),a(this,me)}getOutlines(t,e,i,s){const r=a(this,ce).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,ra).build(a(this,ce),t,e,i,a(this,sa),a(this,Zl),s),g(this,Bi,null),g(this,le,null),g(this,ce,null),g(this,me,null),a(this,ra)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Bi=new WeakMap,le=new WeakMap,ce=new WeakMap,sa=new WeakMap,Zl=new WeakMap,Be=new WeakMap,me=new WeakMap,Hn=new WeakMap,ra=new WeakMap,oa=new WeakMap,aa=new WeakMap,tc=new WeakSet,Af=function(t,e){return j._normalizePoint(t,e,a(this,oa),a(this,aa),a(this,sa))};var He,ed,nd,bn,Hi,Ui,ec,nc,ic,we,ts,V_,W_,Y_;const Vv=class Vv extends j{constructor(){super(...arguments);A(this,we);A(this,He);A(this,ed,0);A(this,nd);A(this,bn);A(this,Hi);A(this,Ui);A(this,ec);A(this,nc);A(this,ic)}build(e,i,s,r,o,l,c){g(this,Hi,i),g(this,Ui,s),g(this,ec,r),g(this,nc,o),g(this,ic,l),g(this,nd,c??0),g(this,bn,e),S(this,we,W_).call(this)}setLastElement(e){return a(this,bn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,bn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of a(this,bn)){if(e.push(`M${j.svgRound(i[4])} ${j.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12){e.push(`L${j.svgRound(i[10])} ${j.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,l,c,u,h,d]=i.subarray(s,s+6).map(j.svgRound);e.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,i,s,r],o){const l=[],c=[],[u,h,d,f]=S(this,we,V_).call(this);let p,m,v,_,y,w,E,b,C;switch(a(this,nc)){case 0:C=j._rescale,p=e,m=i+r,v=s,_=-r,y=e+u*s,w=i+(1-h-f)*r,E=e+(u+d)*s,b=i+(1-h)*r;break;case 90:C=j._rescaleAndSwap,p=e,m=i,v=s,_=r,y=e+h*s,w=i+u*r,E=e+(h+f)*s,b=i+(u+d)*r;break;case 180:C=j._rescale,p=e+s,m=i,v=-s,_=r,y=e+(1-u-d)*s,w=i+h*r,E=e+(1-u)*s,b=i+(h+f)*r;break;case 270:C=j._rescaleAndSwap,p=e+s,m=i+r,v=-s,_=-r,y=e+(1-h-f)*s,w=i+(1-u-d)*r,E=e+(1-h)*s,b=i+(1-u)*r;break}for(const{line:x,points:T}of a(this,bn))l.push(C(x,p,m,v,_,o?new Array(x.length):null)),c.push(C(T,p,m,v,_,o?new Array(T.length):null));return{lines:l,points:c,rect:[y,w,E,b]}}static deserialize(e,i,s,r,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const d=[];let f,p,m,v,_;switch(u){case 0:_=j._rescale,f=-e/s,p=i/r+1,m=1/s,v=-1/r;break;case 90:_=j._rescaleAndSwap,f=-i/r,p=-e/s,m=1/r,v=1/s;break;case 180:_=j._rescale,f=e/s+1,p=-i/r,m=-1/s,v=1/r;break;case 270:_=j._rescaleAndSwap,f=i/r+1,p=e/s+1,m=-1/r,v=-1/s;break}if(!l){l=[];for(const w of c){const E=w.length;if(E===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(E===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const b=new Float32Array(3*(E-2));l.push(b);let[C,x,T,P]=w.subarray(0,4);b.set([NaN,NaN,NaN,NaN,C,x],0);for(let M=4;M<E;M+=2){const L=w[M],H=w[M+1];b.set(j.createBezierPoints(C,x,T,P,L,H),(M-2)*3),[C,x,T,P]=[T,P,L,H]}}}for(let w=0,E=l.length;w<E;w++)d.push({line:_(l[w].map(b=>b??NaN),f,p,m,v),points:_(c[w].map(b=>b??NaN),f,p,m,v)});const y=new Vv;return y.build(d,s,r,1,u,h,o),y}get box(){return a(this,He)}updateProperty(e,i){return e==="stroke-width"?S(this,we,Y_).call(this,i):null}updateParentDimensions([e,i],s){const[r,o]=S(this,we,ts).call(this);g(this,Hi,e),g(this,Ui,i),g(this,ec,s);const[l,c]=S(this,we,ts).call(this),u=l-r,h=c-o,d=a(this,He);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return g(this,ed,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,He).map(j.svgRound).join(" ")}get defaultProperties(){const[e,i]=a(this,He);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${j.svgRound(e)} ${j.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=a(this,He);let s=0,r=0,o=0,l=0,c=0,u=0;switch(a(this,ed)){case 90:r=i/e,o=-e/i,c=e;break;case 180:s=-1,l=-1,c=e,u=i;break;case 270:r=-i/e,o=e/i,u=i;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${j.svgRound(c)} ${j.svgRound(u)})`}getPathResizingSVGProperties([e,i,s,r]){const[o,l]=S(this,we,ts).call(this),[c,u,h,d]=a(this,He);if(Math.abs(h-o)<=j.PRECISION||Math.abs(d-l)<=j.PRECISION){const _=e+s/2-(c+h/2),y=i+r/2-(u+d/2);return{path:{"transform-origin":`${j.svgRound(e)} ${j.svgRound(i)}`,transform:`${this.rotationTransform} translate(${_} ${y})`}}}const f=(s-2*o)/(h-2*o),p=(r-2*l)/(d-2*l),m=h/s,v=d/r;return{path:{"transform-origin":`${j.svgRound(c)} ${j.svgRound(u)}`,transform:`${this.rotationTransform} scale(${m} ${v}) translate(${j.svgRound(o)} ${j.svgRound(l)}) scale(${f} ${p}) translate(${j.svgRound(-o)} ${j.svgRound(-l)})`}}}getPathResizedSVGProperties([e,i,s,r]){const[o,l]=S(this,we,ts).call(this),c=a(this,He),[u,h,d,f]=c;if(c[0]=e,c[1]=i,c[2]=s,c[3]=r,Math.abs(d-o)<=j.PRECISION||Math.abs(f-l)<=j.PRECISION){const y=e+s/2-(u+d/2),w=i+r/2-(h+f/2);for(const{line:E,points:b}of a(this,bn))j._translate(E,y,w,E),j._translate(b,y,w,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${j.svgRound(e)} ${j.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(s-2*o)/(d-2*o),m=(r-2*l)/(f-2*l),v=-p*(u+o)+e+o,_=-m*(h+l)+i+l;if(p!==1||m!==1||v!==0||_!==0)for(const{line:y,points:w}of a(this,bn))j._rescale(y,v,_,p,m,y),j._rescale(w,v,_,p,m,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${j.svgRound(e)} ${j.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],s){const[r,o]=s,l=a(this,He),c=e-l[0],u=i-l[1];if(a(this,Hi)===r&&a(this,Ui)===o)for(const{line:h,points:d}of a(this,bn))j._translate(h,c,u,h),j._translate(d,c,u,d);else{const h=a(this,Hi)/r,d=a(this,Ui)/o;g(this,Hi,r),g(this,Ui,o);for(const{line:f,points:p}of a(this,bn))j._rescale(f,c,u,h,d,f),j._rescale(p,c,u,h,d,p);l[2]*=h,l[3]*=d}return l[0]=e,l[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${j.svgRound(e)} ${j.svgRound(i)}`}}}get defaultSVGProperties(){const e=a(this,He);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${j.svgRound(e[0])} ${j.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};He=new WeakMap,ed=new WeakMap,nd=new WeakMap,bn=new WeakMap,Hi=new WeakMap,Ui=new WeakMap,ec=new WeakMap,nc=new WeakMap,ic=new WeakMap,we=new WeakSet,ts=function(e=a(this,ic)){const i=a(this,nd)+e/2*a(this,ec);return a(this,nc)%180===0?[i/a(this,Hi),i/a(this,Ui)]:[i/a(this,Ui),i/a(this,Hi)]},V_=function(){const[e,i,s,r]=a(this,He),[o,l]=S(this,we,ts).call(this,0);return[e+o,i+l,s-2*o,r-2*l]},W_=function(){const e=g(this,He,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,bn)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6){const[h,d]=r.subarray(c,c+2);e[0]=Math.min(e[0],h),e[1]=Math.min(e[1],d),e[2]=Math.max(e[2],h),e[3]=Math.max(e[3],d)}continue}let o=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,p,m,v]=r.subarray(c,c+6);V.bezierBoundingBox(o,l,h,d,f,p,m,v,e),o=m,l=v}}const[i,s]=S(this,we,ts).call(this);e[0]=Math.min(1,Math.max(0,e[0]-i)),e[1]=Math.min(1,Math.max(0,e[1]-s)),e[2]=Math.min(1,Math.max(0,e[2]+i)),e[3]=Math.min(1,Math.max(0,e[3]+s)),e[2]-=e[0],e[3]-=e[1]},Y_=function(e){const[i,s]=S(this,we,ts).call(this);g(this,ic,e);const[r,o]=S(this,we,ts).call(this),[l,c]=[r-i,o-s],u=a(this,He);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};let ip=Vv;var sc;const Wv=class Wv extends VT{constructor(e){super();A(this,sc);g(this,sc,e),super.updateProperties({fill:"none",stroke:Dt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,i){e==="stroke-width"&&(i??(i=this["stroke-width"]),i*=a(this,sc).realScale),super.updateSVGProperty(e,i)}clone(){const e=new Wv(a(this,sc));return e.updateAll(this),e}};sc=new WeakMap;let Cy=Wv;var Sp,X_;const Xa=class Xa extends Sy{constructor(e){super({...e,name:"inkEditor"});A(this,Sp);this._willKeepAspectRatio=!0}static initialize(e,i){Dt.initialize(e,i),this._defaultDrawingOptions=new Cy(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return it(this,"typesMap",new Map([[at.INK_THICKNESS,"stroke-width"],[at.INK_COLOR,"stroke"],[at.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,s,r,o){return new WT(e,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,s,r,o,l){return ip.deserialize(e,i,s,r,o,l)}static async deserialize(e,i,s){let r=null;if(e instanceof zv){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:m},parent:{page:{pageNumber:v}}}=e;r=e={annotationType:Q.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:l},boxes:null,pageIndex:v-1,rect:c.slice(0),rotation:u,id:h,deleted:!1,popupRef:m}}const o=await super.deserialize(e,i,s);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:s}){this._drawingOptions=Xa.getDefaultDrawingOptions({stroke:V.makeHexColor(...e),"stroke-width":i,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,u={annotationType:Q.INK,color:Dt._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:i,points:s},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?u:this.annotationElementId&&!S(this,Sp,X_).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const{points:i,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i}),null}};Sp=new WeakSet,X_=function(e){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==i[c])||e.thickness!==s||e.opacity!==r||e.pageIndex!==o},B(Xa,"_type","ink"),B(Xa,"_editorType",Q.INK),B(Xa,"_defaultDrawingOptions",null);let xy=Xa;var Lt,ye,_r,xs,br,rc,Gi,Vi,Cn,oc,ht,Kc,Qc,Sf,ky,Ef,Py,_f,q_;const uu=class uu extends Dt{constructor(e){super({...e,name:"stampEditor"});A(this,ht);A(this,Lt,null);A(this,ye,null);A(this,_r,null);A(this,xs,null);A(this,br,null);A(this,rc,"");A(this,Gi,null);A(this,Vi,null);A(this,Cn,!1);A(this,oc,!1);g(this,xs,e.bitmapUrl),g(this,br,e.bitmapFile)}static initialize(e,i){Dt.initialize(e,i)}static get supportedTypes(){return it(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return it(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,i){i.pasteEditor(Q.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;a(this,ye)&&(g(this,Lt,null),this._uiManager.imageManager.deleteId(a(this,ye)),(e=a(this,Gi))==null||e.remove(),g(this,Gi,null),a(this,Vi)&&(clearTimeout(a(this,Vi)),g(this,Vi,null))),super.remove()}rebuild(){if(!this.parent){a(this,ye)&&S(this,ht,Sf).call(this);return}super.rebuild(),this.div!==null&&(a(this,ye)&&a(this,Gi)===null&&S(this,ht,Sf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,_r)||a(this,Lt)||a(this,xs)||a(this,br)||a(this,ye))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;if(this.width&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),a(this,Lt)?S(this,ht,ky).call(this):S(this,ht,Sf).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(e*s,i*r,this.width*s,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,Vi)!==null&&clearTimeout(a(this,Vi)),g(this,Vi,setTimeout(()=>{g(this,Vi,null),S(this,ht,Py).call(this)},200))}copyCanvas(e,i,s=!1){var p;e||(e=224);const{width:r,height:o}=a(this,Lt),l=new Cm;let c=a(this,Lt),u=r,h=o,d=null;if(i){if(r>i||o>i){const P=Math.min(i/r,i/o);u=Math.floor(r*P),h=Math.floor(o*P)}d=document.createElement("canvas");const m=d.width=Math.ceil(u*l.sx),v=d.height=Math.ceil(h*l.sy);a(this,Cn)||(c=S(this,ht,Ef).call(this,m,v));const _=d.getContext("2d");_.filter=this._uiManager.hcmFilter;let y="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",w="#42414d");const E=15,b=E*l.sx,C=E*l.sy,x=new OffscreenCanvas(b*2,C*2),T=x.getContext("2d");T.fillStyle=y,T.fillRect(0,0,b*2,C*2),T.fillStyle=w,T.fillRect(0,0,b,C),T.fillRect(b,C,b,C),_.fillStyle=_.createPattern(x,"repeat"),_.fillRect(0,0,m,v),_.drawImage(c,0,0,c.width,c.height,0,0,m,v)}let f=null;if(s){let m,v;if(l.symmetric&&c.width<e&&c.height<e)m=c.width,v=c.height;else if(c=a(this,Lt),r>e||o>e){const w=Math.min(e/r,e/o);m=Math.floor(r*w),v=Math.floor(o*w),a(this,Cn)||(c=S(this,ht,Ef).call(this,m,v))}const y=new OffscreenCanvas(m,v).getContext("2d",{willReadFrequently:!0});y.drawImage(c,0,0,c.width,c.height,0,0,m,v),f={width:m,height:v,data:y.getImageData(0,0,m,v).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return a(this,Gi)}static async deserialize(e,i,s){var v;let r=null;if(e instanceof m_){const{data:{rect:_,rotation:y,id:w,structParent:E,popupRef:b},container:C,parent:{page:{pageNumber:x}}}=e,T=C.querySelector("canvas"),P=s.imageManager.getFromCanvas(C.id,T);T.remove();const M=((v=await i._structTree.getAriaAttributes(`${Iv}${w}`))==null?void 0:v.get("aria-label"))||"";r=e={annotationType:Q.STAMP,bitmapId:P.id,bitmap:P.bitmap,pageIndex:x-1,rect:_.slice(0),rotation:y,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:E,popupRef:b}}const o=await super.deserialize(e,i,s),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=e;h&&s.imageManager.isValidId(h)?(g(o,ye,h),c&&g(o,Lt,c)):g(o,xs,u),g(o,Cn,d);const[p,m]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/m,o.annotationElementId=e.id||null,f&&(o.altTextData=f),o._initialData=r,g(o,oc,!!r),o}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Q.STAMP,bitmapId:a(this,ye),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,Cn),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=S(this,ht,_f).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=S(this,ht,q_).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const l=a(this,Cn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(a(this,ye)))i.stamps.set(a(this,ye),{area:l,serialized:s}),s.bitmap=S(this,ht,_f).call(this,!1);else if(a(this,Cn)){const c=i.stamps.get(a(this,ye));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=S(this,ht,_f).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};Lt=new WeakMap,ye=new WeakMap,_r=new WeakMap,xs=new WeakMap,br=new WeakMap,rc=new WeakMap,Gi=new WeakMap,Vi=new WeakMap,Cn=new WeakMap,oc=new WeakMap,ht=new WeakSet,Kc=function(e,i=!1){if(!e){this.remove();return}g(this,Lt,e.bitmap),i||(g(this,ye,e.id),g(this,Cn,e.isSvg)),e.file&&g(this,rc,e.file.name),S(this,ht,ky).call(this)},Qc=function(){if(g(this,_r,null),this._uiManager.enableWaiting(!1),!!a(this,Gi)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Lt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Lt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Sf=function(){if(a(this,ye)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,ye)).then(s=>S(this,ht,Kc).call(this,s,!0)).finally(()=>S(this,ht,Qc).call(this));return}if(a(this,xs)){const s=a(this,xs);g(this,xs,null),this._uiManager.enableWaiting(!0),g(this,_r,this._uiManager.imageManager.getFromUrl(s).then(r=>S(this,ht,Kc).call(this,r)).finally(()=>S(this,ht,Qc).call(this)));return}if(a(this,br)){const s=a(this,br);g(this,br,null),this._uiManager.enableWaiting(!0),g(this,_r,this._uiManager.imageManager.getFromFile(s).then(r=>S(this,ht,Kc).call(this,r)).finally(()=>S(this,ht,Qc).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=uu.supportedTypesStr;const i=this._uiManager._signal;g(this,_r,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),S(this,ht,Kc).call(this,r)}s()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>S(this,ht,Qc).call(this))),e.click()},ky=function(){var d;const{div:e}=this;let{width:i,height:s}=a(this,Lt);const[r,o]=this.pageDimensions,l=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>l*r||s>l*o){const f=Math.min(l*r/i,l*o/s);i*=f,s*=f}const[c,u]=this.parentDimensions;this.setDims(i*c/r,s*u/o),this._uiManager.enableWaiting(!1);const h=g(this,Gi,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=i/r,this.height=s/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),S(this,ht,Py).call(this),a(this,oc)||(this.parent.addUndoableEditor(this),g(this,oc,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,rc)&&h.setAttribute("aria-label",a(this,rc))},Ef=function(e,i){const{width:s,height:r}=a(this,Lt);let o=s,l=r,c=a(this,Lt);for(;o>2*e||l>2*i;){const u=o,h=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*i&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=d.transferToImageBitmap()}return c},Py=function(){const[e,i]=this.parentDimensions,{width:s,height:r}=this,o=new Cm,l=Math.ceil(s*e*o.sx),c=Math.ceil(r*i*o.sy),u=a(this,Gi);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=a(this,Cn)?a(this,Lt):S(this,ht,Ef).call(this,l,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,l,c)},_f=function(e){if(e){if(a(this,Cn)){const r=this._uiManager.imageManager.getSvgUrl(a(this,ye));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,Lt),i.getContext("2d").drawImage(a(this,Lt),0,0),i.toDataURL()}if(a(this,Cn)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*Gr.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Gr.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,Lt),0,0,a(this,Lt).width,a(this,Lt).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,Lt))},q_=function(e){var l;const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===i,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},B(uu,"_type","stamp"),B(uu,"_editorType",Q.STAMP);let Ty=uu;var la,ac,Wi,Cr,Ts,Un,xr,lc,ca,pi,ks,Ie,Ps,U,Tr,Rt,K_,ki,Iy,My,bf;const ei=class ei{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:h}){A(this,Rt);A(this,la);A(this,ac,!1);A(this,Wi,null);A(this,Cr,null);A(this,Ts,null);A(this,Un,new Map);A(this,xr,!1);A(this,lc,!1);A(this,ca,!1);A(this,pi,null);A(this,ks,null);A(this,Ie,null);A(this,Ps,null);A(this,U);const d=[...a(ei,Tr).values()];if(!ei._initialized){ei._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),g(this,U,t),this.pageIndex=e,this.div=i,g(this,la,r),g(this,Wi,o),this.viewport=u,g(this,Ie,c),this.drawLayer=l,this._structTree=s,a(this,U).addLayer(this)}get isEmpty(){return a(this,Un).size===0}get isInvisible(){return this.isEmpty&&a(this,U).getMode()===Q.NONE}updateToolbar(t){a(this,U).updateToolbar(t)}updateMode(t=a(this,U).getMode()){switch(S(this,Rt,bf).call(this),t){case Q.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Q.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Q.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of a(ei,Tr).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,Ie))==null?void 0:e.div)}setEditingState(t){a(this,U).setEditingState(t)}addCommands(t){a(this,U).addCommands(t)}cleanUndoStack(t){a(this,U).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,Wi))==null||e.div.classList.toggle("disabled",!t)}async enable(){g(this,ca,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of a(this,Un).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(a(this,U).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!a(this,Wi)){g(this,ca,!1);return}const e=a(this,Wi).getEditableAnnotations();for(const i of e){if(i.hide(),a(this,U).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}g(this,ca,!1)}disable(){var s;g(this,lc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of a(this,Un).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(a(this,Wi)){const r=a(this,Wi).getEditableAnnotations();for(const o of r){const{id:l}=o.data;if(a(this,U).isDeletedAnnotationElement(l))continue;let c=e.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(l),c&&(a(this,U).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}S(this,Rt,bf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of a(ei,Tr).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),g(this,lc,!1)}getEditableAnnotation(t){var e;return((e=a(this,Wi))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,U).getActive()!==t&&a(this,U).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,Ie))!=null&&t.div&&!a(this,Ps)){g(this,Ps,new AbortController);const e=a(this,U).combinedSignal(a(this,Ps));a(this,Ie).div.addEventListener("pointerdown",S(this,Rt,K_).bind(this),{signal:e}),a(this,Ie).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,Ie))!=null&&t.div&&a(this,Ps)&&(a(this,Ps).abort(),g(this,Ps,null),a(this,Ie).div.classList.remove("highlighting"))}enableClick(){if(a(this,Cr))return;g(this,Cr,new AbortController);const t=a(this,U).combinedSignal(a(this,Cr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,Cr))==null||t.abort(),g(this,Cr,null)}attach(t){a(this,Un).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,U).isDeletedAnnotationElement(e)&&a(this,U).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Un).delete(t.id),(e=a(this,la))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,lc)&&t.annotationElementId&&a(this,U).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,U).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,U).addDeletedAnnotationElement(t.annotationElementId),Dt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,U).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,ca)),a(this,U).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Ts)&&(t._focusEventsAllowed=!1,g(this,Ts,setTimeout(()=>{g(this,Ts,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,U)._signal}),e.focus())},0))),t._structTreeParentId=(i=a(this,la))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return a(this,U).getId()}combinedSignal(t){return a(this,U).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,Rt,ki))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){a(this,U).updateToolbar(t),a(this,U).updateMode(t);const{offsetX:i,offsetY:s}=S(this,Rt,My).call(this),r=this.getNextId(),o=S(this,Rt,Iy).call(this,{parent:this,id:r,x:i,y:s,uiManager:a(this,U),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=a(ei,Tr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,U)))||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),r=S(this,Rt,Iy).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:a(this,U),isCentered:e,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(S(this,Rt,My).call(this),!0)}setSelected(t){a(this,U).setSelected(t)}toggleSelected(t){a(this,U).toggleSelected(t)}unselect(t){a(this,U).unselect(t)}pointerup(t){var i;const{isMac:e}=We.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&a(this,xr)&&(g(this,xr,!1),!((i=a(this,Rt,ki))!=null&&i.isDrawer&&a(this,Rt,ki).supportMultipleDrawings))){if(!a(this,ac)){g(this,ac,!0);return}if(a(this,U).getMode()===Q.STAMP){a(this,U).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var s;if(a(this,U).getMode()===Q.HIGHLIGHT&&this.enableTextSelection(),a(this,xr)){g(this,xr,!1);return}const{isMac:e}=We.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(g(this,xr,!0),(s=a(this,Rt,ki))!=null&&s.isDrawer){this.startDrawingSession(t);return}const i=a(this,U).getActive();g(this,ac,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus(),a(this,pi)){a(this,Rt,ki).startDrawing(this,a(this,U),!1,t);return}a(this,U).setCurrentDrawingSession(this),g(this,pi,new AbortController);const e=a(this,U).combinedSignal(a(this,pi));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(g(this,ks,null),this.commitOrRemove())},{signal:e}),a(this,Rt,ki).startDrawing(this,a(this,U),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&g(this,ks,e);return}a(this,ks)&&setTimeout(()=>{var e;(e=a(this,ks))==null||e.focus(),g(this,ks,null)},0)}endDrawingSession(t=!1){return a(this,pi)?(a(this,U).setCurrentDrawingSession(null),a(this,pi).abort(),g(this,pi,null),g(this,ks,null),a(this,Rt,ki).endDrawing(t)):null}findNewParent(t,e,i){const s=a(this,U).findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return a(this,pi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,pi)&&a(this,Rt,ki).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,U).getActive())==null?void 0:t.parent)===this&&(a(this,U).commitOrRemove(),a(this,U).setActiveEditor(null)),a(this,Ts)&&(clearTimeout(a(this,Ts)),g(this,Ts,null));for(const i of a(this,Un).values())(e=a(this,la))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,Un).clear(),a(this,U).removeLayer(this)}render({viewport:t}){this.viewport=t,va(this.div,t);for(const e of a(this,U).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,U).commitOrRemove(),S(this,Rt,bf).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,va(this.div,{rotation:i}),e!==i)for(const s of a(this,Un).values())s.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,U).viewParameters.realScale}};la=new WeakMap,ac=new WeakMap,Wi=new WeakMap,Cr=new WeakMap,Ts=new WeakMap,Un=new WeakMap,xr=new WeakMap,lc=new WeakMap,ca=new WeakMap,pi=new WeakMap,ks=new WeakMap,Ie=new WeakMap,Ps=new WeakMap,U=new WeakMap,Tr=new WeakMap,Rt=new WeakSet,K_=function(t){a(this,U).unselectAll();const{target:e}=t;if(e===a(this,Ie).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,Ie).div.contains(e)){const{isMac:i}=We.platform;if(t.button!==0||t.ctrlKey&&i)return;a(this,U).showAllEditors("highlight",!0,!0),a(this,Ie).div.classList.add("free"),this.toggleDrawing(),np.startHighlighting(this,a(this,U).direction==="ltr",{target:a(this,Ie).div,x:t.x,y:t.y}),a(this,Ie).div.addEventListener("pointerup",()=>{a(this,Ie).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,U)._signal}),t.preventDefault()}},ki=function(){return a(ei,Tr).get(a(this,U).getMode())},Iy=function(t){const e=a(this,Rt,ki);return e?new e.prototype.constructor(t):null},My=function(){const{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+i),c=Math.min(window.innerHeight,e+s),u=(r+l)/2-t,h=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},bf=function(){for(const t of a(this,Un).values())t.isEmpty()&&t.remove()},B(ei,"_initialized",!1),A(ei,Tr,new Map([hy,xy,Ty,np].map(t=>[t._editorType,t])));let Ry=ei;var gi,id,Ue,ua,Ep,Q_,Ki,Ny,J_,Dy;const Te=class Te{constructor({pageIndex:t}){A(this,Ki);A(this,gi,null);A(this,id,0);A(this,Ue,new Map);A(this,ua,new Map);this.pageIndex=t}setParent(t){if(!a(this,gi)){g(this,gi,t);return}if(a(this,gi)!==t){if(a(this,Ue).size>0)for(const e of a(this,Ue).values())e.remove(),t.append(e);g(this,gi,t)}}static get _svgFactory(){return it(this,"_svgFactory",new jv)}draw(t,e=!1,i=!1){const s=Fe(this,id)._++,r=S(this,Ki,Ny).call(this),o=Te._svgFactory.createElement("defs");r.append(o);const l=Te._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,ua).set(s,l);const u=i?S(this,Ki,J_).call(this,o,c):null,h=Te._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,t),a(this,Ue).set(s,r),{id:s,clipPathId:`url(#${u})`}}drawOutline(t,e){const i=Fe(this,id)._++,s=S(this,Ki,Ny).call(this),r=Te._svgFactory.createElement("defs");s.append(r);const o=Te._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=Te._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=Te._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Te._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Te._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,t),a(this,Ue).set(i,s),i}finalizeDraw(t,e){a(this,ua).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:i,bbox:s,rootClass:r,path:o}=e,l=typeof t=="number"?a(this,Ue).get(t):t;if(l){if(i&&S(this,Ki,Dy).call(this,l,i),s&&S(c=Te,Ep,Q_).call(c,l,s),r){const{classList:u}=l;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=l.firstChild.firstChild;S(this,Ki,Dy).call(this,h,o)}}}updateParent(t,e){if(e===this)return;const i=a(this,Ue).get(t);i&&(a(e,gi).append(i),a(this,Ue).delete(t),a(e,Ue).set(t,i))}remove(t){a(this,ua).delete(t),a(this,gi)!==null&&(a(this,Ue).get(t).remove(),a(this,Ue).delete(t))}destroy(){g(this,gi,null);for(const t of a(this,Ue).values())t.remove();a(this,Ue).clear(),a(this,ua).clear()}};gi=new WeakMap,id=new WeakMap,Ue=new WeakMap,ua=new WeakMap,Ep=new WeakSet,Q_=function(t,[e,i,s,r]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},Ki=new WeakSet,Ny=function(){const t=Te._svgFactory.create(1,1,!0);return a(this,gi).append(t),t.setAttribute("aria-hidden",!0),t},J_=function(t,e){const i=Te._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=Te._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},Dy=function(t,e){for(const[i,s]of Object.entries(e))s===null?t.removeAttribute(i):t.setAttribute(i,s)},A(Te,Ep);let Ly=Te;globalThis.pdfjsTestingUtils={HighlightOutliner:fy};q.AbortException;q.AnnotationEditorLayer;q.AnnotationEditorParamsType;q.AnnotationEditorType;q.AnnotationEditorUIManager;q.AnnotationLayer;q.AnnotationMode;q.ColorPicker;q.DOMSVGFactory;q.DrawLayer;q.FeatureTest;var YT=q.GlobalWorkerOptions;q.ImageKind;q.InvalidPDFException;q.MissingPDFException;q.OPS;q.OutputScale;q.PDFDataRangeTransport;q.PDFDateString;q.PDFWorker;q.PasswordResponses;q.PermissionFlag;q.PixelsPerInch;q.RenderingCancelledException;q.TextLayer;q.TouchManager;q.UnexpectedResponseException;q.Util;q.VerbosityLevel;q.XfaLayer;q.build;q.createValidAbsoluteUrl;q.fetchData;var Ew=q.getDocument;q.getFilenameFromUrl;q.getPdfFilenameFromUrl;q.getXfaPageViewport;q.isDataScheme;q.isPdfFile;q.noContextMenu;q.normalizeUnicode;q.setLayerDimensions;q.shadow;q.stopEvent;q.version;const XT="4.10.38";YT.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${XT}/pdf.worker.min.mjs`;class Pg{static async getPageCount(t){const e=await t.arrayBuffer();return(await Ew({data:e}).promise).numPages}static async parsePDF(t){const e=await t.arrayBuffer(),i=await Ew({data:e}).promise,s=[];for(let r=1;r<=i.numPages;r++){const c=(await(await i.getPage(r)).getTextContent()).items.map(u=>u.str).join(" ");s.push(c)}return s}static splitIntoCVs(t){const e=[];let i=null;return t.forEach((s,r)=>{const o=s.replace(/\s+/g," ").toLowerCase();/page\s*1\s*of\s*\d+/i.test(o)?(i&&e.push(i),i={pageNumbers:[r+1],text:s}):i?(i.pageNumbers.push(r+1),i.text+=`

`+s):i={pageNumbers:[r+1],text:s}}),i&&e.push(i),e}static async parseAndSplit(t){console.log(" Parsing PDF file:",t.name);const e=await this.parsePDF(t);console.log(` Extracted text from ${e.length} pages`);const i=this.splitIntoCVs(e);return console.log(` Detected ${i.length} individual CVs`),i.forEach((s,r)=>{console.log(`  CV ${r+1}: Pages ${s.pageNumbers.join(", ")}`)}),i}}var _w;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(_w||(_w={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bw;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(bw||(bw={}));var Cw;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Cw||(Cw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=["user","model","function","system"];var Tw;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Tw||(Tw={}));var kw;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(kw||(kw={}));var Pw;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Pw||(Pw={}));var Rw;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(Rw||(Rw={}));var lu;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(lu||(lu={}));var Iw;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(Iw||(Iw={}));var Mw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Mw||(Mw={}));var Lw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Lw||(Lw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Ta extends De{constructor(t,e){super(t),this.response=e}}class Z_ extends De{constructor(t,e,i,s){super(t),this.status=e,this.statusText=i,this.errorDetails=s}}class $r extends De{}class tb extends De{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="https://generativelanguage.googleapis.com",KT="v1beta",QT="0.24.1",JT="genai-js";var Sa;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Sa||(Sa={}));class ZT{constructor(t,e,i,s,r){this.model=t,this.task=e,this.apiKey=i,this.stream=s,this.requestOptions=r}toString(){var t,e;const i=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||KT;let r=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||qT}/${i}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}function tk(n){const t=[];return n!=null&&n.apiClient&&t.push(n.apiClient),t.push(`${JT}/${QT}`),t.join(" ")}async function ek(n){var t;const e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",tk(n.requestOptions)),e.append("x-goog-api-key",n.apiKey);let i=(t=n.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new $r(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(const[s,r]of i.entries()){if(s==="x-goog-api-key")throw new $r(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new $r(`Header name ${s} can only be set using the apiClient field`);e.append(s,r)}}return e}async function nk(n,t,e,i,s,r){const o=new ZT(n,t,e,i,r);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},ok(r)),{method:"POST",headers:await ek(o),body:s})}}async function dd(n,t,e,i,s,r={},o=fetch){const{url:l,fetchOptions:c}=await nk(n,t,e,i,s,r);return ik(l,c,o)}async function ik(n,t,e=fetch){let i;try{i=await e(n,t)}catch(s){sk(s,n)}return i.ok||await rk(i,n),i}function sk(n,t){let e=n;throw e.name==="AbortError"?(e=new tb(`Request aborted when fetching ${t.toString()}: ${n.message}`),e.stack=n.stack):n instanceof Z_||n instanceof $r||(e=new De(`Error fetching from ${t.toString()}: ${n.message}`),e.stack=n.stack),e}async function rk(n,t){let e="",i;try{const s=await n.json();e=s.error.message,s.error.details&&(e+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new Z_(`Error fetching from ${t.toString()}: [${n.status} ${n.statusText}] ${e}`,n.status,n.statusText,i)}function ok(n){const t={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const e=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>e.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{e.abort()}),t.signal=e.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Cf(n.candidates[0]))throw new Ta(`${Xs(n)}`,n);return ak(n)}else if(n.promptFeedback)throw new Ta(`Text not available. ${Xs(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Cf(n.candidates[0]))throw new Ta(`${Xs(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Nw(n)[0]}else if(n.promptFeedback)throw new Ta(`Function call not available. ${Xs(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Cf(n.candidates[0]))throw new Ta(`${Xs(n)}`,n);return Nw(n)}else if(n.promptFeedback)throw new Ta(`Function call not available. ${Xs(n)}`,n)},n}function ak(n){var t,e,i,s;const r=[];if(!((e=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const o of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)o.text&&r.push(o.text),o.executableCode&&r.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&r.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function Nw(n){var t,e,i,s;const r=[];if(!((e=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const o of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)o.functionCall&&r.push(o.functionCall);if(r.length>0)return r}const lk=[lu.RECITATION,lu.SAFETY,lu.LANGUAGE];function Cf(n){return!!n.finishReason&&lk.includes(n.finishReason)}function Xs(n){var t,e,i;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((t=n.promptFeedback)===null||t===void 0)&&t.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((e=n.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const r=n.candidates[0];Cf(r)&&(s+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(s+=`: ${r.finishMessage}`))}return s}function Iu(n){return this instanceof Iu?(this.v=n,this):new Iu(n)}function ck(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),s,r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){i[f]&&(s[f]=function(p){return new Promise(function(m,v){r.push([f,p,m,v])>1||l(f,p)})})}function l(f,p){try{c(i[f](p))}catch(m){d(r[0][3],m)}}function c(f){f.value instanceof Iu?Promise.resolve(f.value.v).then(u,h):d(r[0][2],f)}function u(f){l("next",f)}function h(f){l("throw",f)}function d(f,p){f(p),r.shift(),r.length&&l(r[0][0],r[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function uk(n){const t=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=fk(t),[i,s]=e.tee();return{stream:dk(i),response:hk(s)}}async function hk(n){const t=[],e=n.getReader();for(;;){const{done:i,value:s}=await e.read();if(i)return $v(pk(t));t.push(s)}}function dk(n){return ck(this,arguments,function*(){const e=n.getReader();for(;;){const{value:i,done:s}=yield Iu(e.read());if(s)break;yield yield Iu($v(i))}})}function fk(n){const t=n.getReader();return new ReadableStream({start(i){let s="";return r();function r(){return t.read().then(({value:o,done:l})=>{if(l){if(s.trim()){i.error(new De("Failed to parse stream"));return}i.close();return}s+=o;let c=s.match(Dw),u;for(;c;){try{u=JSON.parse(c[1])}catch{i.error(new De(`Error parsing JSON response: "${c[1]}"`));return}i.enqueue(u),s=s.substring(c[0].length),c=s.match(Dw)}return r()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new tb("Request aborted when reading from the stream"):l=new De("Error reading from the stream"),l})}}})}function pk(n){const t=n[n.length-1],e={promptFeedback:t==null?void 0:t.promptFeedback};for(const i of n){if(i.candidates){let s=0;for(const r of i.candidates)if(e.candidates||(e.candidates=[]),e.candidates[s]||(e.candidates[s]={index:s}),e.candidates[s].citationMetadata=r.citationMetadata,e.candidates[s].groundingMetadata=r.groundingMetadata,e.candidates[s].finishReason=r.finishReason,e.candidates[s].finishMessage=r.finishMessage,e.candidates[s].safetyRatings=r.safetyRatings,r.content&&r.content.parts){e.candidates[s].content||(e.candidates[s].content={role:r.content.role||"user",parts:[]});const o={};for(const l of r.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),e.candidates[s].content.parts.push(o)}s++}i.usageMetadata&&(e.usageMetadata=i.usageMetadata)}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eb(n,t,e,i){const s=await dd(t,Sa.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(e),i);return uk(s)}async function nb(n,t,e,i){const r=await(await dd(t,Sa.GENERATE_CONTENT,n,!1,JSON.stringify(e),i)).json();return{response:$v(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Mu(n){let t=[];if(typeof n=="string")t=[{text:n}];else for(const e of n)typeof e=="string"?t.push({text:e}):t.push(e);return gk(t)}function gk(n){const t={role:"user",parts:[]},e={role:"function",parts:[]};let i=!1,s=!1;for(const r of n)"functionResponse"in r?(e.parts.push(r),s=!0):(t.parts.push(r),i=!0);if(i&&s)throw new De("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new De("No content is provided for sending chat message.");return i?t:e}function mk(n,t){var e;let i={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(e=t==null?void 0:t.cachedContent)===null||e===void 0?void 0:e.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new $r("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(s)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const r=Mu(n);i.contents=[r]}return{generateContentRequest:i}}function Ow(n){let t;return n.contents?t=n:t={contents:[Mu(n)]},n.systemInstruction&&(t.systemInstruction=ib(n.systemInstruction)),t}function yk(n){return typeof n=="string"||Array.isArray(n)?{content:Mu(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],vk={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function wk(n){let t=!1;for(const e of n){const{role:i,parts:s}=e;if(!t&&i!=="user")throw new De(`First content should be with role 'user', got ${i}`);if(!xw.includes(i))throw new De(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(xw)}`);if(!Array.isArray(s))throw new De("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new De("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of s)for(const c of Fw)c in l&&(r[c]+=1);const o=vk[i];for(const l of Fw)if(!o.includes(l)&&r[l]>0)throw new De(`Content with role '${i}' can't contain '${l}' part`);t=!0}}function jw(n){var t;if(n.candidates===void 0||n.candidates.length===0)return!1;const e=(t=n.candidates[0])===null||t===void 0?void 0:t.content;if(e===void 0||e.parts===void 0||e.parts.length===0)return!1;for(const i of e.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="SILENT_ERROR";class Ak{constructor(t,e,i,s={}){this.model=e,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,i!=null&&i.history&&(wk(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,e={}){var i,s,r,o,l,c;await this._sendPromise;const u=Mu(t),h={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},d=Object.assign(Object.assign({},this._requestOptions),e);let f;return this._sendPromise=this._sendPromise.then(()=>nb(this._apiKey,this.model,h,d)).then(p=>{var m;if(jw(p.response)){this._history.push(u);const v=Object.assign({parts:[],role:"model"},(m=p.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(v)}else{const v=Xs(p.response);v&&console.warn(`sendMessage() was unsuccessful. ${v}. Inspect response object for details.`)}f=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,f}async sendMessageStream(t,e={}){var i,s,r,o,l,c;await this._sendPromise;const u=Mu(t),h={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},d=Object.assign(Object.assign({},this._requestOptions),e),f=eb(this._apiKey,this.model,h,d);return this._sendPromise=this._sendPromise.then(()=>f).catch(p=>{throw new Error(zw)}).then(p=>p.response).then(p=>{if(jw(p)){this._history.push(u);const m=Object.assign({},p.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{const m=Xs(p);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(p=>{p.message!==zw&&console.error(p)}),f}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(n,t,e,i){return(await dd(t,Sa.COUNT_TOKENS,n,!1,JSON.stringify(e),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(n,t,e,i){return(await dd(t,Sa.EMBED_CONTENT,n,!1,JSON.stringify(e),i)).json()}async function _k(n,t,e,i){const s=e.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await dd(t,Sa.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t,e,i={}){this.apiKey=t,this._requestOptions=i,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=ib(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(t,e={}){var i;const s=Ow(t),r=Object.assign(Object.assign({},this._requestOptions),e);return nb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),r)}async generateContentStream(t,e={}){var i;const s=Ow(t),r=Object.assign(Object.assign({},this._requestOptions),e);return eb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),r)}startChat(t){var e;return new Ak(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(e=this.cachedContent)===null||e===void 0?void 0:e.name},t),this._requestOptions)}async countTokens(t,e={}){const i=mk(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),e);return Sk(this.apiKey,this.model,i,s)}async embedContent(t,e={}){const i=yk(t),s=Object.assign(Object.assign({},this._requestOptions),e);return Ek(this.apiKey,this.model,i,s)}async batchEmbedContents(t,e={}){const i=Object.assign(Object.assign({},this._requestOptions),e);return _k(this.apiKey,this.model,t,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new De("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new $w(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,i){if(!t.name)throw new $r("Cached content must contain a `name` field.");if(!t.model)throw new $r("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const o of s)if(e!=null&&e[o]&&t[o]&&(e==null?void 0:e[o])!==t[o]){if(o==="model"){const l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new $r(`Different value for "${o}" specified in modelParams (${e[o]}) and cachedContent (${t[o]})`)}const r=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new $w(this.apiKey,r,i)}}class Ck{constructor(t=6e3){B(this,"queue",[]);B(this,"processing",!1);B(this,"lastRequestTime",0);this.minDelayMs=t}async enqueue(t){return new Promise((e,i)=>{this.queue.push({fn:t,resolve:e,reject:i}),this.processQueue()})}async processQueue(){if(!(this.processing||this.queue.length===0)){for(this.processing=!0;this.queue.length>0;){const e=Date.now()-this.lastRequestTime;e<this.minDelayMs&&await this.sleep(this.minDelayMs-e);const i=this.queue.shift();if(!i)break;try{this.lastRequestTime=Date.now();const s=await i.fn();i.resolve(s)}catch(s){i.reject(s)}}this.processing=!1}}sleep(t){return new Promise(e=>setTimeout(e,t))}getQueueLength(){return this.queue.length}clear(){this.queue.forEach(t=>{t.reject(new Error("Request cancelled"))}),this.queue=[]}setDelay(t){this.minDelayMs=t}}const Ic=new Ck(6e3);class il{static initialize(t){this.apiKey=t,this.genAI=new bk(t)}static setApiTier(t){t==="free"?(Ic.setDelay(6e3),this.retryDelays=[6e3,12e3,18e3],console.log(" API Tier: FREE (10 RPM, slower retries)")):(Ic.setDelay(100),this.retryDelays=[1e3,2e3,4e3],console.log(" API Tier: PAID (600 RPM, fast retries)"))}static async extractCVData(t,e="gemini-2.5-flash"){return!this.genAI||!this.apiKey?{success:!1,error:"Gemini AI not initialized. Call initialize() first."}:Ic.enqueue(async()=>this.extractWithRetry(t,e))}static async extractWithRetry(t,e,i=1){try{return await this.performExtraction(t,e)}catch(r){if(console.error(` Extraction attempt ${i} failed:`,r.message),i<3){const o=this.retryDelays[i-1];return console.log(` Retrying in ${o/1e3}s... (attempt ${i+1}/3)`),await this.sleep(o),this.extractWithRetry(t,e,i+1)}return{success:!1,error:`Failed after 3 attempts: ${r.message}`}}}static async performExtraction(t,e){const i=this.genAI.getGenerativeModel({model:e,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"object",properties:{name:{type:"string",description:"Full name of the candidate"},workHistory:{type:"array",description:"Last 5 work experiences (excluding board member roles)",items:{type:"object",properties:{company:{type:"string"},jobTitle:{type:"string"},dates:{type:"string",description:"Format: MM/YYYY - MM/YYYY or MM/YYYY - Present"}},required:["company","jobTitle"]}},education:{type:"array",description:"All education entries",items:{type:"object",properties:{institution:{type:"string"},degree:{type:"string"},dates:{type:"string",description:"Format: YYYY - YYYY"}},required:["institution","degree"]}}},required:["name","workHistory","education"]}}}),s=`
Extract structured information from this CV. IMPORTANT instructions:

1. Extract the candidate's FULL NAME
2. Extract the LAST 5 WORK EXPERIENCES (most recent first)
   - EXCLUDE any "Board Member", "Board Director", or similar non-operational roles
   - ONLY include operational positions (jobs where the person actively works)
   - Format dates as: MM/YYYY - MM/YYYY (e.g., "01/2020 - 12/2022")
   - Use "Present" for current positions
3. Extract ALL EDUCATION entries
   - Format dates as: YYYY - YYYY (e.g., "2016 - 2018")

CV Text:
${t}
`,l=(await i.generateContent(s)).response.text();let c;try{c=JSON.parse(l)}catch{throw new Error("Failed to parse JSON response from Gemini")}const u={name:c.name||"Unknown",workHistory:this.cleanWorkHistory(c.workHistory||[]),education:this.cleanEducation(c.education||[]),rawText:t};return u.workHistory=this.filterBoardMemberRoles(u.workHistory),{success:!0,data:u}}static cleanWorkHistory(t){return t.filter(e=>e.company&&e.jobTitle).slice(0,5).map(e=>({company:String(e.company).trim(),jobTitle:String(e.jobTitle).trim(),dates:e.dates?String(e.dates).trim():void 0}))}static cleanEducation(t){return t.filter(e=>e.institution&&e.degree).map(e=>({institution:String(e.institution).trim(),degree:String(e.degree).trim(),dates:e.dates?String(e.dates).trim():void 0}))}static filterBoardMemberRoles(t){const e=["board member","board director","advisory board","board of directors","non-executive director"];return t.filter(i=>{const s=i.jobTitle.toLowerCase();return!e.some(r=>s.includes(r))})}static sleep(t){return new Promise(e=>setTimeout(e,t))}static clearQueue(){Ic.clear()}static getQueueLength(){return Ic.getQueueLength()}}B(il,"genAI",null),B(il,"apiKey",null),B(il,"retryDelays",[6e3,12e3,18e3]);class cu{static inchToEmu(t){return Math.round(t*this.INCH_TO_EMU)}static async initialize(){return new Promise((t,e)=>{if(!window.gapi){e(new Error("Google API client not loaded"));return}window.gapi.load("client",async()=>{try{await window.gapi.client.load("slides","v1"),console.log(" Google Slides API loaded"),t()}catch(i){e(i)}})})}static async copyPresentation(t,e){console.log(" Phase 1: Copying template presentation...");const i=await window.gapi.client.request({path:`https://www.googleapis.com/drive/v3/files/${t}/copy`,method:"POST",body:{name:e}});if(!i||!i.result||!i.result.id)throw new Error("Failed to copy template presentation");const s=i.result.id;return console.log(` Template copied. New presentation ID: ${s}`),s}static async getSlideObjectId(t,e=1){console.log(` Phase 2: Getting objectId for slide at index ${e}...`);const s=(await window.gapi.client.request({path:`${this.SLIDES_API_BASE}/presentations/${t}?fields=slides.objectId`,method:"GET"})).result.slides;if(!s||s.length<=e)throw new Error(`Template must have at least ${e+1} slides`);const r=s[e].objectId;return console.log(` Slide ${e+1} objectId: ${r}`),r}static async createPresentation(t,e="CV Candidates",i){var s,r;try{if(!window.gapi||!window.gapi.client)throw new Error("Google API client not initialized");console.log(" Creating presentation..."),console.log("   Token set:",window.gapi.client.getToken()!==null),console.log("   Template ID:",i||"None (creating blank)");let o;if(i)o=await this.copyPresentation(i,e),await this.duplicateAndPopulateSlides(o,t);else{const c=await window.gapi.client.request({path:`${this.SLIDES_API_BASE}/presentations`,method:"POST",body:{title:e}});if(!c||!c.result)throw new Error("No response from Slides API");o=c.result.presentationId,console.log(` Created blank presentation: ${o}`),await this.addCandidateSlides(o,t)}const l=`https://docs.google.com/presentation/d/${o}/edit`;return console.log(` Presentation ready: ${l}`),{success:!0,presentationId:o,presentationUrl:l}}catch(o){return console.error(" Failed to create presentation:",o),console.error("   Full error object:",JSON.stringify(o,null,2)),console.error("   Error body:",o.body),console.error("   Error result:",o.result),{success:!1,error:((r=(s=o.result)==null?void 0:s.error)==null?void 0:r.message)||o.message||"Unknown error"}}}static async duplicateAndPopulateSlides(t,e){const i=Date.now(),s=4,r=Math.ceil(e.length/s),o=Math.max(0,r-1);console.log(` Phase 2: Need ${r} slides for ${e.length} candidates`),console.log(`   Using original Slide 2 + ${o} duplications`);const l=await this.getSlideObjectId(t,1);console.log(" Phase 3: Building batch requests...");const c=[],u=[];for(let d=0;d<o;d++)u.push(`candidate_slide_${d}_${i}`);const h=[l,...u];u.forEach((d,f)=>{console.log(`   Duplication ${f+1}: ${l}  ${d} at position ${2+f}`),c.push({duplicateObject:{objectId:l,objectIds:{[l]:d},insertionIndex:2+f}})});for(let d=0;d<r;d++){const f=d*s,p=e.slice(f,f+s),m=h[d];console.log(`   Slide ${d+1} (${m}): ${p.length} candidates`),p.forEach((v,_)=>{const y=this.LAYOUT.rows[_],w=`edu_s${d}_c${_}_${i}`;c.push(...this.createEducationBox(m,w,v,y));const E=`exp_s${d}_c${_}_${i}`;c.push(...this.createExperienceBox(m,E,v,y))})}console.log(` Phase 4: Executing ${c.length} requests in ONE atomic batch...`);try{await window.gapi.client.request({path:`${this.SLIDES_API_BASE}/presentations/${t}:batchUpdate`,method:"POST",body:{requests:c}}),console.log(" All slides created successfully!"),console.log(`   ${r} slides with ${e.length} total candidates`)}catch(d){throw console.error(" Batch update failed:",d),console.error("   Full error:",JSON.stringify(d,null,2)),console.error("   Error body:",d.body),console.error("   Total requests:",c.length),d}}static async addCandidateSlides(t,e){const i=[];for(let s=0;s<e.length;s+=4)i.push(e.slice(s,s+4));console.log(` Creating ${i.length} slides for ${e.length} candidates`);for(let s=0;s<i.length;s++){const r=i[s];await this.createSlideWithCandidates(t,r,s)}}static async createSlideWithCandidates(t,e,i){const s=[],r=`slide_${i}_${Date.now()}`;s.push({createSlide:{objectId:r,slideLayoutReference:{predefinedLayout:"BLANK"}}}),e.forEach((o,l)=>{const c=this.LAYOUT.rows[l],u=`edu_${i}_${l}_${Date.now()}`;s.push(...this.createEducationBox(r,u,o,c));const h=`exp_${i}_${l}_${Date.now()}`;s.push(...this.createExperienceBox(r,h,o,c))}),console.log(`   Sending ${s.length} requests for slide ${i+1}...`);try{await window.gapi.client.request({path:`${this.SLIDES_API_BASE}/presentations/${t}:batchUpdate`,method:"POST",body:{requests:s}}),console.log(`   Slide ${i+1} created with ${e.length} candidates`)}catch(o){throw console.error(`   Failed to create slide ${i+1}:`,o),console.error("  Full batch update error:",JSON.stringify(o,null,2)),console.error("  Error body:",o.body),console.error("  Requests that failed:",JSON.stringify(s,null,2)),o}}static createEducationBox(t,e,i,s){const r=[],o=this.LAYOUT.education;r.push({createShape:{objectId:e,shapeType:"TEXT_BOX",elementProperties:{pageObjectId:t,size:{width:{magnitude:this.inchToEmu(o.w),unit:"EMU"},height:{magnitude:this.inchToEmu(s.h),unit:"EMU"}},transform:{scaleX:1,scaleY:1,translateX:this.inchToEmu(o.x),translateY:this.inchToEmu(s.y),unit:"EMU"}}}});const l=this.formatEducationText(i);return r.push({insertText:{objectId:e,text:l}}),r.push({updateParagraphStyle:{objectId:e,style:{lineSpacing:100,spaceAbove:{magnitude:0,unit:"PT"},spaceBelow:{magnitude:0,unit:"PT"}},fields:"lineSpacing,spaceAbove,spaceBelow"}}),r.push({updateTextStyle:{objectId:e,style:{fontSize:{magnitude:10,unit:"PT"}},fields:"fontSize"}}),r.push({updateShapeProperties:{objectId:e,shapeProperties:{contentAlignment:"MIDDLE"},fields:"contentAlignment"}}),this.getInstitutionBoldRanges(i,l).forEach(u=>{r.push({updateTextStyle:{objectId:e,textRange:{type:"FIXED_RANGE",startIndex:u.start,endIndex:u.end},style:{bold:!0},fields:"bold"}})}),r}static createExperienceBox(t,e,i,s){const r=[],o=this.LAYOUT.experience;r.push({createShape:{objectId:e,shapeType:"TEXT_BOX",elementProperties:{pageObjectId:t,size:{width:{magnitude:this.inchToEmu(o.w),unit:"EMU"},height:{magnitude:this.inchToEmu(s.h),unit:"EMU"}},transform:{scaleX:1,scaleY:1,translateX:this.inchToEmu(o.x),translateY:this.inchToEmu(s.y),unit:"EMU"}}}});const l=this.formatExperienceText(i);r.push({insertText:{objectId:e,text:l}}),r.push({updateParagraphStyle:{objectId:e,style:{lineSpacing:100,spaceAbove:{magnitude:0,unit:"PT"},spaceBelow:{magnitude:0,unit:"PT"}},fields:"lineSpacing,spaceAbove,spaceBelow"}}),r.push({updateTextStyle:{objectId:e,style:{fontSize:{magnitude:10,unit:"PT"}},fields:"fontSize"}}),r.push({updateShapeProperties:{objectId:e,shapeProperties:{contentAlignment:"MIDDLE"},fields:"contentAlignment"}});const c=i.name.toUpperCase().length;return r.push({updateTextStyle:{objectId:e,textRange:{type:"FIXED_RANGE",startIndex:0,endIndex:c},style:{bold:!0},fields:"bold"}}),r}static formatEducationText(t){const e=[];return t.education.length>0?t.education.forEach(i=>{e.push(i.institution),e.push(` ${i.degree}`)}):e.push("No education listed"),e.join(`
`)}static formatExperienceText(t){const e=[];return e.push(t.name.toUpperCase()),t.workHistory.length>0?t.workHistory.forEach(i=>{const s=i.dates?` (${i.dates})`:"";e.push(` ${i.company}  ${i.jobTitle}${s}`)}):e.push(" No work history listed"),e.join(`
`)}static getInstitutionBoldRanges(t,e){const i=[];let s=0;return t.education.forEach(r=>{const o=e.indexOf(r.institution,s);o!==-1&&(i.push({start:o,end:o+r.institution.length}),s=o+r.institution.length)}),i}}B(cu,"SLIDES_API_BASE","https://slides.googleapis.com/v1"),B(cu,"INCH_TO_EMU",914400),B(cu,"LAYOUT",{education:{x:.76,w:3.94},experience:{x:4.82,w:5.18},rows:[{y:.72,h:1.5},{y:2.41,h:1.5},{y:4.16,h:1.5},{y:5.9,h:1.5}]});const xk="815174038885-03a6vabiuh0m2fn4n93g2jj6ipu1aslv.apps.googleusercontent.com",Tk=["https://www.googleapis.com/auth/presentations","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/userinfo.email"].join(" ");class Rr{static async initialize(){return new Promise((t,e)=>{const i=setInterval(()=>{window.google&&window.gapi&&(clearInterval(i),window.gapi.load("client",async()=>{try{await window.gapi.client.init({discoveryDocs:["https://slides.googleapis.com/$discovery/rest?version=v1"]}),this.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:xk,scope:Tk,callback:s=>{if(s.error){console.error("OAuth error:",s.error),this.updateAuthState(!1,null,null);return}this.accessToken=s.access_token,console.log(" Access token received"),window.gapi.client.setToken({access_token:s.access_token}),this.updateAuthState(!0,this.accessToken,this.userEmail),this.getUserInfo().then(()=>{console.log(" User info retrieved:",this.userEmail),this.userEmail&&this.updateAuthState(!0,this.accessToken,this.userEmail)}).catch(r=>{console.error(" Failed to get user info (but authentication still works):",r)})}}),t()}catch(s){console.error("Failed to initialize Google API:",s),e(s)}}))},100);setTimeout(()=>{clearInterval(i),e(new Error("Google scripts failed to load"))},1e4)})}static onAuthStateChange(t){this.authStateCallback=t}static updateAuthState(t,e,i){this.accessToken=e,this.userEmail=i,this.authStateCallback&&this.authStateCallback({isAuthenticated:t,accessToken:e,userEmail:i})}static async getUserInfo(){if(this.accessToken)try{const e=await(await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${this.accessToken}`}})).json();this.userEmail=e.email}catch(t){console.error("Failed to get user info:",t)}}static signIn(){if(!this.tokenClient){console.error("Token client not initialized. Call initialize() first.");return}this.tokenClient.requestAccessToken()}static signOut(){this.accessToken&&window.google&&window.google.accounts.oauth2.revoke(this.accessToken,()=>{console.log("Access token revoked")}),this.accessToken=null,this.userEmail=null,window.gapi&&window.gapi.client&&window.gapi.client.setToken(null),this.updateAuthState(!1,null,null)}static getAccessToken(){return this.accessToken}static getUserEmail(){return this.userEmail}static isAuthenticated(){return this.accessToken!==null}static getAuthState(){return{isAuthenticated:this.isAuthenticated(),accessToken:this.accessToken,userEmail:this.userEmail}}}B(Rr,"tokenClient",null),B(Rr,"accessToken",null),B(Rr,"userEmail",null),B(Rr,"authStateCallback",null);function kk(){const[n,t]=lt.useState(()=>Je.getTheme()),[e,i]=lt.useState(()=>Je.getActualTheme()),[s,r]=lt.useState(()=>Je.getGeminiKey()),[o,l]=lt.useState(()=>Je.getTemplateId()),[c,u]=lt.useState([]),[h,d]=lt.useState("idle"),[f,p]=lt.useState([]),[m,v]=lt.useState([]),[_,y]=lt.useState([]),[w,E]=lt.useState(0),[b,C]=lt.useState(0),[x,T]=lt.useState("gemini-2.5-flash"),[P,M]=lt.useState(()=>Je.getParseMode()),[L,H]=lt.useState(()=>Je.getApiTier()),[tt,pt]=lt.useState({isAuthenticated:!1,accessToken:null,userEmail:null}),[et,Bt]=lt.useState(null),[D,G]=lt.useState(!1),[I,W]=lt.useState(!1),[X,ot]=lt.useState(0);lt.useEffect(()=>{Rr.initialize().then(()=>{console.log(" Google Auth initialized"),Rr.onAuthStateChange(O=>{pt(O),O.isAuthenticated&&cu.initialize().then(()=>console.log(" Google Slides API initialized")).catch(dn=>console.error(" Failed to initialize Slides API:",dn))})}).catch(O=>{console.error(" Failed to initialize Google Auth:",O)})},[]),lt.useEffect(()=>{s&&(il.initialize(s),console.log(" Gemini AI initialized"))},[s]),lt.useEffect(()=>{il.setApiTier(L)},[L]),lt.useEffect(()=>{document.body.className=`${e}-mode`},[e]),lt.useEffect(()=>{if(n!=="system")return;const O=window.matchMedia("(prefers-color-scheme: dark)"),dn=de=>{const Ht=de.matches?"dark":"light";i(Ht)};return O.addEventListener("change",dn),()=>{O.removeEventListener("change",dn)}},[n]);const st=()=>{let O;n==="system"?O="light":n==="light"?O="dark":O="system",t(O),Je.saveTheme(O),i(O==="system"?Je.getActualTheme():O)},St=O=>{r(O),Je.saveGeminiKey(O)},Ee=()=>{r(null),Je.removeGeminiKey()},Zn=O=>{l(O),Je.saveTemplateId(O)},Tt=()=>{l(null),Je.removeTemplateId()},dt=O=>{M(O),Je.saveParseMode(O),console.log(` Parse mode changed to: ${O}`)},Us=O=>{H(O),Je.saveApiTier(O),console.log(` API tier changed to: ${O.toUpperCase()}`)},fd=()=>{Rr.signIn()},Yp=()=>{Rr.signOut()},sb=async O=>{u(O),p([]),v([]),y([]),Bt(null),d("idle")},rb=()=>{u([]),p([]),v([]),y([]),d("idle"),E(0),C(0),Bt(null),G(!1),ot(O=>O+1),W(!0),setTimeout(()=>W(!1),1500)},ob=async()=>{if(c.length===0){alert("Please upload at least one PDF file first");return}if(!s){alert("Please enter your Gemini API key first");return}try{d("parsing"),E(0),C(0),console.log(` Parsing ${c.length} PDF file(s) in ${P} mode...`);const O=[];for(let Ht=0;Ht<c.length;Ht++){const bi=c[Ht];if(console.log(`
 Processing file ${Ht+1}/${c.length}: ${bi.name}`),P==="longlist"){const fn=await Pg.parseAndSplit(bi);console.log(`    Found ${fn.length} CVs in ${bi.name}`),O.push(...fn)}else{const fn=await Pg.parsePDF(bi),pd=await Pg.getPageCount(bi),lb=Array.from({length:pd},(Pk,ub)=>ub+1),cb={text:fn.join(`

`),pageNumbers:lb,fileName:bi.name};console.log(`    Parsed ${bi.name} (${pd} pages)`),O.push(cb)}}p(O),C(O.length),console.log(`
 Parsing complete! Total CVs to extract: ${O.length}`),d("extracting"),E(0);const dn=[],de=[];console.log(` Starting Gemini extraction for ${O.length} CVs...`);for(let Ht=0;Ht<O.length;Ht++){const bi=O[Ht];console.log(`
 Extracting CV ${Ht+1}/${O.length}...`),E(Ht+1);const fn=await il.extractCVData(bi.text,x);if(fn.success&&fn.data)dn.push(fn.data),console.log(` Extracted: ${fn.data.name}`),console.log(`   - Work history: ${fn.data.workHistory.length} entries`),console.log(`   - Education: ${fn.data.education.length} entries`);else{const pd={candidateIndex:Ht,error:fn.error||"Unknown error",rawText:bi.text};de.push(pd),console.error(` Failed to extract CV ${Ht+1}: ${fn.error}`)}}v(dn),y(de),d("done"),console.log(`
`),console.log(" Extraction complete!"),console.log(`   - Successful: ${dn.length}/${O.length}`),console.log(`   - Failed: ${de.length}/${O.length}`),console.log(""),de.length>0&&(console.warn(`
 Failed extractions:`),de.forEach(Ht=>{console.warn(`   CV ${Ht.candidateIndex+1}: ${Ht.error}`)}))}catch(O){console.error(" Error during processing:",O),d("error"),alert("Error during processing: "+O.message)}},ab=async()=>{if(!tt.isAuthenticated){alert("Please sign in with Google first");return}if(m.length===0){alert("No candidates to generate slides for");return}try{G(!0),d("generating"),console.log(` Generating Google Slides for ${m.length} candidates...`);const O=await cu.createPresentation(m,`CV Candidates - ${new Date().toLocaleDateString()}`,o||void 0);if(O.success&&O.presentationUrl)Bt(O.presentationUrl),d("done"),console.log(` Presentation created: ${O.presentationUrl}`);else throw new Error(O.error||"Failed to create presentation")}catch(O){console.error(" Error generating slides:",O),d("error"),alert("Error generating slides: "+O.message)}finally{G(!1)}},Qe=e==="dark"?"#e0e0e0":"#2a2a2a",Qi=e==="dark"?"#2a2a2a":"#fefdfb",jt=e==="dark"?"#e0e0e0":"#2a2a2a",Xp=c.length>0&&s&&h==="idle";return k.jsxs("div",{className:"container",children:[k.jsxs("div",{className:"header",children:[k.jsx(zC,{themePreference:n,actualTheme:e,onToggle:st}),k.jsx("div",{className:"title",children:" LL2PP "}),k.jsx("button",{className:"reset-button",onClick:rb,title:"Reset application",style:{borderColor:I?"#4CAF50":void 0,color:I?"#4CAF50":void 0,transition:"all 0.3s ease"},children:I?"[  CLEARED ]":"[  RESET ]"})]}),k.jsx("div",{className:"subtitle",children:"[ LongList to Presentation - Convert CV PDFs to Google Slides ]"}),k.jsx($C,{existingKey:s,onSave:St,onRemove:Ee,theme:e}),k.jsx(WC,{isAuthenticated:tt.isAuthenticated,userEmail:tt.userEmail,onSignIn:fd,onSignOut:Yp,theme:e}),k.jsx(BC,{existingTemplateId:o,onSave:Zn,onRemove:Tt,theme:e}),k.jsx(UC,{tier:L,onTierChange:Us,theme:e}),k.jsx(HC,{mode:P,onModeChange:dt,theme:e}),k.jsx(GC,{onFileSelect:sb,theme:e,disabled:h!=="idle"&&h!=="done"&&h!=="error",parseMode:P},X),c.length>0&&s&&k.jsxs("div",{style:{padding:"1.5rem",border:`2px solid ${Qe}`,background:Qi,boxShadow:`4px 4px 0px ${Qe}`,marginBottom:"1.5rem"},children:[k.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"bold",marginBottom:"1rem",letterSpacing:"0.1em",color:jt},children:"[  SELECT AI MODEL ]"}),k.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[k.jsx("button",{onClick:()=>T("gemini-2.5-flash"),style:{padding:"0.75rem 1.5rem",background:x==="gemini-2.5-flash"?jt:"none",border:`2px solid ${Qe}`,color:x==="gemini-2.5-flash"?Qi:jt,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:"pointer",letterSpacing:"0.1em",fontSize:"0.875rem"},children:"2.5 FLASH"}),k.jsx("button",{onClick:()=>T("gemini-2.5-pro"),style:{padding:"0.75rem 1.5rem",background:x==="gemini-2.5-pro"?jt:"none",border:`2px solid ${Qe}`,color:x==="gemini-2.5-pro"?Qi:jt,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:"pointer",letterSpacing:"0.1em",fontSize:"0.875rem"},children:"2.5 PRO"}),k.jsx("button",{onClick:()=>T("gemini-3-pro-preview"),style:{padding:"0.75rem 1.5rem",background:x==="gemini-3-pro-preview"?jt:"none",border:`2px solid ${Qe}`,color:x==="gemini-3-pro-preview"?Qi:jt,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:"pointer",letterSpacing:"0.1em",fontSize:"0.875rem"},children:"3.0 PRO "})]}),k.jsxs("div",{style:{fontSize:"0.75rem",opacity:.6,marginTop:"0.75rem",textAlign:"center",color:jt},children:[x==="gemini-2.5-flash"&&" Fast processing, good for most CVs",x==="gemini-2.5-pro"&&" More reliable extraction, slower",x==="gemini-3-pro-preview"&&" Latest model, best accuracy (Nov 2025)"]})]}),k.jsx(VC,{status:h,current:w,total:b,theme:e}),c.length>0&&s&&k.jsxs("div",{style:{padding:"1.5rem",border:`2px solid ${Qe}`,background:Qi,boxShadow:`4px 4px 0px ${Qe}`,marginBottom:"1.5rem",textAlign:"center"},children:[k.jsx("button",{onClick:ob,disabled:!Xp,style:{padding:"1rem 2rem",background:"none",border:`2px solid ${Qe}`,color:jt,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:Xp?"pointer":"not-allowed",letterSpacing:"0.1em",fontSize:"1rem",opacity:Xp?1:.5},children:"[  PROCESS CVs ]"}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.6,marginTop:"0.5rem",color:jt},children:"Parse PDF(s) + Extract with Gemini AI"})]}),m.length>0&&!et&&k.jsxs("div",{style:{padding:"1.5rem",border:`2px solid ${Qe}`,background:Qi,boxShadow:`4px 4px 0px ${Qe}`,marginBottom:"1.5rem",textAlign:"center"},children:[k.jsx("button",{onClick:ab,disabled:!tt.isAuthenticated||D,style:{padding:"1rem 2rem",background:"none",border:`2px solid ${Qe}`,color:jt,fontFamily:"Courier New, monospace",fontWeight:"bold",cursor:tt.isAuthenticated&&!D?"pointer":"not-allowed",letterSpacing:"0.1em",fontSize:"1rem",opacity:tt.isAuthenticated&&!D?1:.5},children:D?"[  GENERATING... ]":"[  GENERATE GOOGLE SLIDES ]"}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.6,marginTop:"0.5rem",color:jt},children:tt.isAuthenticated?`Create presentation with ${m.length} candidates`:"Sign in with Google to generate slides"})]}),et&&k.jsxs("div",{style:{padding:"1.5rem",border:"2px solid #4CAF50",background:Qi,boxShadow:"4px 4px 0px #4CAF50",marginBottom:"1.5rem"},children:[k.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"bold",marginBottom:"1rem",letterSpacing:"0.1em",color:"#4CAF50"},children:"[  PRESENTATION CREATED ]"}),k.jsx("a",{href:et,target:"_blank",rel:"noopener noreferrer",style:{color:"#4CAF50",textDecoration:"underline",fontSize:"0.875rem",fontFamily:"Courier New, monospace",wordBreak:"break-all"},children:et}),k.jsx("div",{style:{fontSize:"0.75rem",opacity:.6,marginTop:"0.5rem",color:jt},children:"Click to open in Google Slides"})]}),m.length>0&&k.jsxs("div",{style:{padding:"1.5rem",border:`2px solid ${Qe}`,background:Qi,boxShadow:`4px 4px 0px ${Qe}`,marginBottom:"1.5rem"},children:[k.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"bold",marginBottom:"1rem",letterSpacing:"0.1em",color:jt},children:["[  EXTRACTED CANDIDATES: ",m.length," ]"]}),m.map((O,dn)=>k.jsxs("div",{style:{padding:"1rem",border:`1px solid ${Qe}`,marginBottom:"1rem",background:e==="dark"?"#1a1a1a":"#fff"},children:[k.jsxs("div",{style:{fontWeight:"bold",fontSize:"1rem",marginBottom:"0.75rem",color:jt},children:[dn+1,". ",O.name]}),k.jsxs("div",{style:{marginBottom:"0.75rem"},children:[k.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",marginBottom:"0.25rem",color:jt,opacity:.8},children:"WORK HISTORY:"}),O.workHistory.length>0?O.workHistory.map((de,Ht)=>k.jsxs("div",{style:{fontSize:"0.75rem",marginLeft:"1rem",marginBottom:"0.25rem",color:jt,opacity:.7},children:[" ",de.jobTitle," at ",de.company,de.dates&&` (${de.dates})`]},Ht)):k.jsx("div",{style:{fontSize:"0.75rem",marginLeft:"1rem",color:jt,opacity:.5},children:"No work history found"})]}),k.jsxs("div",{children:[k.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",marginBottom:"0.25rem",color:jt,opacity:.8},children:"EDUCATION:"}),O.education.length>0?O.education.map((de,Ht)=>k.jsxs("div",{style:{fontSize:"0.75rem",marginLeft:"1rem",marginBottom:"0.25rem",color:jt,opacity:.7},children:[" ",de.degree," from ",de.institution,de.dates&&` (${de.dates})`]},Ht)):k.jsx("div",{style:{fontSize:"0.75rem",marginLeft:"1rem",color:jt,opacity:.5},children:"No education found"})]})]},dn))]}),m.length>0&&k.jsx(YC,{candidates:m,theme:e}),_.length>0&&k.jsxs("div",{style:{padding:"1.5rem",border:"2px solid #ff6b6b",background:Qi,boxShadow:"4px 4px 0px #ff6b6b",marginBottom:"1.5rem"},children:[k.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"bold",marginBottom:"1rem",letterSpacing:"0.1em",color:"#ff6b6b"},children:["[  FAILED EXTRACTIONS: ",_.length," ]"]}),_.map((O,dn)=>k.jsxs("div",{style:{padding:"1rem",border:"1px solid #ff6b6b",marginBottom:"0.5rem",background:e==="dark"?"#1a1a1a":"#fff"},children:[k.jsxs("div",{style:{fontWeight:"bold",marginBottom:"0.5rem",color:jt},children:["CV ",O.candidateIndex+1,O.candidateName&&` - ${O.candidateName}`]}),k.jsxs("div",{style:{fontSize:"0.75rem",color:"#ff6b6b"},children:["Error: ",O.error]})]},dn))]}),k.jsx("div",{className:"footer",children:"[  PDF Parsing |  Gemini Extraction |  Google Slides |  App Ready! ]"})]})}tE(document.getElementById("root")).render(k.jsx(lt.StrictMode,{children:k.jsx(kk,{})}));
